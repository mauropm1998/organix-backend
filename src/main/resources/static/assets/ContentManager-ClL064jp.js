import{c as Qe,r as p,A as ee,a as i,o as d,b as e,p as g,u as s,t as a,d as A,e as fe,F as _e,h as $,z as Xe,l as Ze,x as et,y as X,f as x,j as Z,n as ie,g as S,B as M,q as v,s as _,w as tt,v as st,T as xe,D as at,E as rt,G as ot,R as nt}from"./index-NEpPsdbC.js";import{C as ce,a as lt,_ as dt,E as it}from"./index-MqKNRwmT.js";import{u as ct}from"./useData-CoCRTTjc.js";import{_ as y}from"./SkeletonLoader-CT9vKxgG.js";import{a as ut,T as ke}from"./triangle-alert-6kB1HHRI.js";import{L as ue}from"./loader-circle-BMnpDFdt.js";import{P as me}from"./plus-CkdgHC_B.js";import{A as ve}from"./arrow-right-qVTgIVyW.js";import{B as gt}from"./box-DjDHThgA.js";import"./userService-Dm1G1Bn4.js";/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=Qe("circle-arrow-right",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}],["path",{d:"M8 12h8",key:"1wcyev"}]]),yt={class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50"},bt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4 transform transition-all"},ht={class:"p-6"},xt={class:"flex items-center mb-4"},mt={class:"flex-shrink-0 w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center mr-3"},vt={class:"text-lg font-medium text-gray-900 dark:text-white"},ft={class:"mb-6"},_t={class:"text-gray-600 dark:text-gray-400"},kt={class:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600"},wt={class:"flex items-center"},Ct={class:"flex-1 min-w-0"},Dt={class:"text-sm font-medium text-gray-900 dark:text-white truncate block"},It={class:"text-xs text-gray-500 dark:text-gray-400"},Et={class:"flex justify-end space-x-3"},St=["disabled"],Nt={__name:"DeleteContentModal",props:{content:{type:Object,required:!0}},emits:["close","delete"],setup(H,{emit:l}){const b=H,q=l,{language:h}=fe(),w=p(!1);function Y(k){if(!k)return"N/A";const N=`contentTypes.${k.toLowerCase()}`,D=A(N,h.value);return D!==N?D:k}const C=async()=>{if(!(!b.content||w.value)){w.value=!0;try{q("delete",b.content.id)}catch(k){console.error("Error deleting content:",k),w.value=!1}}};return ee(()=>b.content,k=>{k||(w.value=!1)}),(k,N)=>(d(),i("div",yt,[e("div",bt,[e("div",ht,[e("div",xt,[e("div",mt,[g(s(ut),{class:"w-5 h-5 text-red-600 dark:text-red-400"})]),e("div",null,[e("h3",vt,a(s(A)("confirmDeletion",s(h))),1)])]),e("div",ft,[e("p",_t,a(s(A)("confirmDeleteContent",s(h))),1),e("div",kt,[e("div",wt,[g(s(_e),{class:"w-4 h-4 text-gray-500 dark:text-gray-400 mr-2 flex-shrink-0"}),e("div",Ct,[e("span",Dt,a(H.content?.name),1),e("span",It,a(Y(H.content?.type)),1)])])])]),e("div",Et,[e("button",{type:"button",onClick:N[0]||(N[0]=D=>k.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"},a(s(A)("cancel",s(h))),1),e("button",{type:"button",onClick:C,disabled:w.value,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2"},[w.value?(d(),$(s(ue),{key:0,class:"w-4 h-4 animate-spin"})):(d(),$(s(ke),{key:1,class:"w-4 h-4"})),e("span",null,a(w.value?s(A)("deleting",s(h)):s(A)("delete",s(h))),1)],8,St)])])])]))}},Tt={class:"space-y-6"},$t={class:"flex justify-between items-center"},Pt={class:"text-2xl font-bold text-gray-900 dark:text-white"},Mt={key:0},At={class:"flex space-x-3"},Ot=["disabled"],jt={key:0,class:"ml-1 text-xs"},Ut={class:"flex space-x-4"},Ft={value:""},Vt=["value"],Lt=["disabled"],zt={value:""},Rt={key:0,disabled:""},Bt=["value"],Gt=["disabled"],Ht={value:""},qt={key:0,disabled:""},Yt=["value"],Wt={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[9999] p-4"},Jt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[calc(100vh-2rem)] overflow-y-auto"},Kt={class:"p-6"},Qt={class:"flex items-center mb-4"},Xt={class:"flex-shrink-0 w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/20 flex items-center justify-center mr-3"},Zt={class:"text-lg font-medium text-gray-900 dark:text-white"},es={class:"mb-6"},ts={class:"text-gray-600 dark:text-gray-400 mb-4"},ss={key:0,class:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600 mb-4"},as={class:"flex items-center"},rs={class:"min-w-0 flex-1"},os={class:"text-sm font-medium text-gray-900 dark:text-white block truncate"},ns={class:"text-xs text-gray-500 dark:text-gray-400"},ls={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ds=["disabled"],is={value:null},cs=["value"],us={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},gs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ps=["disabled"],ys={value:""},bs=["value"],hs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},xs=["disabled"],ms={value:""},vs=["value"],fs={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_s={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ks=["disabled"],ws={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Cs=["disabled"],Ds=["value"],Is={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Es={class:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-32 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-lg p-3"},Ss=["id","value","disabled"],Ns=["for"],Ts={key:0,class:"text-xs text-red-500 mt-1"},$s={class:"flex flex-col sm:flex-row gap-3 sm:justify-end pt-4 border-t border-gray-200 dark:border-gray-600"},Ps=["disabled"],Ms=["disabled"],As={key:0,class:"space-y-6"},Os={class:"overflow-x-auto"},js={class:"w-full border border-gray-200 dark:border-gray-700 rounded-lg"},Us={class:"bg-gray-50 dark:bg-gray-700"},Fs={class:"px-6 py-3 text-left"},Vs={class:"px-6 py-3 text-left"},Ls={class:"px-6 py-3 text-left"},zs={class:"px-6 py-3 text-left"},Rs={class:"px-6 py-3 text-left"},Bs={class:"px-6 py-3 text-left"},Gs={class:"px-6 py-3 text-right"},Hs={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},qs={class:"px-6 py-4"},Ys={class:"px-6 py-4"},Ws={class:"px-6 py-4"},Js={class:"px-6 py-4"},Ks={class:"px-6 py-4"},Qs={class:"px-6 py-4"},Xs={class:"flex flex-wrap gap-1"},Zs={class:"px-6 py-4"},ea={class:"flex items-center justify-end space-x-2"},ta={key:1,class:"overflow-x-auto"},sa={class:"w-full border border-gray-200 dark:border-gray-700 rounded-lg"},aa={class:"bg-gray-50 dark:bg-gray-700"},ra={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},oa={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},na={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},la={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},da={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},ia={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},ca={class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},ua={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ga={class:"px-6 py-4 whitespace-nowrap"},pa={class:"text-xs font-mono text-gray-500 dark:text-gray-400"},ya={class:"px-6 py-4"},ba={class:"text-sm font-medium text-gray-900 dark:text-white"},ha={class:"px-6 py-4 whitespace-nowrap"},xa={class:"text-sm text-gray-500 dark:text-gray-400"},ma={class:"px-6 py-4 whitespace-nowrap"},va={class:"text-sm text-gray-500 dark:text-gray-400"},fa={class:"px-6 py-4 whitespace-nowrap"},_a=["value","onChange"],ka={value:"PENDING"},wa={value:"IN_PRODUCTION"},Ca={value:"POSTED"},Da={value:"FINISHED"},Ia={value:"CANCELED"},Ea={class:"px-6 py-4 whitespace-nowrap"},Sa={class:"text-sm text-gray-500 dark:text-gray-400"},Na={class:"px-6 py-4"},Ta={class:"flex flex-wrap gap-1"},$a={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Pa={class:"flex items-center justify-end space-x-2"},Ma=["onClick","title"],Aa=["onClick"],Oa={key:0,class:"flex items-center justify-between mt-4 flex-wrap gap-3"},ja={class:"text-sm text-gray-600 dark:text-gray-400"},Ua={class:"flex items-center space-x-2"},Fa=["disabled"],Va=["disabled"],La={key:2,class:"text-center py-12"},za={class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},Ra={class:"text-gray-600 dark:text-gray-400 mb-4"},Ba={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-[9999]"},Ga={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[calc(100vh-2rem)] overflow-y-auto"},Ha={class:"p-6"},qa={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},Ya={class:"space-y-6"},Wa={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},Ja={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4"},Ka={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Qa=["value","onInput"],Xa={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Za=["value","onInput"],er={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},tr=["value","onInput"],sr={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ar=["value","onInput"],rr={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},or=["value","onInput"],nr={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},lr=["value","onInput"],dr={class:"flex space-x-3 mt-6"},ir=["disabled"],cr=["disabled"],_r={__name:"ContentManager",setup(H){const{language:l}=fe(),{currentUser:b}=Ze(),{content:q,products:h,users:w,drafts:Y,channels:C,loadingChannels:k,loadingContent:N,fetchContent:D,fetchProducts:we,fetchUsers:Ce,fetchDrafts:De,fetchChannels:Ie,createContent:Ee,updateContent:Se,updateContentStatus:Ne,updateContentChannelMetrics:Te,deleteContent:$e,transformDraftToContent:Pe}=ct(),n=r=>A(r,l.value),W=p(!1),J=p(!1),U=p(!1),te=p(!1),F=p(null),I=p(null),T=p(null),se=p(null),V=p(""),L=p(""),z=p(""),E=p(0),Me=p(6),K=p(0),R=p(1),ae=p(!1),f=p(!1),P=p(!1),m=p({}),c=Xe({name:"",type:"",content:"",product:"",creator:b.value?.id||"",postDate:"",producer:b.value?.id||"",status:"PENDING",channels:[],productionStartDate:"",productionEndDate:""});et(async()=>{await Promise.all([we(),Ce(),De(),Ie()]),await Q()});const B=X(()=>!Y.value||!b.value?[]:Y.value.filter(r=>r.status==="APPROVED")),ge=X(()=>!q.value||!b.value?[]:q.value),Ae=X(()=>ge.value),Oe=X(()=>E.value+1);ee([V,L,z],async()=>{E.value=0,await Q()},{immediate:!1});const Q=async()=>{const r={page:E.value,size:Me.value};V.value&&(r.status=V.value),L.value&&(r.channelId=L.value),z.value&&(r.productId=z.value);const o=await D(r);o&&typeof o=="object"&&(typeof o.totalPages=="number"&&(R.value=o.totalPages),typeof o.totalElements=="number"&&(K.value=o.totalElements))},je=async()=>{E.value!==0&&(E.value-=1,await Q())},Ue=async()=>{E.value>=R.value-1||(E.value+=1,await Q())},Fe=r=>b.value?.adminType==="ADMIN"||r.creatorId===b.value?.id||r.producerId===b.value?.id,Ve=r=>b.value?.adminType==="ADMIN"||r.producerId===b.value?.id,Le=async()=>{ae.value=!0;try{const r={name:c.name,type:c.type,content:c.content,productId:c.product,postDate:j(c.postDate),channelIds:c.channels,status:c.status};c.status==="IN_PRODUCTION"&&(c.productionStartDate&&(r.productionStartDate=j(c.productionStartDate)),c.productionEndDate&&(r.productionEndDate=j(c.productionEndDate))),c.producer&&(r.producerId=c.producer),F.value&&(r.creatorId=c.creator),F.value?await Se(F.value.id,r):await Ee(r),re(),await D()}catch(r){console.error("Error saving content:",r)}finally{ae.value=!1}},pe=async()=>{if(I.value){f.value=!0;try{const r={status:c.status,channelIds:c.channels,postDate:j(c.postDate),productId:c.product||void 0,producerId:c.producer||void 0};c.status==="IN_PRODUCTION"&&(c.productionStartDate&&(r.productionStartDate=j(c.productionStartDate)),c.productionEndDate&&(r.productionEndDate=j(c.productionEndDate))),await Pe(I.value.id,r),ye(),await D()}catch(r){console.error("Error transforming draft:",r)}finally{f.value=!1}}},re=()=>{Object.assign(c,{name:"",type:"",content:"",product:"",creator:b.value?.id||"",postDate:"",producer:b.value?.id||"",status:"PENDING",channels:[],productionStartDate:"",productionEndDate:""}),W.value=!1,F.value=null},ye=()=>{J.value=!1,I.value=null,re()},ze=async r=>{se.value=r,te.value=!0},be=()=>{te.value=!1,se.value=null},Re=async r=>{try{await $e(r),await D(),be()}catch(o){console.error("Error deleting content:",o)}},Be=r=>{T.value=r;const o={};r.channels.forEach(t=>{const u=r.metrics?.channelMetrics?.find(G=>G.channelId===t.id);o[t.id]=u||{likes:0,comments:0,shares:0,postClicks:0,siteVisits:0,newAccounts:0}}),m.value=o,U.value=!0},O=(r,o,t)=>{m.value[r]||(m.value[r]={}),m.value[r][o]=t},Ge=async()=>{if(T.value){P.value=!0;try{if(Object.keys(m.value).length===0){P.value=!1;return}const r=Object.entries(m.value).map(([t,u])=>({channelId:t.toString(),likes:u.likes||0,comments:u.comments||0,shares:u.shares||0,siteVisits:u.siteVisits||0,newAccounts:u.newAccounts||0,postClicks:u.postClicks||0})),o=await Te(T.value.id,r);o.success?(U.value=!1,T.value=null,m.value={},await D()):alert(`Erro ao atualizar métricas: ${o.error}`)}catch(r){console.error("Error updating metrics:",r);const o=r.response?.data?.message||r.message||"Erro ao atualizar métricas";alert(`Erro ao atualizar métricas: ${o}`)}finally{P.value=!1}}},He=async(r,o)=>{try{const t=await Ne(r.id,o);t.success||(console.error("Error updating status:",t.error),alert(`Erro ao atualizar status: ${t.error}`))}catch(t){console.error("Error updating status:",t),alert("Erro ao atualizar status do conteúdo")}},qe=()=>{U.value=!1,T.value=null};ee(J,r=>{r?document.body.style.overflow="hidden":document.body.style.overflow=""}),ee(U,r=>{r?document.body.style.overflow="hidden":document.body.style.overflow=""});const Ye=r=>h.value?.find(t=>t.id===r)?.name||"",oe=r=>{if(!r)return"N/A";const o=`contentTypes.${r.toLowerCase()}`,t=n(o,l.value);return t!==o?t:r},he=r=>{const o={PENDING:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",IN_PRODUCTION:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",POSTED:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",FINISHED:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",CANCELED:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"};return o[r]||o.PENDING},We=r=>{if(!r)return"";let o;if(Array.isArray(r)){const[ne,le,de,Je=0,Ke=0]=r;o=new Date(ne,le-1,de,Je,Ke)}else o=new Date(r);const t=l.value==="pt"?"pt-PT":"en-US",u=o.toLocaleDateString(t),G=o.toLocaleTimeString(t,{hour:"2-digit",minute:"2-digit"});return`${u} ${G}`},j=r=>{if(!r)return;const o=new Date(r),t=o.getFullYear(),u=String(o.getMonth()+1).padStart(2,"0"),G=String(o.getDate()).padStart(2,"0"),ne=String(o.getHours()).padStart(2,"0"),le=String(o.getMinutes()).padStart(2,"0"),de=String(o.getSeconds()).padStart(2,"0");return`${t}-${u}-${G}T${ne}:${le}:${de}`};return(r,o)=>(d(),i(v,null,[e("div",Tt,[e("div",$t,[e("h2",Pt,[Z(a(n("content"))+" ",1),K.value?(d(),i("span",Mt,"("+a(K.value)+")",1)):x("",!0)]),e("div",At,[e("button",{onClick:o[0]||(o[0]=t=>B.value.length>0&&(J.value=!0)),disabled:B.value.length===0,class:ie(["flex items-center px-4 py-2 rounded-lg transition-colors flex-shrink-0",B.value.length===0?"bg-green-400 cursor-not-allowed opacity-60 text-white":"bg-green-600 hover:bg-green-700 text-white"]),title:"Transformar rascunhos aprovados em conteúdo"},[g(s(pt),{class:"w-4 h-4 mr-2"}),Z(" "+a(n("transformDraft")),1),B.value.length===0?(d(),i("span",jt,"(0)")):x("",!0)],10,Ot),e("button",{onClick:o[1]||(o[1]=t=>W.value=!0),class:"flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"},[g(s(me),{class:"w-4 h-4 mr-2"}),Z(" "+a(n("newContent")),1)])])]),e("div",Ut,[S(e("select",{"onUpdate:modelValue":o[2]||(o[2]=t=>V.value=t),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[e("option",Ft,a(n("allStatuses")),1),(d(!0),i(v,null,_(s(ce),t=>(d(),i("option",{key:t,value:t},a(n(t)),9,Vt))),128))],512),[[M,V.value]]),S(e("select",{"onUpdate:modelValue":o[3]||(o[3]=t=>L.value=t),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",disabled:!s(C)||s(C).length===0},[e("option",zt,a(n("allChannels")),1),!s(C)||s(C).length===0?(d(),i("option",Rt,a(s(k)?"Carregando canais...":"Nenhum canal disponível"),1)):x("",!0),(d(!0),i(v,null,_(s(C),t=>(d(),i("option",{key:t.id,value:t.id},a(t.name),9,Bt))),128))],8,Lt),[[M,L.value]]),S(e("select",{"onUpdate:modelValue":o[4]||(o[4]=t=>z.value=t),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",disabled:!s(h)||s(h).length===0},[e("option",Ht,a(n("allProducts")),1),!s(h)||s(h).length===0?(d(),i("option",qt,a(n("noProductsFound",s(l))),1)):x("",!0),(d(!0),i(v,null,_(s(h),t=>(d(),i("option",{key:t.id,value:t.id},a(t.name),9,Yt))),128))],8,Gt),[[M,z.value]])]),(d(),$(xe,{to:"body"},[J.value?(d(),i("div",Wt,[e("div",Jt,[e("div",Kt,[e("div",Qt,[e("div",Xt,[g(s(ve),{class:"w-5 h-5 text-green-600 dark:text-green-400"})]),e("div",null,[e("h3",Zt,a(n("transformDraftToContent",s(l))),1)])]),e("div",es,[e("p",ts,a(n("transformDraftDescription",s(l))),1),I.value?(d(),i("div",ss,[e("div",as,[g(s(_e),{class:"w-4 h-4 text-gray-500 dark:text-gray-400 mr-2 flex-shrink-0"}),e("div",rs,[e("span",os,a(I.value.name),1),e("span",ns,a(oe(I.value.type)),1)])])])):x("",!0),e("form",{onSubmit:tt(pe,["prevent"]),class:"space-y-4"},[e("div",null,[e("label",ls,a(n("selectDraft",s(l)))+" * ",1),S(e("select",{"onUpdate:modelValue":o[5]||(o[5]=t=>I.value=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:"",disabled:f.value},[e("option",is,a(n("selectApprovedDraft",s(l))),1),(d(!0),i(v,null,_(B.value,t=>(d(),i("option",{key:t.id,value:t},a(t.name)+" - "+a(oe(t.type)),9,cs))),128))],8,ds),[[M,I.value]])]),e("div",us,[e("div",null,[e("label",gs,a(n("product",s(l))),1),S(e("select",{"onUpdate:modelValue":o[6]||(o[6]=t=>c.product=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:f.value},[e("option",ys,a(n("selectProduct",s(l))),1),(d(!0),i(v,null,_(s(h),t=>(d(),i("option",{key:t.id,value:t.id},a(t.name),9,bs))),128))],8,ps),[[M,c.product]])]),e("div",null,[e("label",hs,a(n("producer",s(l))),1),S(e("select",{"onUpdate:modelValue":o[7]||(o[7]=t=>c.producer=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:f.value},[e("option",ms,a(n("selectProducer",s(l))),1),(d(!0),i(v,null,_(s(w),t=>(d(),i("option",{key:t.id,value:t.id},a(t.name),9,vs))),128))],8,xs),[[M,c.producer]])])]),e("div",fs,[e("div",null,[e("label",_s,a(n("postDate",s(l))),1),S(e("input",{type:"datetime-local","onUpdate:modelValue":o[8]||(o[8]=t=>c.postDate=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:f.value},null,8,ks),[[st,c.postDate]])]),e("div",null,[e("label",ws,a(n("status",s(l))),1),S(e("select",{"onUpdate:modelValue":o[9]||(o[9]=t=>c.status=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:f.value},[(d(!0),i(v,null,_(s(ce),t=>(d(),i("option",{key:t,value:t},a(n(t,s(l))),9,Ds))),128))],8,Cs),[[M,c.status]])])]),e("div",null,[e("label",Is,a(n("channels",s(l)))+" * ",1),e("div",Es,[(d(!0),i(v,null,_(s(C),t=>(d(),i("div",{key:t.id,class:"flex items-center"},[S(e("input",{id:`transform-channel-${t.id}`,type:"checkbox",value:t.id,"onUpdate:modelValue":o[10]||(o[10]=u=>c.channels=u),disabled:f.value,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 disabled:opacity-50"},null,8,Ss),[[at,c.channels]]),e("label",{for:`transform-channel-${t.id}`,class:"ml-2 text-sm text-gray-900 dark:text-gray-300 cursor-pointer truncate"},a(t.name),9,Ns)]))),128))]),c.channels.length===0?(d(),i("p",Ts,a(n("selectAtLeastOneChannel",s(l))),1)):x("",!0)])],32)]),e("div",$s,[e("button",{type:"button",onClick:ye,disabled:f.value,class:"w-full sm:w-auto px-6 py-2 bg-gray-200 hover:bg-gray-300 disabled:bg-gray-100 text-gray-700 dark:bg-gray-600 dark:hover:bg-gray-500 dark:disabled:bg-gray-700 dark:text-gray-300 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},a(n("cancel",s(l))),9,Ps),e("button",{onClick:pe,disabled:f.value||!I.value||c.channels.length===0,class:"w-full sm:w-auto flex items-center justify-center px-6 py-2 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white rounded-lg transition-colors space-x-2 disabled:opacity-50 disabled:cursor-not-allowed"},[f.value?(d(),$(s(ue),{key:0,class:"w-4 h-4 animate-spin"})):(d(),$(s(ve),{key:1,class:"w-4 h-4"})),e("span",null,a(f.value?n("transforming",s(l)):n("transformToContent",s(l))),1)],8,Ms)])])])])):x("",!0)])),g(dt,{show:W.value,"form-data":c,"editing-content":F.value,products:s(h),users:s(w),channels:s(C),"content-types":s(lt),"content-statuses":s(ce),t:n,language:s(l).value,user:s(b),"is-submitting":ae.value,onCancel:re,onSubmit:Le},null,8,["show","form-data","editing-content","products","users","channels","content-types","content-statuses","language","user","is-submitting"]),s(N)?(d(),i("div",As,[e("div",Os,[e("table",js,[e("thead",Us,[e("tr",null,[e("th",Fs,[g(y,{customClass:"h-4 w-16"})]),e("th",Vs,[g(y,{customClass:"h-4 w-12"})]),e("th",Ls,[g(y,{customClass:"h-4 w-20"})]),e("th",zs,[g(y,{customClass:"h-4 w-16"})]),e("th",Rs,[g(y,{customClass:"h-4 w-20"})]),e("th",Bs,[g(y,{customClass:"h-4 w-16"})]),e("th",Gs,[g(y,{customClass:"h-4 w-16"})])])]),e("tbody",Hs,[(d(),i(v,null,_(6,t=>e("tr",{key:t},[e("td",qs,[g(y,{customClass:"h-4 w-32 shimmer"})]),e("td",Ys,[g(y,{customClass:"h-4 w-20 shimmer"})]),e("td",Ws,[g(y,{customClass:"h-4 w-24 shimmer"})]),e("td",Js,[g(y,{customClass:"h-6 w-24 rounded-full shimmer"})]),e("td",Ks,[g(y,{customClass:"h-4 w-28 shimmer"})]),e("td",Qs,[e("div",Xs,[g(y,{customClass:"h-5 w-16 rounded-full shimmer"}),g(y,{customClass:"h-5 w-20 rounded-full shimmer"})])]),e("td",Zs,[e("div",ea,[g(y,{customClass:"h-8 w-8 rounded shimmer"}),g(y,{customClass:"h-8 w-8 rounded shimmer"}),g(y,{customClass:"h-8 w-8 rounded shimmer"}),g(y,{customClass:"h-8 w-8 rounded shimmer"})])])])),64))])])])])):(d(),i("div",ta,[e("table",sa,[e("thead",aa,[e("tr",null,[o[12]||(o[12]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Meta Ads ID",-1)),e("th",ra,a(n("name",s(l))),1),e("th",oa,a(n("type",s(l))),1),e("th",na,a(n("product",s(l))),1),e("th",la,a(n("status",s(l))),1),e("th",da,a(n("postDate",s(l))),1),e("th",ia,a(n("channels",s(l))),1),e("th",ca,a(n("actions",s(l))),1)])]),e("tbody",ua,[(d(!0),i(v,null,_(Ae.value,t=>(d(),i("tr",{key:t.id},[e("td",ga,[e("span",pa,a(t.metaAdsId||"-"),1)]),e("td",ya,[e("div",ba,a(t.name),1)]),e("td",ha,[e("div",xa,a(oe(t.type)),1)]),e("td",ma,[e("div",va,a(Ye(t.productId)),1)]),e("td",fa,[Ve(t)?(d(),i("select",{key:0,value:t.status,onChange:u=>He(t,u.target.value),class:ie(["text-xs rounded-full px-2 py-1 border-0 focus:ring-2 focus:ring-blue-500",he(t.status)])},[e("option",ka,a(n("PENDING",s(l))),1),e("option",wa,a(n("IN_PRODUCTION",s(l))),1),e("option",Ca,a(n("POSTED",s(l))),1),e("option",Da,a(n("FINISHED",s(l))),1),e("option",Ia,a(n("CANCELED",s(l))),1)],42,_a)):(d(),i("span",{key:1,class:ie(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",he(t.status)])},a(n(t.status,s(l))),3))]),e("td",Ea,[e("div",Sa,a(We(t.postDate)),1)]),e("td",Na,[e("div",Ta,[(d(!0),i(v,null,_(t.channels,u=>(d(),i("span",{key:u.id,class:"inline-flex px-2 py-1 text-xs bg-gray-100 dark:bg-gray-600 text-gray-800 dark:text-gray-200 rounded"},a(u.name),1))),128))])]),e("td",$a,[e("div",Pa,[["POSTED","FINISHED"].includes(t.status)?(d(),i("button",{key:0,onClick:u=>Be(t),class:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:n("updateMetrics",s(l))},[g(s(rt),{class:"w-4 h-4"})],8,Ma)):x("",!0),g(s(nt),{to:{name:"ContentPreview",params:{id:t.id}},class:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",title:n("preview",s(l))},{default:ot(()=>[g(s(it),{class:"w-4 h-4"})]),_:2},1032,["to","title"]),Fe(t)?(d(),i("button",{key:1,onClick:u=>ze(t),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"},[g(s(ke),{class:"w-4 h-4"})],8,Aa)):x("",!0)])])]))),128))])]),R.value>1?(d(),i("div",Oa,[e("div",ja,a(n("page",s(l)))+" "+a(Oe.value)+" / "+a(R.value)+" · "+a(K.value)+" "+a(n("items",s(l))),1),e("div",Ua,[e("button",{onClick:je,disabled:E.value===0,class:"px-3 py-1 rounded border text-sm disabled:opacity-40 disabled:cursor-not-allowed bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"},a(n("previous",s(l))),9,Fa),e("button",{onClick:Ue,disabled:E.value>=R.value-1,class:"px-3 py-1 rounded border text-sm disabled:opacity-40 disabled:cursor-not-allowed bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"},a(n("next",s(l))),9,Va)])])):x("",!0)])),!s(N)&&ge.value.length===0?(d(),i("div",La,[g(s(gt),{class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e("h3",za,a(n("noContentFound",s(l))),1),e("p",Ra,a(n("createFirstContent",s(l))),1),e("button",{onClick:o[11]||(o[11]=t=>W.value=!0),class:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"},[g(s(me),{class:"w-4 h-4 mr-2"}),Z(" "+a(n("newContent",s(l))),1)])])):x("",!0),(d(),$(xe,{to:"body"},[U.value&&T.value?(d(),i("div",Ba,[e("div",Ga,[e("div",Ha,[e("h3",qa,a(n("updateMetrics",s(l)))+" - "+a(T.value.name),1),e("div",Ya,[(d(!0),i(v,null,_(T.value.channels,t=>(d(),i("div",{key:t.id,class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4"},[e("h4",Wa,a(t.name)+" "+a(n("metrics",s(l))),1),e("div",Ja,[e("div",null,[e("label",Ka,a(n("likes",s(l))),1),e("input",{type:"number",min:"0",value:m.value[t.id]?.likes||0,onInput:u=>O(t.id,"likes",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,Qa)]),e("div",null,[e("label",Xa,a(n("comments",s(l))),1),e("input",{type:"number",min:"0",value:m.value[t.id]?.comments||0,onInput:u=>O(t.id,"comments",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,Za)]),e("div",null,[e("label",er,a(n("shares",s(l))),1),e("input",{type:"number",min:"0",value:m.value[t.id]?.shares||0,onInput:u=>O(t.id,"shares",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,tr)]),e("div",null,[e("label",sr,a(n("siteVisits",s(l))),1),e("input",{type:"number",min:"0",value:m.value[t.id]?.siteVisits||0,onInput:u=>O(t.id,"siteVisits",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,ar)]),e("div",null,[e("label",rr,a(n("newAccounts",s(l))),1),e("input",{type:"number",min:"0",value:m.value[t.id]?.newAccounts||0,onInput:u=>O(t.id,"newAccounts",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,or)]),e("div",null,[e("label",nr,a(n("postClicks",s(l))),1),e("input",{type:"number",min:"0",value:m.value[t.id]?.postClicks||0,onInput:u=>O(t.id,"postClicks",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,lr)])])]))),128))]),e("div",dr,[e("button",{onClick:Ge,disabled:P.value,class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center space-x-2"},[P.value?(d(),$(s(ue),{key:0,class:"h-4 w-4 animate-spin"})):x("",!0),e("span",null,a(P.value?n("saving",s(l)):n("save",s(l))),1)],8,ir),e("button",{onClick:qe,disabled:P.value,class:"px-4 py-2 bg-gray-300 hover:bg-gray-400 disabled:bg-gray-200 disabled:cursor-not-allowed text-gray-700 rounded-lg transition-colors"},a(n("cancel",s(l))),9,cr)])])])])):x("",!0)]))]),te.value?(d(),$(Nt,{key:0,content:se.value,onClose:be,onDelete:Re},null,8,["content"])):x("",!0)],64))}};export{_r as default};
