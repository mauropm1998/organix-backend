import{J as c,y as p,r as y,B as I}from"./index-4us4u8gX.js";import{u as C}from"./userService-DVxHc81-.js";const v={async getAllProducts(){return(await c.get("/api/products")).data},async createProduct(a){return(await c.post("/api/products",a)).data},async updateProduct(a,r){return(await c.put(`/api/products/${a}`,r)).data},async deleteProduct(a){await c.delete(`/api/products/${a}`)}},w={async getAllDrafts(a={}){const r={};return a.status&&(r.status=a.status),a.creatorId&&(r.creatorId=a.creatorId),a.productId&&(r.productId=a.productId),typeof a.page=="number"&&(r.page=a.page),typeof a.size=="number"&&(r.size=a.size),(await c.get("/api/drafts",{params:r})).data},async getDraftById(a){return(await c.get(`/api/drafts/${a}`)).data},async createDraft(a){return(await c.post("/api/drafts",a)).data},async updateDraft(a,r){return(await c.put(`/api/drafts/${a}`,r)).data},async deleteDraft(a){await c.delete(`/api/drafts/${a}`)},async transformDraftToContent(a,r){return(await c.post(`/api/content/transform-draft/${a}`,r)).data},async getRecentDrafts(a=7){return(await c.get("/api/drafts/recent",{params:{days:a}})).data},async getDraftStats(){return(await c.get("/api/drafts/stats")).data}},f={async getAllContent(a={}){const r={};return a.status&&(r.status=a.status),a.channelId&&(r.channelId=a.channelId),a.productId&&(r.productId=a.productId),a.userId&&(r.userId=a.userId),a.trafficType&&(r.trafficType=a.trafficType),typeof a.page=="number"&&(r.page=a.page),typeof a.size=="number"&&(r.size=a.size),(await c.get("/api/content",{params:r})).data},async getContentById(a){return(await c.get(`/api/content/${a}`)).data},async getMyContent(){return(await c.get("/api/content/my")).data},async createContent(a){return(await c.post("/api/content",a)).data},async updateContent(a,r){return(await c.put(`/api/content/${a}`,r)).data},async updateContentStatus(a,r){return(await c.patch(`/api/content/${a}/status`,{status:r})).data},async updateContentChannelMetrics(a,r){return(await c.put(`/api/content/${a}/channels/metrics`,{channelMetrics:r})).data},async deleteContent(a){await c.delete(`/api/content/${a}`)},async getRecentContent(a=7){return(await c.get("/api/content/recent",{params:{days:a}})).data},async getContentStats(){return(await c.get("/api/content/stats")).data}},ae={async getPerformanceSummary(a={}){return(await c.get("/api/performance/summary",{params:a})).data},async getTopContent(a={}){return(await c.get("/api/performance/top-content",{params:a})).data},async getChannelPerformance(a={}){return(await c.get("/api/performance/channel-performance",{params:a})).data}},re={async getCompanyInfo(){return(await c.get("/api/company")).data},async updateCompany(a){return(await c.put("/api/company",a)).data},async getCompanyStats(){return(await c.get("/api/company/stats")).data}},se={async getAllChannels(){return(await c.get("/api/channels")).data}},ne=async(a=7)=>{n.drafts=!0,l.drafts=null;try{i.value=await w.getRecentDrafts(a)}catch(r){l.drafts=r.response?.data?.message||"Erro ao carregar rascunhos recentes",console.error("Error fetching recent drafts:",r)}finally{n.drafts=!1}},oe=async(a=7)=>{n.content=!0,l.content=null;try{d.value=await f.getRecentContent(a)}catch(r){l.content=r.response?.data?.message||"Erro ao carregar conteúdo recente",console.error("Error fetching recent content:",r)}finally{n.content=!1}},m=y([]),h=y([]),i=y([]),d=y([]),D=y(null),E=y(null),M=y([]),P=y(null),S=y(null),n=I({users:!1,products:!1,drafts:!1,content:!1,draftStats:!1,contentStats:!1,channels:!1,companyStats:!1,performance:!1}),l=I({users:null,products:null,drafts:null,content:null,draftStats:null,contentStats:null,channels:null,companyStats:null,performance:null});function le(){const a=async()=>{n.users=!0,l.users=null;try{m.value=await C.getAllUsers()}catch(t){l.users=t.response?.data?.message||"Erro ao carregar usuários",console.error("Error fetching users:",t)}finally{n.users=!1}},r=async t=>{try{const e=await C.createUser(t);return m.value.push(e),{success:!0,data:e}}catch(e){return{success:!1,error:e.response?.data?.message||"Erro ao criar usuário"}}},g=async(t,e)=>{try{const s=await C.updateUser(t,e),u=m.value.findIndex(o=>o.id===t);return u!==-1&&(m.value[u]=s),{success:!0,data:s}}catch(s){return{success:!1,error:s.response?.data?.message||"Erro ao atualizar usuário"}}},A=async t=>{try{return await C.deleteUser(t),m.value=m.value.filter(e=>e.id!==t),{success:!0}}catch(e){return{success:!1,error:e.response?.data?.message||"Erro ao excluir usuário"}}},b=async()=>{n.products=!0,l.products=null;try{h.value=await v.getAllProducts()}catch(t){l.products=t.response?.data?.message||"Erro ao carregar produtos",console.error("Error fetching products:",t)}finally{n.products=!1}},z=async t=>{try{const e=await v.createProduct(t);return h.value.push(e),{success:!0,data:e}}catch(e){return{success:!1,error:e.response?.data?.message||"Erro ao criar produto"}}},x=async(t,e)=>{try{const s=await v.updateProduct(t,e),u=h.value.findIndex(o=>o.id===t);return u!==-1&&(h.value[u]=s),{success:!0,data:s}}catch(s){return{success:!1,error:s.response?.data?.message||"Erro ao atualizar produto"}}},$=async t=>{try{return await v.deleteProduct(t),h.value=h.value.filter(e=>e.id!==t),{success:!0}}catch(e){return{success:!1,error:e.response?.data?.message||"Erro ao excluir produto"}}},T=async(t={})=>{n.drafts=!0,l.drafts=null;try{const e=await w.getAllDrafts(t);return e&&typeof e=="object"&&Array.isArray(e.content)&&(typeof e.totalPages=="number"||typeof e.totalElements=="number")?(i.value=e.content,e):Array.isArray(e)?(i.value=e,{content:e,totalPages:1,totalElements:e.length,size:e.length,number:0}):(i.value=[],{content:[],totalPages:1,totalElements:0,size:0,number:0})}catch(e){return l.drafts=e.response?.data?.message||"Erro ao carregar rascunhos",console.error("Error fetching drafts:",e),{content:[],totalPages:1,totalElements:0,size:0,number:0}}finally{n.drafts=!1}},U=async()=>{n.draftStats=!0,l.draftStats=null;try{D.value=await w.getDraftStats()}catch(t){l.draftStats=t.response?.data?.message||"Erro ao carregar estatísticas de rascunhos"}finally{n.draftStats=!1}},N=async t=>{try{const e=await w.createDraft(t);return i.value.push(e),{success:!0,data:e}}catch(e){return{success:!1,error:e.response?.data?.message||"Erro ao criar rascunho"}}},R=async(t,e)=>{try{const s=await w.updateDraft(t,e),u=i.value.findIndex(o=>o.id===t);return u!==-1&&(i.value[u]=s),{success:!0,data:s}}catch(s){return{success:!1,error:s.response?.data?.message||"Erro ao atualizar rascunho"}}},B=async t=>{try{return await w.deleteDraft(t),i.value=i.value.filter(e=>e.id!==t),{success:!0}}catch(e){return{success:!1,error:e.response?.data?.message||"Erro ao excluir rascunho"}}},k=async(t,e)=>{try{const s=await w.transformDraftToContent(t,e);return i.value=i.value.filter(u=>u.id!==t),d.value&&Array.isArray(d.value)&&d.value.push(s),{success:!0,data:s}}catch(s){return{success:!1,error:s.response?.data?.message||"Erro ao transformar rascunho em conteúdo"}}},O=async(t={})=>{n.content=!0,l.content=null;try{const e=await f.getAllContent(t);return e&&typeof e=="object"&&Array.isArray(e.content)&&(typeof e.totalPages=="number"||typeof e.totalElements=="number")?(d.value=e.content,e):Array.isArray(e)?(d.value=e,{content:e,totalPages:1,totalElements:e.length,size:e.length,number:0}):(d.value=[],{content:[],totalPages:1,totalElements:0,size:0,number:0})}catch(e){return l.content=e.response?.data?.message||"Erro ao carregar conteúdo",console.error("Error fetching content:",e),{content:[],totalPages:1,totalElements:0,size:0,number:0}}finally{n.content=!1}},j=async()=>{n.contentStats=!0,l.contentStats=null;try{E.value=await f.getContentStats()}catch(t){l.contentStats=t.response?.data?.message||"Erro ao carregar estatísticas de conteúdo"}finally{n.contentStats=!1}},V=async()=>{n.content=!0,l.content=null;try{d.value=await f.getMyContent()}catch(t){l.content=t.response?.data?.message||"Erro ao carregar meu conteúdo",console.error("Error fetching my content:",t)}finally{n.content=!1}},F=async t=>{try{return{success:!0,data:await f.getContentById(t)}}catch(e){return{success:!1,error:e.response?.data?.message||"Erro ao buscar conteúdo"}}},G=async t=>{try{const e=await f.createContent(t);return d.value.push(e),{success:!0,data:e}}catch(e){return{success:!1,error:e.response?.data?.message||"Erro ao criar conteúdo"}}},J=async(t,e)=>{try{const s=await f.updateContent(t,e),u=d.value.findIndex(o=>o.id===t);return u!==-1&&(d.value[u]=s),{success:!0,data:s}}catch(s){return{success:!1,error:s.response?.data?.message||"Erro ao atualizar conteúdo"}}},L=async(t,e)=>{try{const s=await f.updateContentStatus(t,e),u=d.value.findIndex(o=>o.id===t);return u!==-1&&(d.value[u]=s),{success:!0,data:s}}catch(s){return{success:!1,error:s.response?.data?.message||"Erro ao atualizar status do conteúdo"}}},q=async(t,e)=>{try{const s=await f.updateContentChannelMetrics(t,e),u=d.value.findIndex(o=>o.id===t);return u!==-1&&(d.value[u]=s),{success:!0,data:s}}catch(s){return{success:!1,error:s.response?.data?.message||"Erro ao atualizar métricas do conteúdo"}}},H=async t=>{try{return await f.deleteContent(t),d.value=d.value.filter(e=>e.id!==t),{success:!0}}catch(e){return{success:!1,error:e.response?.data?.message||"Erro ao excluir conteúdo"}}},K=async(t={})=>{n.performance=!0,l.performance=null;try{const e={};if(t.startDate){const o=new Date(t.startDate);e.startDate=o.toISOString().split("T")[0]}if(t.endDate){const o=new Date(t.endDate);e.endDate=o.toISOString().split("T")[0]}t.channel&&t.channel.trim()!==""&&(e.channel=t.channel.trim()),t.productId&&t.productId.trim()!==""&&(e.productId=t.productId.trim());const u=(await ae.getTopContent(e)).map(o=>({id:`${o.contentId}-${o.channel}`,contentId:o.contentId,name:o.contentName,type:o.contentType,channels:[o.channel],productName:o.productName||"N/A",metrics:{likes:o.channelLikes||0,comments:o.channelComments||0,shares:o.channelShares||0,clicks:o.channelPostClicks||0,siteVisits:o.channelSiteVisits||0,newAccounts:o.channelNewAccounts||0},postDate:o.publishDate,performanceScore:o.performanceScore||0}));S.value=u}catch(e){S.value=[],l.performance=e.response?.data?.message||"Erro ao carregar dados de performance"}finally{n.performance=!1}},Q=async()=>{n.companyStats=!0,l.companyStats=null;try{P.value=await re.getCompanyStats()}catch(t){l.companyStats=t.response?.data?.message||"Erro ao carregar estatísticas da empresa",console.error("Error fetching company stats:",t)}finally{n.companyStats=!1}},W=async()=>{n.channels=!0,l.channels=null;try{M.value=await se.getAllChannels()}catch(t){l.channels=t.response?.data?.message||"Erro ao carregar canais",console.error("Error fetching channels:",t)}finally{n.channels=!1}},X=p(()=>i.value.filter(t=>t.status==="PENDING")),Y=p(()=>d.value.filter(t=>t.status==="POSTED")),Z=p(()=>m.value.length),_=p(()=>h.value.length),ee=p(()=>i.value.length),te=p(()=>d.value.length);return{users:m,products:h,drafts:i,content:d,draftStatsData:D,contentStatsData:E,channels:M,companyStats:P,performanceData:S,loading:n,loadingUsers:p(()=>n.users),loadingProducts:p(()=>n.products),loadingDrafts:p(()=>n.drafts),loadingContent:p(()=>n.content),loadingDraftStats:p(()=>n.draftStats),loadingContentStats:p(()=>n.contentStats),loadingChannels:p(()=>n.channels),loadingCompanyStats:p(()=>n.companyStats),loadingPerformance:p(()=>n.performance),errors:l,fetchUsers:a,createUser:r,updateUser:g,deleteUser:A,fetchProducts:b,createProduct:z,updateProduct:x,deleteProduct:$,fetchDrafts:T,fetchDraftStats:U,fetchRecentDrafts:ne,createDraft:N,updateDraft:R,deleteDraft:B,transformDraftToContent:k,fetchContent:O,fetchContentStats:j,fetchRecentContent:oe,fetchMyContent:V,getContentById:F,createContent:G,updateContent:J,updateContentStatus:L,updateContentChannelMetrics:q,deleteContent:H,fetchPerformanceData:K,fetchCompanyStats:Q,fetchChannels:W,pendingDrafts:X,publishedContent:Y,totalUsers:Z,totalProducts:_,totalDrafts:ee,totalContent:te}}export{f as c,le as u};
