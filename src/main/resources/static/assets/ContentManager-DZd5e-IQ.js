import{c as Le,r as v,z as ze,l as qe,x as Be,y as ie,A as K,a as i,b as e,h as E,f as _,t as a,d as Re,p as g,j as z,u as s,g as h,B as k,q as b,s as x,e as Ge,F as He,w as ue,v as Q,T as ce,o as n,D as ge,n as pe,E as Ye}from"./index-CWbGlPLC.js";import{u as We}from"./useData-B7VlmU_F.js";import{_ as p}from"./SkeletonLoader-Bd7IEoAO.js";import{P as X,S as Je,T as Ke}from"./trash-2-E4Gmu2j8.js";import{A as ye}from"./arrow-right-6ZeRlMdP.js";import{L as Z}from"./loader-circle-CxhZKDjf.js";import{B as Qe}from"./box-B518OR41.js";import"./userService-DjmtoxOE.js";/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=Le("circle-arrow-right",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}],["path",{d:"M8 12h8",key:"1wcyev"}]]),Ze=["article","video","image","social","email","blog"],ee=["PENDING","IN_PRODUCTION","POSTED","FINISHED","CANCELED"],et={class:"space-y-6"},tt={class:"flex justify-between items-center"},st={class:"text-2xl font-bold text-gray-900 dark:text-white"},rt={class:"flex space-x-3"},at={class:"flex space-x-4"},ot={value:""},lt=["value"],dt=["disabled"],nt={value:""},it={key:0,disabled:""},ut=["value"],ct={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[9999] p-4"},gt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[calc(100vh-2rem)] overflow-y-auto"},pt={class:"p-6"},yt={class:"flex items-center mb-4"},bt={class:"flex-shrink-0 w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/20 flex items-center justify-center mr-3"},xt={class:"text-lg font-medium text-gray-900 dark:text-white"},ht={class:"mb-6"},mt={class:"text-gray-600 dark:text-gray-400 mb-4"},ft={key:0,class:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600 mb-4"},vt={class:"flex items-center"},_t={class:"min-w-0 flex-1"},kt={class:"text-sm font-medium text-gray-900 dark:text-white block truncate"},wt={class:"text-xs text-gray-500 dark:text-gray-400"},Ct={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Dt=["disabled"],It={value:null},St=["value"],Nt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Et={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Tt=["disabled"],Mt={value:""},At=["value"],Pt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},$t=["disabled"],Ut={value:""},Vt=["value"],Ot={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ft={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},jt=["disabled"],Lt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},zt=["disabled"],qt=["value"],Bt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Rt={class:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-32 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-lg p-3"},Gt=["id","value","disabled"],Ht=["for"],Yt={key:0,class:"text-xs text-red-500 mt-1"},Wt={class:"flex flex-col sm:flex-row gap-3 sm:justify-end pt-4 border-t border-gray-200 dark:border-gray-600"},Jt=["disabled"],Kt=["disabled"],Qt={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"},Xt={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},Zt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},es={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ts={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ss={value:""},rs=["value"],as={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},os={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ls={value:""},ds=["value"],ns={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},is={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},us={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},cs=["disabled"],gs=["value"],ps={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ys=["value"],bs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},xs=["value"],hs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},ms={class:"grid grid-cols-2 md:grid-cols-3 gap-2"},fs=["value"],vs={class:"ml-2 text-sm text-gray-700 dark:text-gray-300"},_s={class:"flex space-x-3"},ks=["disabled"],ws=["disabled"],Cs={key:1,class:"space-y-6"},Ds={class:"overflow-x-auto"},Is={class:"w-full border border-gray-200 dark:border-gray-700 rounded-lg"},Ss={class:"bg-gray-50 dark:bg-gray-700"},Ns={class:"px-6 py-3 text-left"},Es={class:"px-6 py-3 text-left"},Ts={class:"px-6 py-3 text-left"},Ms={class:"px-6 py-3 text-left"},As={class:"px-6 py-3 text-left"},Ps={class:"px-6 py-3 text-left"},$s={class:"px-6 py-3 text-right"},Us={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Vs={class:"px-6 py-4"},Os={class:"px-6 py-4"},Fs={class:"px-6 py-4"},js={class:"px-6 py-4"},Ls={class:"px-6 py-4"},zs={class:"px-6 py-4"},qs={class:"flex flex-wrap gap-1"},Bs={class:"px-6 py-4"},Rs={class:"flex items-center justify-end space-x-2"},Gs={key:2,class:"overflow-x-auto"},Hs={class:"w-full border border-gray-200 dark:border-gray-700 rounded-lg"},Ys={class:"bg-gray-50 dark:bg-gray-700"},Ws={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Js={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Ks={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Qs={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Xs={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Zs={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},er={class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},tr={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},sr={class:"px-6 py-4 whitespace-nowrap"},rr={class:"text-sm font-medium text-gray-900 dark:text-white"},ar={class:"px-6 py-4 whitespace-nowrap"},or={class:"text-sm text-gray-500 dark:text-gray-400"},lr={class:"px-6 py-4 whitespace-nowrap"},dr={class:"text-sm text-gray-500 dark:text-gray-400"},nr={class:"px-6 py-4 whitespace-nowrap"},ir=["value","onChange"],ur={value:"PENDING"},cr={value:"IN_PRODUCTION"},gr={value:"POSTED"},pr={value:"FINISHED"},yr={value:"CANCELED"},br={class:"px-6 py-4 whitespace-nowrap"},xr={class:"text-sm text-gray-500 dark:text-gray-400"},hr={class:"px-6 py-4"},mr={class:"flex flex-wrap gap-1"},fr={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},vr={class:"flex items-center justify-end space-x-2"},_r=["onClick","title"],kr=["onClick"],wr=["onClick"],Cr={key:3,class:"text-center py-12"},Dr={class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},Ir={class:"text-gray-600 dark:text-gray-400 mb-4"},Sr={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-[9999]"},Nr={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[calc(100vh-2rem)] overflow-y-auto"},Er={class:"p-6"},Tr={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},Mr={class:"space-y-6"},Ar={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},Pr={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4"},$r={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Ur=["value","onInput"],Vr={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Or=["value","onInput"],Fr={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},jr=["value","onInput"],Lr={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},zr=["value","onInput"],qr={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Br=["value","onInput"],Rr={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Gr=["value","onInput"],Hr={class:"flex space-x-3 mt-6"},Yr=["disabled"],Wr=["disabled"],aa={__name:"ContentManager",setup(Jr){const{language:d}=Ge(),{currentUser:y}=qe(),{content:q,products:B,users:R,drafts:G,channels:I,loadingChannels:be,loadingContent:te,fetchContent:T,fetchProducts:xe,fetchUsers:he,fetchDrafts:me,fetchChannels:fe,createContent:ve,updateContent:_e,updateContentStatus:ke,updateContentChannelMetrics:we,deleteContent:Ce,transformDraftToContent:De}=We(),l=r=>Re(r,d.value),P=v(!1),L=v(!1),$=v(!1),C=v(null),w=v(null),D=v(null),U=v(""),V=v(""),M=v(!1),f=v(!1),S=v(!1),m=v({}),u=ze({name:"",type:"",product:"",creator:y.value?.id||"",postDate:"",producer:y.value?.id||"",status:"PENDING",channels:[]});Be(async()=>{await Promise.all([T(),xe(),he(),me(),fe()])});const se=ie(()=>!G.value||!y.value?[]:y.value.adminType==="ADMIN"?G.value.filter(r=>r.status==="APPROVED"):G.value.filter(r=>r.status==="APPROVED"&&r.creatorId===y.value.id)),re=ie(()=>!q.value||!y.value?[]:y.value.adminType==="ADMIN"?q.value:q.value.filter(r=>r.creatorId===y.value.id||r.producerId===y.value.id));K([U,V],async()=>{await Ie()},{immediate:!1});const Ie=async()=>{const r={};U.value&&(r.status=U.value),V.value&&(r.channelId=V.value),await T(r)},ae=r=>y.value?.adminType==="ADMIN"||r.creatorId===y.value?.id||r.producerId===y.value?.id,Se=r=>y.value?.adminType==="ADMIN"||r.producerId===y.value?.id,Ne=async()=>{M.value=!0;try{const r={name:u.name,type:u.type,productId:u.product,postDate:ne(u.postDate),channelIds:u.channels,status:u.status};u.producer&&(r.producerId=u.producer),C.value&&(r.creatorId=u.creator),C.value?await _e(C.value.id,r):await ve(r),H(),await T()}catch(r){console.error("Error saving content:",r)}finally{M.value=!1}},oe=async()=>{if(w.value){f.value=!0;try{const r={status:u.status,channelIds:u.channels,postDate:ne(u.postDate),productId:u.product||void 0,producerId:u.producer||void 0};await De(w.value.id,r),le(),await T()}catch(r){console.error("Error transforming draft:",r)}finally{f.value=!1}}},H=()=>{Object.assign(u,{name:"",type:"",product:"",creator:y.value?.id||"",postDate:"",producer:y.value?.id||"",status:"PENDING",channels:[]}),P.value=!1,C.value=null},le=()=>{L.value=!1,w.value=null,H()},Ee=r=>{C.value=r,Object.assign(u,{name:r.name,type:r.type,product:r.productId,creator:r.creatorId,postDate:Oe(r.postDate),producer:r.producerId,status:r.status,channels:r.channels?.map(o=>o.id)||[]}),P.value=!0},Te=async r=>{if(confirm(l("confirmDelete")))try{await Ce(r.id),await T()}catch(o){console.error("Error deleting content:",o)}},Me=r=>{D.value=r;const o={};r.channels.forEach(t=>{const c=r.metrics?.channelMetrics?.find(N=>N.channelId===t.id);o[t.id]=c||{likes:0,comments:0,shares:0,postClicks:0,siteVisits:0,newAccounts:0}}),m.value=o,$.value=!0},A=(r,o,t)=>{m.value[r]||(m.value[r]={}),m.value[r][o]=t},Ae=async()=>{if(D.value){S.value=!0;try{if(Object.keys(m.value).length===0){S.value=!1;return}const r=Object.entries(m.value).map(([t,c])=>({channelId:t.toString(),likes:c.likes||0,comments:c.comments||0,shares:c.shares||0,siteVisits:c.siteVisits||0,newAccounts:c.newAccounts||0,postClicks:c.postClicks||0})),o=await we(D.value.id,r);o.success?($.value=!1,D.value=null,m.value={},await T()):alert(`Erro ao atualizar métricas: ${o.error}`)}catch(r){console.error("Error updating metrics:",r);const o=r.response?.data?.message||r.message||"Erro ao atualizar métricas";alert(`Erro ao atualizar métricas: ${o}`)}finally{S.value=!1}}},Pe=async(r,o)=>{try{const t=await ke(r.id,o);t.success||(console.error("Error updating status:",t.error),alert(`Erro ao atualizar status: ${t.error}`))}catch(t){console.error("Error updating status:",t),alert("Erro ao atualizar status do conteúdo")}},$e=()=>{$.value=!1,D.value=null};K(L,r=>{r?document.body.style.overflow="hidden":document.body.style.overflow=""}),K($,r=>{r?document.body.style.overflow="hidden":document.body.style.overflow=""});const Ue=r=>B.value?.find(t=>t.id===r)?.name||"",Y=r=>{if(!r)return"N/A";const o=`contentTypes.${r.toLowerCase()}`,t=l(o,d.value);return t!==o?t:r},de=r=>{const o={PENDING:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",IN_PRODUCTION:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",POSTED:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",FINISHED:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",CANCELED:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"};return o[r]||o.PENDING},Ve=r=>{if(!r)return"";let o;if(Array.isArray(r)){const[O,F,j,W=0,J=0]=r;o=new Date(O,F-1,j,W,J)}else o=new Date(r);const t=d.value==="pt"?"pt-PT":"en-US",c=o.toLocaleDateString(t),N=o.toLocaleTimeString(t,{hour:"2-digit",minute:"2-digit"});return`${c} ${N}`},Oe=r=>{if(!r)return"";let o;if(Array.isArray(r)){const[j,W,J,Fe=0,je=0]=r;o=new Date(j,W-1,J,Fe,je)}else o=new Date(r);const t=o.getFullYear(),c=String(o.getMonth()+1).padStart(2,"0"),N=String(o.getDate()).padStart(2,"0"),O=String(o.getHours()).padStart(2,"0"),F=String(o.getMinutes()).padStart(2,"0");return`${t}-${c}-${N}T${O}:${F}`},ne=r=>{if(!r)return;const o=new Date(r),t=o.getFullYear(),c=String(o.getMonth()+1).padStart(2,"0"),N=String(o.getDate()).padStart(2,"0"),O=String(o.getHours()).padStart(2,"0"),F=String(o.getMinutes()).padStart(2,"0"),j=String(o.getSeconds()).padStart(2,"0");return`${t}-${c}-${N}T${O}:${F}:${j}`};return(r,o)=>(n(),i("div",et,[e("div",tt,[e("h2",st,a(l("content")),1),e("div",rt,[se.value.length>0?(n(),i("button",{key:0,onClick:o[0]||(o[0]=t=>L.value=!0),class:"flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors"},[g(s(Xe),{class:"w-4 h-4 mr-2"}),z(" "+a(l("transformDraft")),1)])):_("",!0),e("button",{onClick:o[1]||(o[1]=t=>P.value=!0),class:"flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"},[g(s(X),{class:"w-4 h-4 mr-2"}),z(" "+a(l("newContent")),1)])])]),e("div",at,[h(e("select",{"onUpdate:modelValue":o[2]||(o[2]=t=>U.value=t),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[e("option",ot,a(l("allStatuses")),1),(n(!0),i(b,null,x(s(ee),t=>(n(),i("option",{key:t,value:t},a(l(t)),9,lt))),128))],512),[[k,U.value]]),h(e("select",{"onUpdate:modelValue":o[3]||(o[3]=t=>V.value=t),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",disabled:!s(I)||s(I).length===0},[e("option",nt,a(l("allChannels")),1),!s(I)||s(I).length===0?(n(),i("option",it,a(s(be)?"Carregando canais...":"Nenhum canal disponível"),1)):_("",!0),(n(!0),i(b,null,x(s(I),t=>(n(),i("option",{key:t.id,value:t.id},a(t.name),9,ut))),128))],8,dt),[[k,V.value]])]),(n(),E(ce,{to:"body"},[L.value?(n(),i("div",ct,[e("div",gt,[e("div",pt,[e("div",yt,[e("div",bt,[g(s(ye),{class:"w-5 h-5 text-green-600 dark:text-green-400"})]),e("div",null,[e("h3",xt,a(l("transformDraftToContent",s(d))),1)])]),e("div",ht,[e("p",mt,a(l("transformDraftDescription",s(d))),1),w.value?(n(),i("div",ft,[e("div",vt,[g(s(He),{class:"w-4 h-4 text-gray-500 dark:text-gray-400 mr-2 flex-shrink-0"}),e("div",_t,[e("span",kt,a(w.value.name),1),e("span",wt,a(Y(w.value.type)),1)])])])):_("",!0),e("form",{onSubmit:ue(oe,["prevent"]),class:"space-y-4"},[e("div",null,[e("label",Ct,a(l("selectDraft",s(d)))+" * ",1),h(e("select",{"onUpdate:modelValue":o[4]||(o[4]=t=>w.value=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:"",disabled:f.value},[e("option",It,a(l("selectApprovedDraft",s(d))),1),(n(!0),i(b,null,x(se.value,t=>(n(),i("option",{key:t.id,value:t},a(t.name)+" - "+a(Y(t.type)),9,St))),128))],8,Dt),[[k,w.value]])]),e("div",Nt,[e("div",null,[e("label",Et,a(l("product",s(d))),1),h(e("select",{"onUpdate:modelValue":o[5]||(o[5]=t=>u.product=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:f.value},[e("option",Mt,a(l("selectProduct",s(d))),1),(n(!0),i(b,null,x(s(B),t=>(n(),i("option",{key:t.id,value:t.id},a(t.name),9,At))),128))],8,Tt),[[k,u.product]])]),e("div",null,[e("label",Pt,a(l("producer",s(d))),1),h(e("select",{"onUpdate:modelValue":o[6]||(o[6]=t=>u.producer=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:f.value},[e("option",Ut,a(l("selectProducer",s(d))),1),(n(!0),i(b,null,x(s(R),t=>(n(),i("option",{key:t.id,value:t.id},a(t.name),9,Vt))),128))],8,$t),[[k,u.producer]])])]),e("div",Ot,[e("div",null,[e("label",Ft,a(l("postDate",s(d))),1),h(e("input",{type:"datetime-local","onUpdate:modelValue":o[7]||(o[7]=t=>u.postDate=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:f.value},null,8,jt),[[Q,u.postDate]])]),e("div",null,[e("label",Lt,a(l("status",s(d))),1),h(e("select",{"onUpdate:modelValue":o[8]||(o[8]=t=>u.status=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:f.value},[(n(!0),i(b,null,x(s(ee),t=>(n(),i("option",{key:t,value:t},a(l(t,s(d))),9,qt))),128))],8,zt),[[k,u.status]])])]),e("div",null,[e("label",Bt,a(l("channels",s(d)))+" * ",1),e("div",Rt,[(n(!0),i(b,null,x(s(I),t=>(n(),i("div",{key:t.id,class:"flex items-center"},[h(e("input",{id:`transform-channel-${t.id}`,type:"checkbox",value:t.id,"onUpdate:modelValue":o[9]||(o[9]=c=>u.channels=c),disabled:f.value,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 disabled:opacity-50"},null,8,Gt),[[ge,u.channels]]),e("label",{for:`transform-channel-${t.id}`,class:"ml-2 text-sm text-gray-900 dark:text-gray-300 cursor-pointer truncate"},a(t.name),9,Ht)]))),128))]),u.channels.length===0?(n(),i("p",Yt,a(l("selectAtLeastOneChannel",s(d))),1)):_("",!0)])],32)]),e("div",Wt,[e("button",{type:"button",onClick:le,disabled:f.value,class:"w-full sm:w-auto px-6 py-2 bg-gray-200 hover:bg-gray-300 disabled:bg-gray-100 text-gray-700 dark:bg-gray-600 dark:hover:bg-gray-500 dark:disabled:bg-gray-700 dark:text-gray-300 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},a(l("cancel",s(d))),9,Jt),e("button",{onClick:oe,disabled:f.value||!w.value||u.channels.length===0,class:"w-full sm:w-auto flex items-center justify-center px-6 py-2 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white rounded-lg transition-colors space-x-2 disabled:opacity-50 disabled:cursor-not-allowed"},[f.value?(n(),E(s(Z),{key:0,class:"w-4 h-4 animate-spin"})):(n(),E(s(ye),{key:1,class:"w-4 h-4"})),e("span",null,a(f.value?l("transforming",s(d)):l("transformToContent",s(d))),1)],8,Kt)])])])])):_("",!0)])),P.value?(n(),i("div",Qt,[e("h3",Xt,a(C.value?l("editContent"):l("createNewContent")),1),e("form",{onSubmit:ue(Ne,["prevent"]),class:"space-y-4"},[e("div",Zt,[e("div",null,[e("label",es,a(l("name",s(d))),1),h(e("input",{type:"text","onUpdate:modelValue":o[10]||(o[10]=t=>u.name=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:""},null,512),[[Q,u.name]])]),e("div",null,[e("label",ts,a(l("type",s(d))),1),h(e("select",{"onUpdate:modelValue":o[11]||(o[11]=t=>u.type=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:""},[e("option",ss,a(l("type",s(d))),1),(n(!0),i(b,null,x(s(Ze),t=>(n(),i("option",{key:t,value:t},a(l(`contentTypes.${t}`,s(d))),9,rs))),128))],512),[[k,u.type]])])]),e("div",as,[e("div",null,[e("label",os,a(l("product",s(d))),1),h(e("select",{"onUpdate:modelValue":o[12]||(o[12]=t=>u.product=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:""},[e("option",ls,a(l("product",s(d))),1),(n(!0),i(b,null,x(s(B),t=>(n(),i("option",{key:t.id,value:t.id},a(t.name),9,ds))),128))],512),[[k,u.product]])]),e("div",null,[e("label",ns,a(l("postDate",s(d))),1),h(e("input",{type:"datetime-local","onUpdate:modelValue":o[13]||(o[13]=t=>u.postDate=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:""},null,512),[[Q,u.postDate]])])]),e("div",is,[e("div",null,[e("label",us,a(l("creator",s(d))),1),h(e("select",{"onUpdate:modelValue":o[14]||(o[14]=t=>u.creator=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:"",disabled:s(y).adminType!=="ADMIN"},[(n(!0),i(b,null,x(s(R),t=>(n(),i("option",{key:t.id,value:t.id},a(t.name),9,gs))),128))],8,cs),[[k,u.creator]])]),e("div",null,[e("label",ps,a(l("producer",s(d))),1),h(e("select",{"onUpdate:modelValue":o[15]||(o[15]=t=>u.producer=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:""},[(n(!0),i(b,null,x(s(R),t=>(n(),i("option",{key:t.id,value:t.id},a(t.name),9,ys))),128))],512),[[k,u.producer]])]),e("div",null,[e("label",bs,a(l("status",s(d))),1),h(e("select",{"onUpdate:modelValue":o[16]||(o[16]=t=>u.status=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"},[(n(!0),i(b,null,x(s(ee),t=>(n(),i("option",{key:t,value:t},a(l(t,s(d))),9,xs))),128))],512),[[k,u.status]])])]),e("div",null,[e("label",hs,a(l("channels",s(d))),1),e("div",ms,[(n(!0),i(b,null,x(s(I),t=>(n(),i("label",{key:t.id,class:"flex items-center"},[h(e("input",{type:"checkbox",value:t.id,"onUpdate:modelValue":o[17]||(o[17]=c=>u.channels=c),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,8,fs),[[ge,u.channels]]),e("span",vs,a(t.name),1)]))),128))])]),e("div",_s,[e("button",{type:"submit",disabled:M.value,class:"flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-lg transition-colors"},[M.value?(n(),E(s(Z),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):(n(),E(s(X),{key:1,class:"w-4 h-4 mr-2"})),z(" "+a(M.value?C.value?l("updating",s(d)):l("creating",s(d)):C.value?l("update",s(d)):l("create",s(d))),1)],8,ks),e("button",{type:"button",onClick:H,disabled:M.value,class:"px-4 py-2 bg-gray-300 hover:bg-gray-400 disabled:bg-gray-200 text-gray-700 rounded-lg transition-colors"},a(l("cancel",s(d))),9,ws)])],32)])):_("",!0),s(te)?(n(),i("div",Cs,[e("div",Ds,[e("table",Is,[e("thead",Ss,[e("tr",null,[e("th",Ns,[g(p,{customClass:"h-4 w-16"})]),e("th",Es,[g(p,{customClass:"h-4 w-12"})]),e("th",Ts,[g(p,{customClass:"h-4 w-20"})]),e("th",Ms,[g(p,{customClass:"h-4 w-16"})]),e("th",As,[g(p,{customClass:"h-4 w-20"})]),e("th",Ps,[g(p,{customClass:"h-4 w-16"})]),e("th",$s,[g(p,{customClass:"h-4 w-16"})])])]),e("tbody",Us,[(n(),i(b,null,x(6,t=>e("tr",{key:t,class:"animate-pulse"},[e("td",Vs,[g(p,{customClass:"h-4 w-32"})]),e("td",Os,[g(p,{customClass:"h-4 w-20"})]),e("td",Fs,[g(p,{customClass:"h-4 w-24"})]),e("td",js,[g(p,{customClass:"h-6 w-24 rounded-full"})]),e("td",Ls,[g(p,{customClass:"h-4 w-28"})]),e("td",zs,[e("div",qs,[g(p,{customClass:"h-5 w-16 rounded-full"}),g(p,{customClass:"h-5 w-20 rounded-full"})])]),e("td",Bs,[e("div",Rs,[g(p,{customClass:"h-8 w-8 rounded"}),g(p,{customClass:"h-8 w-8 rounded"}),g(p,{customClass:"h-8 w-8 rounded"}),g(p,{customClass:"h-8 w-8 rounded"})])])])),64))])])])])):(n(),i("div",Gs,[e("table",Hs,[e("thead",Ys,[e("tr",null,[e("th",Ws,a(l("name",s(d))),1),e("th",Js,a(l("type",s(d))),1),e("th",Ks,a(l("product",s(d))),1),e("th",Qs,a(l("status",s(d))),1),e("th",Xs,a(l("postDate",s(d))),1),e("th",Zs,a(l("channels",s(d))),1),e("th",er,a(l("actions",s(d))),1)])]),e("tbody",tr,[(n(!0),i(b,null,x(re.value,t=>(n(),i("tr",{key:t.id},[e("td",sr,[e("div",rr,a(t.name),1)]),e("td",ar,[e("div",or,a(Y(t.type)),1)]),e("td",lr,[e("div",dr,a(Ue(t.productId)),1)]),e("td",nr,[Se(t)?(n(),i("select",{key:0,value:t.status,onChange:c=>Pe(t,c.target.value),class:pe(["text-xs rounded-full px-2 py-1 border-0 focus:ring-2 focus:ring-blue-500",de(t.status)])},[e("option",ur,a(l("PENDING",s(d))),1),e("option",cr,a(l("IN_PRODUCTION",s(d))),1),e("option",gr,a(l("POSTED",s(d))),1),e("option",pr,a(l("FINISHED",s(d))),1),e("option",yr,a(l("CANCELED",s(d))),1)],42,ir)):(n(),i("span",{key:1,class:pe(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",de(t.status)])},a(l(t.status,s(d))),3))]),e("td",br,[e("div",xr,a(Ve(t.postDate)),1)]),e("td",hr,[e("div",mr,[(n(!0),i(b,null,x(t.channels,c=>(n(),i("span",{key:c.id,class:"inline-flex px-2 py-1 text-xs bg-gray-100 dark:bg-gray-600 text-gray-800 dark:text-gray-200 rounded"},a(c.name),1))),128))])]),e("td",fr,[e("div",vr,[["POSTED","FINISHED"].includes(t.status)?(n(),i("button",{key:0,onClick:c=>Me(t),class:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:l("updateMetrics",s(d))},[g(s(Ye),{class:"w-4 h-4"})],8,_r)):_("",!0),ae(t)?(n(),i("button",{key:1,onClick:c=>Ee(t),class:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300"},[g(s(Je),{class:"w-4 h-4"})],8,kr)):_("",!0),ae(t)?(n(),i("button",{key:2,onClick:c=>Te(t),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"},[g(s(Ke),{class:"w-4 h-4"})],8,wr)):_("",!0)])])]))),128))])])])),!s(te)&&re.value.length===0?(n(),i("div",Cr,[g(s(Qe),{class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e("h3",Dr,a(l("noContentFound",s(d))),1),e("p",Ir,a(l("createFirstContent",s(d))),1),e("button",{onClick:o[18]||(o[18]=t=>P.value=!0),class:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"},[g(s(X),{class:"w-4 h-4 mr-2"}),z(" "+a(l("newContent",s(d))),1)])])):_("",!0),(n(),E(ce,{to:"body"},[$.value&&D.value?(n(),i("div",Sr,[e("div",Nr,[e("div",Er,[e("h3",Tr,a(l("updateMetrics",s(d)))+" - "+a(D.value.name),1),e("div",Mr,[(n(!0),i(b,null,x(D.value.channels,t=>(n(),i("div",{key:t.id,class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4"},[e("h4",Ar,a(t.name)+" "+a(l("metrics",s(d))),1),e("div",Pr,[e("div",null,[e("label",$r,a(l("likes",s(d))),1),e("input",{type:"number",min:"0",value:m.value[t.id]?.likes||0,onInput:c=>A(t.id,"likes",parseInt(c.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,Ur)]),e("div",null,[e("label",Vr,a(l("comments",s(d))),1),e("input",{type:"number",min:"0",value:m.value[t.id]?.comments||0,onInput:c=>A(t.id,"comments",parseInt(c.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,Or)]),e("div",null,[e("label",Fr,a(l("shares",s(d))),1),e("input",{type:"number",min:"0",value:m.value[t.id]?.shares||0,onInput:c=>A(t.id,"shares",parseInt(c.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,jr)]),e("div",null,[e("label",Lr,a(l("siteVisits",s(d))),1),e("input",{type:"number",min:"0",value:m.value[t.id]?.siteVisits||0,onInput:c=>A(t.id,"siteVisits",parseInt(c.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,zr)]),e("div",null,[e("label",qr,a(l("newAccounts",s(d))),1),e("input",{type:"number",min:"0",value:m.value[t.id]?.newAccounts||0,onInput:c=>A(t.id,"newAccounts",parseInt(c.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,Br)]),e("div",null,[e("label",Rr,a(l("postClicks",s(d))),1),e("input",{type:"number",min:"0",value:m.value[t.id]?.postClicks||0,onInput:c=>A(t.id,"postClicks",parseInt(c.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,Gr)])])]))),128))]),e("div",Hr,[e("button",{onClick:Ae,disabled:S.value,class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center space-x-2"},[S.value?(n(),E(s(Z),{key:0,class:"h-4 w-4 animate-spin"})):_("",!0),e("span",null,a(S.value?l("saving",s(d)):l("save",s(d))),1)],8,Yr),e("button",{onClick:$e,disabled:S.value,class:"px-4 py-2 bg-gray-300 hover:bg-gray-400 disabled:bg-gray-200 disabled:cursor-not-allowed text-gray-700 rounded-lg transition-colors"},a(l("cancel",s(d))),9,Wr)])])])])):_("",!0)]))]))}};export{aa as default};
