import{B,y as L,x as F,a as c,b as t,t as a,u as e,d as n,e as U,p as m,j as M,G as S,g,v as D,z as k,q as u,s as h,f as $,o as l}from"./index-C7JZJEmc.js";import{u as j}from"./useData-C7dNnzw4.js";import{_ as G}from"./SkeletonLoader-CEmze3k9.js";import{B as O}from"./box-B3WGF202.js";import"./userService-HYSguwDL.js";const q={class:"space-y-6"},z={class:"flex justify-between items-center"},E={class:"text-2xl font-bold text-gray-900 dark:text-white"},H=["disabled"],K={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"},R={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},J={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4"},Q={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},W={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},X={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Y={value:""},Z=["value"],tt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},et={value:""},at=["value"],st={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},rt={value:""},ot={value:"PAID"},dt={value:"ORGANIC"},nt={key:0},it={key:1},ct={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"},lt={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},pt={class:"overflow-x-auto"},xt={class:"w-full"},gt={class:"bg-gray-50 dark:bg-gray-700"},yt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},ut={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},ht={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},ft={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},_t={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},mt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},kt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},bt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},wt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},vt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Dt={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Ct={class:"px-6 py-4 whitespace-nowrap"},Tt={class:"text-sm font-medium text-gray-900 dark:text-white"},It={class:"text-sm text-gray-500 dark:text-gray-400"},Vt={class:"px-6 py-4"},Nt={class:"flex flex-wrap gap-1"},Pt={class:"px-6 py-4 whitespace-nowrap"},At={class:"flex items-center space-x-2"},Bt={class:"text-sm text-gray-900 dark:text-white"},Lt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Ft={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Ut={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Mt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},St={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},$t={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},jt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Gt={key:0},Ot={colspan:"10",class:"px-6 py-8 text-center"},qt={class:"text-gray-500 dark:text-gray-400"},Qt={__name:"Performance",setup(zt){const{language:o}=U(),{products:C,channels:T,performanceData:f,loading:_,fetchPerformanceData:I,fetchProducts:V,fetchChannels:N}=j(),d=B({startDate:"",endDate:"",channel:"",productId:"",trafficType:""}),b=r=>!r||/^\d{4}-\d{2}-\d{2}$/.test(r)?r:new Date(r).toISOString().split("T")[0],w=L(()=>!f.value||!Array.isArray(f.value)?[]:f.value.filter(i=>{if(i.postDate){const s=new Date(i.postDate),y=new Date(d.startDate),v=new Date(d.endDate);if(v.setHours(23,59,59,999),s<y||s>v)return!1}return!(d.channel&&!i.channels?.includes(d.channel))})),p=async()=>{const r={};d.startDate&&(r.startDate=b(d.startDate)),d.endDate&&(r.endDate=b(d.endDate)),d.channel&&d.channel.trim()!==""&&(r.channel=d.channel.trim()),d.productId&&d.productId.trim()!==""&&(r.productId=d.productId.trim()),d.trafficType&&d.trafficType.trim()!==""&&(r.trafficType=d.trafficType.trim()),await I(r)};F(async()=>{await Promise.all([V(),N()]),await p()});const x=r=>typeof r!="number"?"0":r>=1e6?(r/1e6).toFixed(1)+"M":r>=1e3?(r/1e3).toFixed(1)+"K":r.toLocaleString(),P=r=>r?typeof r=="string"?new Date(r).toLocaleDateString():r.toLocaleDateString():"N/A",A=r=>{if(!r)return"N/A";const i=`contentTypes.${r.toLowerCase()}`,s=n(i,o.value);return s!==i?s:r};return(r,i)=>(l(),c("div",q,[t("div",z,[t("h2",E,a(e(n)("performance",e(o))),1),t("button",{onClick:p,disabled:e(_).performance,class:"flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors"},[m(e(S),{class:"w-4 h-4 mr-2"}),M(" "+a(e(_).performance?e(n)("loading",e(o)):e(n)("refresh",e(o))),1)],8,H)]),t("div",K,[t("h3",R,a(e(n)("filters",e(o))),1),t("div",J,[t("div",null,[t("label",Q,a(e(n)("startDate",e(o))),1),g(t("input",{type:"date","onUpdate:modelValue":i[0]||(i[0]=s=>d.startDate=s),onChange:p,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,544),[[D,d.startDate]])]),t("div",null,[t("label",W,a(e(n)("endDate",e(o))),1),g(t("input",{type:"date","onUpdate:modelValue":i[1]||(i[1]=s=>d.endDate=s),onChange:p,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,544),[[D,d.endDate]])]),t("div",null,[t("label",X,a(e(n)("channel",e(o))),1),g(t("select",{"onUpdate:modelValue":i[2]||(i[2]=s=>d.channel=s),onChange:p,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[t("option",Y,a(e(n)("allChannels",e(o))),1),(l(!0),c(u,null,h(e(T),s=>(l(),c("option",{key:s.id,value:s.name},a(s.name),9,Z))),128))],544),[[k,d.channel]])]),t("div",null,[t("label",tt,a(e(n)("product",e(o))),1),g(t("select",{"onUpdate:modelValue":i[3]||(i[3]=s=>d.productId=s),onChange:p,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[t("option",et,a(e(n)("allProducts",e(o))),1),(l(!0),c(u,null,h(e(C),s=>(l(),c("option",{key:s.id,value:s.id},a(s.name),9,at))),128))],544),[[k,d.productId]])]),t("div",null,[t("label",st,a(e(n)("trafficType",e(o))),1),g(t("select",{"onUpdate:modelValue":i[4]||(i[4]=s=>d.trafficType=s),onChange:p,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[t("option",rt,a(e(n)("allTrafficTypes",e(o))),1),t("option",ot,a(e(n)("paid",e(o))),1),t("option",dt,a(e(n)("organic",e(o))),1)],544),[[k,d.trafficType]])])])]),e(_).performance?(l(),c("div",nt,[m(G,{type:"performance-table"})])):(l(),c("div",it,[t("div",ct,[t("h3",lt,a(e(n)("contentPerformance",e(o))),1),t("div",pt,[t("table",xt,[t("thead",gt,[t("tr",null,[t("th",yt,a(e(n)("contentName",e(o))),1),t("th",ut,a(e(n)("channels",e(o))),1),t("th",ht,a(e(n)("product",e(o))),1),t("th",ft,a(e(n)("likes",e(o))),1),t("th",_t,a(e(n)("comments",e(o))),1),t("th",mt,a(e(n)("shares",e(o))),1),t("th",kt,a(e(n)("clicks",e(o))),1),t("th",bt,a(e(n)("siteVisits",e(o))),1),t("th",wt,a(e(n)("newAccounts",e(o))),1),t("th",vt,a(e(n)("postDate",e(o))),1)])]),t("tbody",Dt,[(l(!0),c(u,null,h(w.value,s=>(l(),c("tr",{key:s.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[t("td",Ct,[t("div",Tt,a(s.name),1),t("div",It,a(A(s.type)),1)]),t("td",Vt,[t("div",Nt,[(l(!0),c(u,null,h(s.channels,y=>(l(),c("span",{key:y,class:"inline-block px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded"},a(y),1))),128))])]),t("td",Pt,[t("div",At,[m(e(O),{class:"w-6 h-6 text-blue-500 dark:text-blue-400"}),t("span",Bt,a(s.productName),1)])]),t("td",Lt,a(x(s.metrics.likes)),1),t("td",Ft,a(x(s.metrics.comments)),1),t("td",Ut,a(x(s.metrics.shares)),1),t("td",Mt,a(x(s.metrics.clicks)),1),t("td",St,a(x(s.metrics.siteVisits)),1),t("td",$t,a(x(s.metrics.newAccounts)),1),t("td",jt,a(P(s.postDate)),1)]))),128)),w.value.length===0?(l(),c("tr",Gt,[t("td",Ot,[t("p",qt,a(e(n)("noPerformanceData",e(o))),1)])])):$("",!0)])])])])]))]))}};export{Qt as default};
