import{c as rt,r as p,A as J,a as c,o as i,b as e,p as g,u as s,t as o,d as j,e as Ce,F as De,h as M,z as lt,l as nt,x as dt,k as it,y as se,E as ct,f as m,j as ae,n as ge,g as _,B as V,q as f,s as k,w as ut,v as oe,T as _e,D as gt,G as pt,H as yt,R as mt}from"./index-DSC5aajj.js";import{i as bt,c as ht,C as pe,a as xt,_ as vt,E as ft}from"./index-TZcktg30.js";import{u as _t}from"./useData-X35BpfxY.js";import{_ as y}from"./SkeletonLoader-CIXQH23B.js";import{a as kt,T as Se}from"./triangle-alert-5dX33MnO.js";import{L as ye}from"./loader-circle-CYsQVaGS.js";import{P as ke}from"./plus-J_RR_41C.js";import{A as we}from"./arrow-right-DoO7dDgM.js";import{B as wt}from"./box-DmouWDwb.js";import"./userService-DmCT3zp9.js";/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=rt("circle-arrow-right",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}],["path",{d:"M8 12h8",key:"1wcyev"}]]),Dt={class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50"},St={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4 transform transition-all"},It={class:"p-6"},Et={class:"flex items-center mb-4"},Nt={class:"flex-shrink-0 w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center mr-3"},Pt={class:"text-lg font-medium text-gray-900 dark:text-white"},Tt={class:"mb-6"},At={class:"text-gray-600 dark:text-gray-400"},$t={class:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600"},Mt={class:"flex items-center"},Ot={class:"flex-1 min-w-0"},Ft={class:"text-sm font-medium text-gray-900 dark:text-white truncate block"},Ut={class:"text-xs text-gray-500 dark:text-gray-400"},Vt={class:"flex justify-end space-x-3"},jt=["disabled"],Lt={__name:"DeleteContentModal",props:{content:{type:Object,required:!0}},emits:["close","delete"],setup(Q,{emit:n}){const b=Q,Y=n,{language:h}=Ce(),C=p(!1);function K(w){if(!w)return"N/A";const S=`contentTypes.${w.toLowerCase()}`,I=j(S,h.value);return I!==S?I:w}const D=async()=>{if(!(!b.content||C.value)){C.value=!0;try{Y("delete",b.content.id)}catch(w){console.error("Error deleting content:",w),C.value=!1}}};return J(()=>b.content,w=>{w||(C.value=!1)}),(w,S)=>(i(),c("div",Dt,[e("div",St,[e("div",It,[e("div",Et,[e("div",Nt,[g(s(kt),{class:"w-5 h-5 text-red-600 dark:text-red-400"})]),e("div",null,[e("h3",Pt,o(s(j)("confirmDeletion",s(h))),1)])]),e("div",Tt,[e("p",At,o(s(j)("confirmDeleteContent",s(h))),1),e("div",$t,[e("div",Mt,[g(s(De),{class:"w-4 h-4 text-gray-500 dark:text-gray-400 mr-2 flex-shrink-0"}),e("div",Ot,[e("span",Ft,o(Q.content?.name),1),e("span",Ut,o(K(Q.content?.type)),1)])])])]),e("div",Vt,[e("button",{type:"button",onClick:S[0]||(S[0]=I=>w.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"},o(s(j)("cancel",s(h))),1),e("button",{type:"button",onClick:D,disabled:C.value,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2"},[C.value?(i(),M(s(ye),{key:0,class:"w-4 h-4 animate-spin"})):(i(),M(s(Se),{key:1,class:"w-4 h-4"})),e("span",null,o(C.value?s(j)("deleting",s(h)):s(j)("delete",s(h))),1)],8,jt)])])])]))}},Rt={class:"space-y-6"},zt={class:"flex justify-between items-center"},Bt={class:"text-2xl font-bold text-gray-900 dark:text-white"},Gt={key:0},Ht={class:"flex space-x-3"},qt=["disabled"],Jt={key:0,class:"ml-1 text-xs"},Qt={class:"flex space-x-4"},Yt={value:""},Kt=["value"],Wt=["disabled"],Xt={value:""},Zt={key:0,disabled:""},es=["value"],ts=["disabled"],ss={value:""},as={key:0,disabled:""},os=["value"],rs={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[9999] p-4"},ls={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[calc(100vh-2rem)] overflow-y-auto"},ns={class:"p-6"},ds={class:"flex items-center mb-4"},is={class:"flex-shrink-0 w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/20 flex items-center justify-center mr-3"},cs={class:"text-lg font-medium text-gray-900 dark:text-white"},us={class:"mb-6"},gs={class:"text-gray-600 dark:text-gray-400 mb-4"},ps={key:0,class:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600 mb-4"},ys={class:"flex items-center"},ms={class:"min-w-0 flex-1"},bs={class:"text-sm font-medium text-gray-900 dark:text-white block truncate"},hs={class:"text-xs text-gray-500 dark:text-gray-400"},xs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},vs=["disabled"],fs={value:null},_s=["value"],ks={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ws={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Cs=["disabled"],Ds={value:""},Ss=["value"],Is={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Es=["disabled"],Ns={value:""},Ps=["value"],Ts={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},As={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},$s=["disabled"],Ms={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Os=["disabled"],Fs=["value"],Us={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Vs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},js=["disabled"],Ls={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Rs=["disabled"],zs={key:1},Bs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Gs=["disabled","placeholder"],Hs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},qs={class:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-32 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-lg p-3"},Js=["id","value","disabled"],Qs=["for"],Ys={key:0,class:"text-xs text-red-500 mt-1"},Ks={class:"flex flex-col sm:flex-row gap-3 sm:justify-end pt-4 border-t border-gray-200 dark:border-gray-600"},Ws=["disabled"],Xs=["disabled"],Zs={key:0,class:"space-y-6"},ea={class:"overflow-x-auto"},ta={class:"w-full border border-gray-200 dark:border-gray-700 rounded-lg"},sa={class:"bg-gray-50 dark:bg-gray-700"},aa={class:"px-6 py-3 text-left"},oa={class:"px-6 py-3 text-left"},ra={class:"px-6 py-3 text-left"},la={class:"px-6 py-3 text-left"},na={class:"px-6 py-3 text-left"},da={class:"px-6 py-3 text-left"},ia={class:"px-6 py-3 text-right"},ca={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ua={class:"px-6 py-4"},ga={class:"px-6 py-4"},pa={class:"px-6 py-4"},ya={class:"px-6 py-4"},ma={class:"px-6 py-4"},ba={class:"px-6 py-4"},ha={class:"flex flex-wrap gap-1"},xa={class:"px-6 py-4"},va={class:"flex items-center justify-end space-x-2"},fa={key:1,class:"overflow-x-auto"},_a={class:"w-full border border-gray-200 dark:border-gray-700 rounded-lg"},ka={class:"bg-gray-50 dark:bg-gray-700"},wa={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Ca={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Da={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Sa={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Ia={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Ea={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Na={class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Pa={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Ta={class:"px-6 py-4 whitespace-nowrap"},Aa={class:"text-xs font-mono text-gray-500 dark:text-gray-400"},$a={class:"px-6 py-4"},Ma={class:"text-sm font-medium text-gray-900 dark:text-white"},Oa={class:"px-6 py-4 whitespace-nowrap"},Fa={class:"text-sm text-gray-500 dark:text-gray-400"},Ua={class:"px-6 py-4 whitespace-nowrap"},Va={class:"text-sm text-gray-500 dark:text-gray-400"},ja={class:"px-6 py-4 whitespace-nowrap"},La=["value","onChange"],Ra={value:"PENDING"},za={value:"IN_PRODUCTION"},Ba={value:"POSTED"},Ga={value:"FINISHED"},Ha={value:"CANCELED"},qa={class:"px-6 py-4 whitespace-nowrap"},Ja={class:"text-sm text-gray-500 dark:text-gray-400"},Qa={class:"px-6 py-4"},Ya={class:"flex flex-wrap gap-1"},Ka={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Wa={class:"flex items-center justify-end space-x-2"},Xa=["onClick","title"],Za=["onClick"],eo={key:0,class:"flex items-center justify-between mt-4 flex-wrap gap-3"},to={class:"text-sm text-gray-600 dark:text-gray-400"},so={class:"flex items-center space-x-2"},ao=["disabled"],oo=["disabled"],ro={key:2,class:"text-center py-12"},lo={class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},no={class:"text-gray-600 dark:text-gray-400 mb-4"},io={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-[9999]"},co={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[calc(100vh-2rem)] overflow-y-auto"},uo={class:"p-6"},go={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},po={class:"space-y-6"},yo={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},mo={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4"},bo={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ho=["value","onInput"],xo={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},vo=["value","onInput"],fo={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},_o=["value","onInput"],ko={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},wo=["value","onInput"],Co={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Do=["value","onInput"],So={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Io=["value","onInput"],Eo={class:"flex space-x-3 mt-6"},No=["disabled"],Po=["disabled"],z="contentManagerFilters",Ro={__name:"ContentManager",setup(Q){const{language:n}=Ce(),{currentUser:b}=nt(),{content:Y,products:h,users:C,drafts:K,channels:D,loadingChannels:w,loadingContent:S,fetchContent:I,fetchProducts:Ie,fetchUsers:Ee,fetchDrafts:Ne,fetchChannels:Pe,createContent:Te,updateContent:Ae,updateContentStatus:$e,updateContentChannelMetrics:Me,deleteContent:Oe,transformDraftToContent:Fe}=_t(),l=a=>j(a,n.value),W=p(!0),X=p(!1),Z=p(!1),B=p(!1),re=p(!1),O=p(null),E=p(null),P=p(null),le=p(null),T=p(""),A=p(""),$=p(""),N=p(0),Ue=p(15),ee=p(0),G=p(1),ne=p(!1),x=p(!1),F=p(!1),v=p({}),me=it(),Ve=()=>{const a={filterStatus:T.value,filterChannel:A.value,filterProduct:$.value,timestamp:Date.now()};a.filterStatus||a.filterChannel||a.filterProduct?(localStorage.setItem(z,JSON.stringify(a)),console.log("ðŸ“ Filtros salvos no localStorage:",a)):(localStorage.removeItem(z),console.log("ðŸ—‘ï¸ Filtros vazios, removidos do localStorage"))},je=()=>{try{const a=localStorage.getItem(z);if(console.log("ðŸ” Procurando filtros no localStorage..."),console.log("ðŸ“¦ Dados encontrados:",a),a){const r=JSON.parse(a);return console.log("ðŸ“‚ Filtros parseados:",r),T.value=r.filterStatus||"",A.value=r.filterChannel||"",$.value=r.filterProduct||"",console.log("âœ… Filtros aplicados:"),console.log("  - Status:",T.value),console.log("  - Channel:",A.value),console.log("  - Product:",$.value),localStorage.removeItem(z),console.log("ðŸ—‘ï¸ Filtros removidos do localStorage apÃ³s carregamento"),!0}else console.log("ðŸš« Nenhum filtro encontrado no localStorage")}catch(a){console.error("âŒ Erro ao carregar filtros do localStorage:",a)}return!1},Le=()=>{localStorage.removeItem(z)},d=lt({name:"",type:"",content:"",product:"",creator:b.value?.id||"",postDate:"",producer:b.value?.id||"",status:"PENDING",channels:[],productionStartDate:"",productionEndDate:"",metaAdsId:""});dt(async()=>{const a=me.currentRoute.value.query,r=a.from==="preview";localStorage.getItem(z);const t=bt();console.log("ðŸš€ ContentManager montado"),console.log("ðŸ“ Query params:",a),console.log("ï¿½ Query params stringified:",JSON.stringify(a)),console.log("ðŸ“ from value:",a.from),console.log("ðŸ“ from type:",typeof a.from),console.log("ï¿½ðŸ” Vindo do preview?",r);let u=!1;r||t?(u=je(),ht(),console.log("ðŸ”„ Vindo do preview (detectado), filtros carregados:",u)):console.log("âšª NÃ£o vindo do preview, nÃ£o carregando filtros"),await Promise.all([Ie(),Ee(),Ne(),Pe()]),await te(),W.value=!1});const H=se(()=>!K.value||!b.value?[]:K.value.filter(a=>a.status==="APPROVED")),be=se(()=>!Y.value||!b.value?[]:Y.value),Re=se(()=>be.value),ze=se(()=>N.value+1);J([T,A,$],async([a,r,t],[u,U,q])=>{console.log("ðŸ”„ Filtros alterados:"),console.log("  - Status:",u,"->",a),console.log("  - Channel:",U,"->",r),console.log("  - Product:",q,"->",t),N.value=0,await te(),Ve(),console.log("ï¿½ Filtros salvos automaticamente no localStorage")},{immediate:!1}),J(()=>d.status,a=>{a!=="IN_PRODUCTION"&&(d.productionStartDate="",d.productionEndDate=""),a!=="POSTED"&&(d.metaAdsId="")});const te=async()=>{const a={page:N.value,size:Ue.value};T.value&&(a.status=T.value),A.value&&(a.channelId=A.value),$.value&&(a.productId=$.value);const r=await I(a);r&&typeof r=="object"&&(typeof r.totalPages=="number"&&(G.value=r.totalPages),typeof r.totalElements=="number"&&(ee.value=r.totalElements))},Be=async()=>{N.value!==0&&(N.value-=1,await te())},Ge=async()=>{N.value>=G.value-1||(N.value+=1,await te())},He=a=>b.value?.adminType==="ADMIN"||a.creatorId===b.value?.id||a.producerId===b.value?.id,qe=a=>b.value?.adminType==="ADMIN"||a.producerId===b.value?.id,Je=async()=>{console.log("ðŸ”¥ handleSubmit chamado! Iniciando processo de salvamento..."),console.log("ðŸ“ Form Data atual:",JSON.stringify(d,null,2)),console.log("âœï¸ Editing Content:",O.value),ne.value=!0;try{const a={name:d.name,type:d.type,content:d.content,productId:d.product||null,producerId:d.producer||null,status:d.status,postDate:R(d.postDate),productionStartDate:R(d.productionStartDate)||null,productionEndDate:R(d.productionEndDate)||null,metaAdsId:d.metaAdsId||null,channelIds:d.channels};console.log("=== DADOS ENVIADOS AO BACKEND ==="),console.log("OperaÃ§Ã£o:",O.value?"UPDATE":"CREATE"),console.log("Content ID:",O.value?.id||"N/A"),console.log("Content Data:",JSON.stringify(a,null,2)),console.log("====================================="),O.value?await Ae(O.value.id,a):await Te(a),de(),await I()}catch(a){console.error("Error saving content:",a)}finally{ne.value=!1}},he=async()=>{if(E.value){x.value=!0;try{const a={status:d.status,channelIds:d.channels,postDate:R(d.postDate),productId:d.product||null,producerId:d.producer||null};d.status==="IN_PRODUCTION"&&(d.productionStartDate&&(a.productionStartDate=R(d.productionStartDate)),d.productionEndDate&&(a.productionEndDate=R(d.productionEndDate))),d.status==="POSTED"&&d.metaAdsId&&(a.metaAdsId=d.metaAdsId),await Fe(E.value.id,a),xe(),await I()}catch(a){console.error("Error transforming draft:",a)}finally{x.value=!1}}},de=()=>{Object.assign(d,{name:"",type:"",content:"",product:"",creator:b.value?.id||"",postDate:"",producer:b.value?.id||"",status:"PENDING",channels:[],productionStartDate:"",productionEndDate:"",metaAdsId:""}),X.value=!1,O.value=null},xe=()=>{Z.value=!1,E.value=null,de()},Qe=async a=>{le.value=a,re.value=!0},ve=()=>{re.value=!1,le.value=null},Ye=async a=>{try{await Oe(a),await I(),ve()}catch(r){console.error("Error deleting content:",r)}},Ke=a=>{P.value=a;const r={};a.channels.forEach(t=>{const u=a.metrics?.channelMetrics?.find(U=>U.channelId===t.id);r[t.id]=u||{likes:0,comments:0,shares:0,postClicks:0,siteVisits:0,newAccounts:0}}),v.value=r,B.value=!0},L=(a,r,t)=>{v.value[a]||(v.value[a]={}),v.value[a][r]=t},We=async()=>{if(P.value){F.value=!0;try{if(Object.keys(v.value).length===0){F.value=!1;return}const a=Object.entries(v.value).map(([t,u])=>({channelId:t.toString(),likes:u.likes||0,comments:u.comments||0,shares:u.shares||0,siteVisits:u.siteVisits||0,newAccounts:u.newAccounts||0,postClicks:u.postClicks||0})),r=await Me(P.value.id,a);r.success?(B.value=!1,P.value=null,v.value={},await I()):alert(`Erro ao atualizar mÃ©tricas: ${r.error}`)}catch(a){console.error("Error updating metrics:",a);const r=a.response?.data?.message||a.message||"Erro ao atualizar mÃ©tricas";alert(`Erro ao atualizar mÃ©tricas: ${r}`)}finally{F.value=!1}}},Xe=async(a,r)=>{try{const t=await $e(a.id,r);t.success||(console.error("Error updating status:",t.error),alert(`Erro ao atualizar status: ${t.error}`))}catch(t){console.error("Error updating status:",t),alert("Erro ao atualizar status do conteÃºdo")}},Ze=()=>{B.value=!1,P.value=null};J(Z,a=>{a?document.body.style.overflow="hidden":document.body.style.overflow=""}),J(B,a=>{a?document.body.style.overflow="hidden":document.body.style.overflow=""});const et=a=>h.value?.find(t=>t.id===a)?.name||"",ie=a=>{if(!a)return"N/A";const r=`contentTypes.${a.toLowerCase()}`,t=l(r,n.value);return t!==r?t:a},fe=a=>{const r={PENDING:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",IN_PRODUCTION:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",POSTED:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",FINISHED:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",CANCELED:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"};return r[a]||r.PENDING},tt=a=>{if(!a)return"";let r;if(Array.isArray(a)){const[q,ce,ue,at=0,ot=0]=a;r=new Date(q,ce-1,ue,at,ot)}else r=new Date(a);const t=n.value==="pt"?"pt-PT":"en-US",u=r.toLocaleDateString(t),U=r.toLocaleTimeString(t,{hour:"2-digit",minute:"2-digit"});return`${u} ${U}`},R=a=>{if(!a)return;const r=new Date(a),t=r.getFullYear(),u=String(r.getMonth()+1).padStart(2,"0"),U=String(r.getDate()).padStart(2,"0"),q=String(r.getHours()).padStart(2,"0"),ce=String(r.getMinutes()).padStart(2,"0"),ue=String(r.getSeconds()).padStart(2,"0");return`${t}-${u}-${U}T${q}:${ce}:${ue}`},st=()=>{console.log("ðŸ‘ï¸ Navegando para preview (filtros jÃ¡ salvos automaticamente)")};return ct(()=>{me.currentRoute.value.name!=="ContentPreview"&&(Le(),console.log("ðŸšª Saindo da pÃ¡gina (nÃ£o para preview), filtros removidos"))}),(a,r)=>(i(),c(f,null,[e("div",Rt,[e("div",zt,[e("h2",Bt,[ae(o(l("content"))+" ",1),ee.value?(i(),c("span",Gt,"("+o(ee.value)+")",1)):m("",!0)]),e("div",Ht,[e("button",{onClick:r[0]||(r[0]=t=>H.value.length>0&&(Z.value=!0)),disabled:H.value.length===0,class:ge(["flex items-center px-4 py-2 rounded-lg transition-colors flex-shrink-0",H.value.length===0?"bg-green-400 cursor-not-allowed opacity-60 text-white":"bg-green-600 hover:bg-green-700 text-white"]),title:"Transformar rascunhos aprovados em conteÃºdo"},[g(s(Ct),{class:"w-4 h-4 mr-2"}),ae(" "+o(l("transformDraft")),1),H.value.length===0?(i(),c("span",Jt,"(0)")):m("",!0)],10,qt),e("button",{onClick:r[1]||(r[1]=t=>X.value=!0),class:"flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"},[g(s(ke),{class:"w-4 h-4 mr-2"}),ae(" "+o(l("newContent")),1)])])]),e("div",Qt,[_(e("select",{"onUpdate:modelValue":r[2]||(r[2]=t=>T.value=t),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[e("option",Yt,o(l("allStatuses")),1),(i(!0),c(f,null,k(s(pe),t=>(i(),c("option",{key:t,value:t},o(l(t)),9,Kt))),128))],512),[[V,T.value]]),_(e("select",{"onUpdate:modelValue":r[3]||(r[3]=t=>A.value=t),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",disabled:!s(D)||s(D).length===0},[e("option",Xt,o(l("allChannels")),1),!s(D)||s(D).length===0?(i(),c("option",Zt,o(s(w)?"Carregando canais...":"Nenhum canal disponÃ­vel"),1)):m("",!0),(i(!0),c(f,null,k(s(D),t=>(i(),c("option",{key:t.id,value:t.id},o(t.name),9,es))),128))],8,Wt),[[V,A.value]]),_(e("select",{"onUpdate:modelValue":r[4]||(r[4]=t=>$.value=t),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",disabled:!s(h)||s(h).length===0},[e("option",ss,o(l("allProducts")),1),!s(h)||s(h).length===0?(i(),c("option",as,o(l("noProductsFound",s(n))),1)):m("",!0),(i(!0),c(f,null,k(s(h),t=>(i(),c("option",{key:t.id,value:t.id},o(t.name),9,os))),128))],8,ts),[[V,$.value]])]),(i(),M(_e,{to:"body"},[Z.value?(i(),c("div",rs,[e("div",ls,[e("div",ns,[e("div",ds,[e("div",is,[g(s(we),{class:"w-5 h-5 text-green-600 dark:text-green-400"})]),e("div",null,[e("h3",cs,o(l("transformDraftToContent",s(n))),1)])]),e("div",us,[e("p",gs,o(l("transformDraftDescription",s(n))),1),E.value?(i(),c("div",ps,[e("div",ys,[g(s(De),{class:"w-4 h-4 text-gray-500 dark:text-gray-400 mr-2 flex-shrink-0"}),e("div",ms,[e("span",bs,o(E.value.name),1),e("span",hs,o(ie(E.value.type)),1)])])])):m("",!0),e("form",{onSubmit:ut(he,["prevent"]),class:"space-y-4"},[e("div",null,[e("label",xs,o(l("selectDraft",s(n)))+" * ",1),_(e("select",{"onUpdate:modelValue":r[5]||(r[5]=t=>E.value=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:"",disabled:x.value},[e("option",fs,o(l("selectApprovedDraft",s(n))),1),(i(!0),c(f,null,k(H.value,t=>(i(),c("option",{key:t.id,value:t},o(t.name)+" - "+o(ie(t.type)),9,_s))),128))],8,vs),[[V,E.value]])]),e("div",ks,[e("div",null,[e("label",ws,o(l("product",s(n))),1),_(e("select",{"onUpdate:modelValue":r[6]||(r[6]=t=>d.product=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:x.value},[e("option",Ds,o(l("selectProduct",s(n))),1),(i(!0),c(f,null,k(s(h),t=>(i(),c("option",{key:t.id,value:t.id},o(t.name),9,Ss))),128))],8,Cs),[[V,d.product]])]),e("div",null,[e("label",Is,o(l("producer",s(n))),1),_(e("select",{"onUpdate:modelValue":r[7]||(r[7]=t=>d.producer=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:x.value},[e("option",Ns,o(l("selectProducer",s(n))),1),(i(!0),c(f,null,k(s(C),t=>(i(),c("option",{key:t.id,value:t.id},o(t.name),9,Ps))),128))],8,Es),[[V,d.producer]])])]),e("div",Ts,[e("div",null,[e("label",As,o(l("postDate",s(n))),1),_(e("input",{type:"datetime-local","onUpdate:modelValue":r[8]||(r[8]=t=>d.postDate=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:x.value},null,8,$s),[[oe,d.postDate]])]),e("div",null,[e("label",Ms,o(l("status",s(n))),1),_(e("select",{"onUpdate:modelValue":r[9]||(r[9]=t=>d.status=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:x.value},[(i(!0),c(f,null,k(s(pe),t=>(i(),c("option",{key:t,value:t},o(l(t,s(n))),9,Fs))),128))],8,Os),[[V,d.status]])])]),d.status==="IN_PRODUCTION"?(i(),c("div",Us,[e("div",null,[e("label",Vs,o(l("productionStartDate",s(n))),1),_(e("input",{"onUpdate:modelValue":r[10]||(r[10]=t=>d.productionStartDate=t),type:"datetime-local",disabled:x.value,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white disabled:opacity-50"},null,8,js),[[oe,d.productionStartDate]])]),e("div",null,[e("label",Ls,o(l("productionEndDate",s(n))),1),_(e("input",{"onUpdate:modelValue":r[11]||(r[11]=t=>d.productionEndDate=t),type:"datetime-local",disabled:x.value,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white disabled:opacity-50"},null,8,Rs),[[oe,d.productionEndDate]])])])):m("",!0),d.status==="POSTED"?(i(),c("div",zs,[e("label",Bs,o(l("metaAdsId",s(n))),1),_(e("input",{"onUpdate:modelValue":r[12]||(r[12]=t=>d.metaAdsId=t),type:"text",disabled:x.value,placeholder:l("enterMetaAdsId",s(n)),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white disabled:opacity-50"},null,8,Gs),[[oe,d.metaAdsId]])])):m("",!0),e("div",null,[e("label",Hs,o(l("channels",s(n)))+" * ",1),e("div",qs,[(i(!0),c(f,null,k(s(D),t=>(i(),c("div",{key:t.id,class:"flex items-center"},[_(e("input",{id:`transform-channel-${t.id}`,type:"checkbox",value:t.id,"onUpdate:modelValue":r[13]||(r[13]=u=>d.channels=u),disabled:x.value,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 disabled:opacity-50"},null,8,Js),[[gt,d.channels]]),e("label",{for:`transform-channel-${t.id}`,class:"ml-2 text-sm text-gray-900 dark:text-gray-300 cursor-pointer truncate"},o(t.name),9,Qs)]))),128))]),d.channels.length===0?(i(),c("p",Ys,o(l("selectAtLeastOneChannel",s(n))),1)):m("",!0)])],32)]),e("div",Ks,[e("button",{type:"button",onClick:xe,disabled:x.value,class:"w-full sm:w-auto px-6 py-2 bg-gray-200 hover:bg-gray-300 disabled:bg-gray-100 text-gray-700 dark:bg-gray-600 dark:hover:bg-gray-500 dark:disabled:bg-gray-700 dark:text-gray-300 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},o(l("cancel",s(n))),9,Ws),e("button",{onClick:he,disabled:x.value||!E.value||d.channels.length===0,class:"w-full sm:w-auto flex items-center justify-center px-6 py-2 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white rounded-lg transition-colors space-x-2 disabled:opacity-50 disabled:cursor-not-allowed"},[x.value?(i(),M(s(ye),{key:0,class:"w-4 h-4 animate-spin"})):(i(),M(s(we),{key:1,class:"w-4 h-4"})),e("span",null,o(x.value?l("transforming",s(n)):l("transformToContent",s(n))),1)],8,Xs)])])])])):m("",!0)])),g(vt,{show:X.value,"form-data":d,"editing-content":O.value,products:s(h),users:s(C),channels:s(D),"content-types":s(xt),"content-statuses":s(pe),t:l,language:s(n).value,user:s(b),"is-submitting":ne.value,onCancel:de,onSubmit:Je},null,8,["show","form-data","editing-content","products","users","channels","content-types","content-statuses","language","user","is-submitting"]),s(S)||W.value?(i(),c("div",Zs,[e("div",ea,[e("table",ta,[e("thead",sa,[e("tr",null,[e("th",aa,[g(y,{customClass:"h-4 w-16"})]),e("th",oa,[g(y,{customClass:"h-4 w-12"})]),e("th",ra,[g(y,{customClass:"h-4 w-20"})]),e("th",la,[g(y,{customClass:"h-4 w-16"})]),e("th",na,[g(y,{customClass:"h-4 w-20"})]),e("th",da,[g(y,{customClass:"h-4 w-16"})]),e("th",ia,[g(y,{customClass:"h-4 w-16"})])])]),e("tbody",ca,[(i(),c(f,null,k(6,t=>e("tr",{key:t},[e("td",ua,[g(y,{customClass:"h-4 w-32 shimmer"})]),e("td",ga,[g(y,{customClass:"h-4 w-20 shimmer"})]),e("td",pa,[g(y,{customClass:"h-4 w-24 shimmer"})]),e("td",ya,[g(y,{customClass:"h-6 w-24 rounded-full shimmer"})]),e("td",ma,[g(y,{customClass:"h-4 w-28 shimmer"})]),e("td",ba,[e("div",ha,[g(y,{customClass:"h-5 w-16 rounded-full shimmer"}),g(y,{customClass:"h-5 w-20 rounded-full shimmer"})])]),e("td",xa,[e("div",va,[g(y,{customClass:"h-8 w-8 rounded shimmer"}),g(y,{customClass:"h-8 w-8 rounded shimmer"}),g(y,{customClass:"h-8 w-8 rounded shimmer"}),g(y,{customClass:"h-8 w-8 rounded shimmer"})])])])),64))])])])])):!s(S)&&!W.value?(i(),c("div",fa,[e("table",_a,[e("thead",ka,[e("tr",null,[r[15]||(r[15]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Meta Ads ID",-1)),e("th",wa,o(l("name",s(n))),1),e("th",Ca,o(l("type",s(n))),1),e("th",Da,o(l("product",s(n))),1),e("th",Sa,o(l("status",s(n))),1),e("th",Ia,o(l("postDate",s(n))),1),e("th",Ea,o(l("channels",s(n))),1),e("th",Na,o(l("actions",s(n))),1)])]),e("tbody",Pa,[(i(!0),c(f,null,k(Re.value,t=>(i(),c("tr",{key:t.id},[e("td",Ta,[e("span",Aa,o(t.metaAdsId||"-"),1)]),e("td",$a,[e("div",Ma,o(t.name),1)]),e("td",Oa,[e("div",Fa,o(ie(t.type)),1)]),e("td",Ua,[e("div",Va,o(et(t.productId)),1)]),e("td",ja,[qe(t)?(i(),c("select",{key:0,value:t.status,onChange:u=>Xe(t,u.target.value),class:ge(["text-xs rounded-full px-2 py-1 border-0 focus:ring-2 focus:ring-blue-500",fe(t.status)])},[e("option",Ra,o(l("PENDING",s(n))),1),e("option",za,o(l("IN_PRODUCTION",s(n))),1),e("option",Ba,o(l("POSTED",s(n))),1),e("option",Ga,o(l("FINISHED",s(n))),1),e("option",Ha,o(l("CANCELED",s(n))),1)],42,La)):(i(),c("span",{key:1,class:ge(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",fe(t.status)])},o(l(t.status,s(n))),3))]),e("td",qa,[e("div",Ja,o(tt(t.postDate)),1)]),e("td",Qa,[e("div",Ya,[(i(!0),c(f,null,k(t.channels,u=>(i(),c("span",{key:u.id,class:"inline-flex px-2 py-1 text-xs bg-gray-100 dark:bg-gray-600 text-gray-800 dark:text-gray-200 rounded"},o(u.name),1))),128))])]),e("td",Ka,[e("div",Wa,[["POSTED","FINISHED"].includes(t.status)?(i(),c("button",{key:0,onClick:u=>Ke(t),class:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:l("updateMetrics",s(n))},[g(s(pt),{class:"w-4 h-4"})],8,Xa)):m("",!0),g(s(mt),{to:{name:"ContentPreview",params:{id:t.id},query:{from:"content-manager"}},onClick:st,class:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",title:l("preview",s(n))},{default:yt(()=>[g(s(ft),{class:"w-4 h-4"})]),_:2},1032,["to","title"]),He(t)?(i(),c("button",{key:1,onClick:u=>Qe(t),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"},[g(s(Se),{class:"w-4 h-4"})],8,Za)):m("",!0)])])]))),128))])]),G.value>1?(i(),c("div",eo,[e("div",to,o(l("page",s(n)))+" "+o(ze.value)+" / "+o(G.value)+" Â· "+o(ee.value)+" "+o(l("items",s(n))),1),e("div",so,[e("button",{onClick:Be,disabled:N.value===0,class:"px-3 py-1 rounded border text-sm disabled:opacity-40 disabled:cursor-not-allowed bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"},o(l("previous",s(n))),9,ao),e("button",{onClick:Ge,disabled:N.value>=G.value-1,class:"px-3 py-1 rounded border text-sm disabled:opacity-40 disabled:cursor-not-allowed bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"},o(l("next",s(n))),9,oo)])])):m("",!0)])):m("",!0),!s(S)&&!W.value&&be.value.length===0?(i(),c("div",ro,[g(s(wt),{class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e("h3",lo,o(l("noContentFound",s(n))),1),e("p",no,o(l("createFirstContent",s(n))),1),e("button",{onClick:r[14]||(r[14]=t=>X.value=!0),class:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"},[g(s(ke),{class:"w-4 h-4 mr-2"}),ae(" "+o(l("newContent",s(n))),1)])])):m("",!0),(i(),M(_e,{to:"body"},[B.value&&P.value?(i(),c("div",io,[e("div",co,[e("div",uo,[e("h3",go,o(l("updateMetrics",s(n)))+" - "+o(P.value.name),1),e("div",po,[(i(!0),c(f,null,k(P.value.channels,t=>(i(),c("div",{key:t.id,class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4"},[e("h4",yo,o(t.name)+" "+o(l("metrics",s(n))),1),e("div",mo,[e("div",null,[e("label",bo,o(l("likes",s(n))),1),e("input",{type:"number",min:"0",value:v.value[t.id]?.likes||0,onInput:u=>L(t.id,"likes",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,ho)]),e("div",null,[e("label",xo,o(l("comments",s(n))),1),e("input",{type:"number",min:"0",value:v.value[t.id]?.comments||0,onInput:u=>L(t.id,"comments",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,vo)]),e("div",null,[e("label",fo,o(l("shares",s(n))),1),e("input",{type:"number",min:"0",value:v.value[t.id]?.shares||0,onInput:u=>L(t.id,"shares",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,_o)]),e("div",null,[e("label",ko,o(l("siteVisits",s(n))),1),e("input",{type:"number",min:"0",value:v.value[t.id]?.siteVisits||0,onInput:u=>L(t.id,"siteVisits",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,wo)]),e("div",null,[e("label",Co,o(l("newAccounts",s(n))),1),e("input",{type:"number",min:"0",value:v.value[t.id]?.newAccounts||0,onInput:u=>L(t.id,"newAccounts",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,Do)]),e("div",null,[e("label",So,o(l("postClicks",s(n))),1),e("input",{type:"number",min:"0",value:v.value[t.id]?.postClicks||0,onInput:u=>L(t.id,"postClicks",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,Io)])])]))),128))]),e("div",Eo,[e("button",{onClick:We,disabled:F.value,class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center space-x-2"},[F.value?(i(),M(s(ye),{key:0,class:"h-4 w-4 animate-spin"})):m("",!0),e("span",null,o(F.value?l("saving",s(n)):l("save",s(n))),1)],8,No),e("button",{onClick:Ze,disabled:F.value,class:"px-4 py-2 bg-gray-300 hover:bg-gray-400 disabled:bg-gray-200 disabled:cursor-not-allowed text-gray-700 rounded-lg transition-colors"},o(l("cancel",s(n))),9,Po)])])])])):m("",!0)]))]),re.value?(i(),M(Lt,{key:0,content:le.value,onClose:ve,onDelete:Ye},null,8,["content"])):m("",!0)],64))}};export{Ro as default};
