import{c as dt,r as p,C as B,a as c,o as i,b as e,p as g,u as s,t as o,d as j,e as De,F as Ie,h as M,B as it,l as ct,x as ut,k as gt,y as re,E as pt,f as b,j as le,n as ne,g as h,z as N,q as _,s as k,w as yt,v as de,T as ke,D as bt,G as ft,H as mt,R as xt}from"./index-4us4u8gX.js";import{i as ht,c as vt,C as ye,a as _t,_ as kt,E as wt}from"./index-BBejXq-L.js";import{u as Ct}from"./useData-DR7hQcBS.js";import{_ as y}from"./SkeletonLoader-2gaGNWFn.js";import{a as Dt,T as Se}from"./triangle-alert-THgH8cLR.js";import{L as be}from"./loader-circle-Bb3LPLMK.js";import{P as we}from"./plus-Dr4IpE4g.js";import{A as Ce}from"./arrow-right-Bh9t5kNf.js";import{B as It}from"./box-DV4hXMAE.js";import"./userService-DVxHc81-.js";/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=dt("circle-arrow-right",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}],["path",{d:"M8 12h8",key:"1wcyev"}]]),Tt={class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50"},Et={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4 transform transition-all"},Nt={class:"p-6"},Pt={class:"flex items-center mb-4"},At={class:"flex-shrink-0 w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center mr-3"},Ot={class:"text-lg font-medium text-gray-900 dark:text-white"},$t={class:"mb-6"},Ft={class:"text-gray-600 dark:text-gray-400"},Mt={class:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600"},Ut={class:"flex items-center"},Rt={class:"flex-1 min-w-0"},Vt={class:"text-sm font-medium text-gray-900 dark:text-white truncate block"},jt={class:"text-xs text-gray-500 dark:text-gray-400"},Lt={class:"flex justify-end space-x-3"},zt=["disabled"],Gt={__name:"DeleteContentModal",props:{content:{type:Object,required:!0}},emits:["close","delete"],setup(W,{emit:n}){const f=W,X=n,{language:x}=De(),C=p(!1);function Z(w){if(!w)return"N/A";const S=`contentTypes.${w.toLowerCase()}`,T=j(S,x.value);return T!==S?T:w}const I=async()=>{if(!(!f.content||C.value)){C.value=!0;try{X("delete",f.content.id)}catch(w){console.error("Error deleting content:",w),C.value=!1}}};return B(()=>f.content,w=>{w||(C.value=!1)}),(w,S)=>(i(),c("div",Tt,[e("div",Et,[e("div",Nt,[e("div",Pt,[e("div",At,[g(s(Dt),{class:"w-5 h-5 text-red-600 dark:text-red-400"})]),e("div",null,[e("h3",Ot,o(s(j)("confirmDeletion",s(x))),1)])]),e("div",$t,[e("p",Ft,o(s(j)("confirmDeleteContent",s(x))),1),e("div",Mt,[e("div",Ut,[g(s(Ie),{class:"w-4 h-4 text-gray-500 dark:text-gray-400 mr-2 flex-shrink-0"}),e("div",Rt,[e("span",Vt,o(W.content?.name),1),e("span",jt,o(Z(W.content?.type)),1)])])])]),e("div",Lt,[e("button",{type:"button",onClick:S[0]||(S[0]=T=>w.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"},o(s(j)("cancel",s(x))),1),e("button",{type:"button",onClick:I,disabled:C.value,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2"},[C.value?(i(),M(s(be),{key:0,class:"w-4 h-4 animate-spin"})):(i(),M(s(Se),{key:1,class:"w-4 h-4"})),e("span",null,o(C.value?s(j)("deleting",s(x)):s(j)("delete",s(x))),1)],8,zt)])])])]))}},Bt={class:"space-y-6"},Ht={class:"flex justify-between items-center"},qt={class:"text-2xl font-bold text-gray-900 dark:text-white"},Jt={key:0},Qt={class:"flex space-x-3"},Yt=["disabled"],Kt={key:0,class:"ml-1 text-xs"},Wt={class:"flex space-x-4"},Xt={value:""},Zt=["value"],es=["disabled"],ts={value:""},ss={key:0,disabled:""},as=["value"],os=["disabled"],rs={value:""},ls={key:0,disabled:""},ns=["value"],ds={value:""},is={value:"PAID"},cs={value:"ORGANIC"},us={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[9999] p-4"},gs={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[calc(100vh-2rem)] overflow-y-auto"},ps={class:"p-6"},ys={class:"flex items-center mb-4"},bs={class:"flex-shrink-0 w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/20 flex items-center justify-center mr-3"},fs={class:"text-lg font-medium text-gray-900 dark:text-white"},ms={class:"mb-6"},xs={class:"text-gray-600 dark:text-gray-400 mb-4"},hs={key:0,class:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600 mb-4"},vs={class:"flex items-center"},_s={class:"min-w-0 flex-1"},ks={class:"text-sm font-medium text-gray-900 dark:text-white block truncate"},ws={class:"text-xs text-gray-500 dark:text-gray-400"},Cs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Ds=["disabled"],Is={value:null},Ss=["value"],Ts={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Es={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Ns=["disabled"],Ps={value:""},As=["value"],Os={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},$s=["disabled"],Fs={value:""},Ms=["value"],Us={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Rs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Vs=["disabled"],js={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Ls=["disabled"],zs=["value"],Gs={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Bs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Hs=["disabled"],qs={value:"ORGANIC"},Js={value:"PAID"},Qs={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ys={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Ks=["disabled"],Ws={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Xs=["disabled"],Zs={key:1},ea={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ta=["disabled","placeholder"],sa={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},aa={class:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-32 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-lg p-3"},oa=["id","value","disabled"],ra=["for"],la={key:0,class:"text-xs text-red-500 mt-1"},na={class:"flex flex-col sm:flex-row gap-3 sm:justify-end pt-4 border-t border-gray-200 dark:border-gray-600"},da=["disabled"],ia=["disabled"],ca={key:0,class:"space-y-6"},ua={class:"overflow-x-auto"},ga={class:"w-full border border-gray-200 dark:border-gray-700 rounded-lg"},pa={class:"bg-gray-50 dark:bg-gray-700"},ya={class:"px-6 py-3 text-left"},ba={class:"px-6 py-3 text-left"},fa={class:"px-6 py-3 text-left"},ma={class:"px-6 py-3 text-left"},xa={class:"px-6 py-3 text-left"},ha={class:"px-6 py-3 text-left"},va={class:"px-6 py-3 text-right"},_a={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ka={class:"px-6 py-4"},wa={class:"px-6 py-4"},Ca={class:"px-6 py-4"},Da={class:"px-6 py-4"},Ia={class:"px-6 py-4"},Sa={class:"px-6 py-4"},Ta={class:"flex flex-wrap gap-1"},Ea={class:"px-6 py-4"},Na={class:"flex items-center justify-end space-x-2"},Pa={key:1,class:"overflow-x-auto"},Aa={class:"w-full border border-gray-200 dark:border-gray-700 rounded-lg"},Oa={class:"bg-gray-50 dark:bg-gray-700"},$a={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Fa={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Ma={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Ua={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Ra={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Va={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},ja={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},La={class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},za={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Ga={class:"px-6 py-4 whitespace-nowrap"},Ba={class:"text-xs font-mono text-gray-500 dark:text-gray-400"},Ha={class:"px-6 py-4"},qa=["title"],Ja={class:"px-6 py-4 whitespace-nowrap"},Qa={class:"text-sm text-gray-500 dark:text-gray-400"},Ya={class:"px-6 py-4 whitespace-nowrap"},Ka={class:"text-sm text-gray-500 dark:text-gray-400"},Wa={class:"px-6 py-4 whitespace-nowrap"},Xa={key:1,class:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"},Za={class:"px-6 py-4 whitespace-nowrap"},eo=["value","onChange"],to={value:"PENDING"},so={value:"IN_PRODUCTION"},ao={value:"POSTED"},oo={value:"PRODUCTION_FINISHED"},ro={value:"FINISHED"},lo={value:"CANCELED"},no={class:"px-6 py-4 whitespace-nowrap"},io={class:"text-sm text-gray-500 dark:text-gray-400"},co={class:"px-6 py-4"},uo={class:"flex flex-wrap gap-1"},go={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},po={class:"flex items-center justify-end space-x-2"},yo=["onClick","title"],bo=["onClick"],fo={key:0,class:"flex items-center justify-between mt-4 flex-wrap gap-3"},mo={class:"text-sm text-gray-600 dark:text-gray-400"},xo={class:"flex items-center space-x-2"},ho=["disabled"],vo=["disabled"],_o={key:2,class:"text-center py-12"},ko={class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},wo={class:"text-gray-600 dark:text-gray-400 mb-4"},Co={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-[9999]"},Do={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[calc(100vh-2rem)] overflow-y-auto"},Io={class:"p-6"},So={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},To={class:"space-y-6"},Eo={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},No={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4"},Po={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Ao=["value","onInput"],Oo={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},$o=["value","onInput"],Fo={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Mo=["value","onInput"],Uo={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Ro=["value","onInput"],Vo={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},jo=["value","onInput"],Lo={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},zo=["value","onInput"],Go={class:"flex space-x-3 mt-6"},Bo=["disabled"],Ho=["disabled"],G="contentManagerFilters",sr={__name:"ContentManager",setup(W){const{language:n}=De(),{currentUser:f}=ct(),{content:X,products:x,users:C,drafts:Z,channels:I,loadingChannels:w,loadingContent:S,fetchContent:T,fetchProducts:Te,fetchUsers:Ee,fetchDrafts:Ne,fetchChannels:Pe,createContent:Ae,updateContent:Oe,updateContentStatus:$e,updateContentChannelMetrics:Fe,deleteContent:Me,transformDraftToContent:Ue}=Ct(),l=a=>j(a,n.value),ee=p(!0),te=p(!1),se=p(!1),H=p(!1),ie=p(!1),U=p(null),D=p(null),P=p(null),ce=p(null),A=p(""),O=p(""),$=p(""),F=p(""),E=p(0),Re=p(15),ae=p(0),q=p(1),ue=p(!1),m=p(!1),R=p(!1),v=p({}),fe=gt(),Ve=()=>{const a={filterStatus:A.value,filterChannel:O.value,filterProduct:$.value,filterTrafficType:F.value,timestamp:Date.now()};a.filterStatus||a.filterChannel||a.filterProduct||a.filterTrafficType?(localStorage.setItem(G,JSON.stringify(a)),console.log("ðŸ“ Filtros salvos no localStorage:",a)):(localStorage.removeItem(G),console.log("ðŸ—‘ï¸ Filtros vazios, removidos do localStorage"))},je=()=>{try{const a=localStorage.getItem(G);if(console.log("ðŸ” Procurando filtros no localStorage..."),console.log("ðŸ“¦ Dados encontrados:",a),a){const r=JSON.parse(a);return console.log("ðŸ“‚ Filtros parseados:",r),A.value=r.filterStatus||"",O.value=r.filterChannel||"",$.value=r.filterProduct||"",F.value=r.filterTrafficType||"",console.log("âœ… Filtros aplicados:"),console.log("  - Status:",A.value),console.log("  - Channel:",O.value),console.log("  - Product:",$.value),console.log("  - Traffic Type:",F.value),localStorage.removeItem(G),console.log("ðŸ—‘ï¸ Filtros removidos do localStorage apÃ³s carregamento"),!0}else console.log("ðŸš« Nenhum filtro encontrado no localStorage")}catch(a){console.error("âŒ Erro ao carregar filtros do localStorage:",a)}return!1},Le=()=>{localStorage.removeItem(G)},d=it({name:"",type:"",content:"",product:"",creator:f.value?.id||"",postDate:"",producer:f.value?.id||"",status:"PENDING",channels:[],productionStartDate:"",productionEndDate:"",metaAdsId:"",trafficType:"ORGANIC"});ut(async()=>{const a=fe.currentRoute.value.query,r=a.from==="preview";localStorage.getItem(G);const t=ht();console.log("ðŸš€ ContentManager montado"),console.log("ðŸ“ Query params:",a),console.log("ï¿½ Query params stringified:",JSON.stringify(a)),console.log("ðŸ“ from value:",a.from),console.log("ðŸ“ from type:",typeof a.from),console.log("ï¿½ðŸ” Vindo do preview?",r);let u=!1;r||t?(u=je(),vt(),console.log("ðŸ”„ Vindo do preview (detectado), filtros carregados:",u)):console.log("âšª NÃ£o vindo do preview, nÃ£o carregando filtros"),await Promise.all([Te(),Ee(),Ne(),Pe()]),await oe(),ee.value=!1});const J=re(()=>!Z.value||!f.value?[]:Z.value.filter(a=>a.status==="APPROVED")),me=re(()=>!X.value||!f.value?[]:X.value),ze=re(()=>me.value),Ge=re(()=>E.value+1);B([A,O,$,F],async([a,r,t,u],[V,Q,Y,K])=>{console.log("ðŸ”„ Filtros alterados:"),console.log("  - Status:",V,"->",a),console.log("  - Channel:",Q,"->",r),console.log("  - Product:",Y,"->",t),console.log("  - Traffic Type:",K,"->",u),E.value=0,await oe(),Ve(),console.log("âœ… Filtros salvos automaticamente no localStorage")},{immediate:!1}),B(()=>d.status,a=>{a!=="IN_PRODUCTION"&&(d.productionStartDate="",d.productionEndDate=""),a!=="POSTED"&&(d.metaAdsId="")}),B(D,a=>{a&&a.productId?d.product=a.productId:d.product=""});const oe=async()=>{const a={page:E.value,size:Re.value};A.value&&(a.status=A.value),O.value&&(a.channelId=O.value),$.value&&(a.productId=$.value),F.value&&(a.trafficType=F.value);const r=await T(a);r&&typeof r=="object"&&(typeof r.totalPages=="number"&&(q.value=r.totalPages),typeof r.totalElements=="number"&&(ae.value=r.totalElements))},Be=async()=>{E.value!==0&&(E.value-=1,await oe())},He=async()=>{E.value>=q.value-1||(E.value+=1,await oe())},qe=a=>f.value?.adminType==="ADMIN"||a.creatorId===f.value?.id||a.producerId===f.value?.id,Je=a=>f.value?.adminType==="ADMIN"||a.producerId===f.value?.id,Qe=async()=>{console.log("ðŸ”¥ handleSubmit chamado! Iniciando processo de salvamento..."),console.log("ðŸ“ Form Data atual:",JSON.stringify(d,null,2)),console.log("âœï¸ Editing Content:",U.value),ue.value=!0;try{const a={name:d.name,type:d.type?.toUpperCase()||"",content:d.content,productId:d.product||null,producerId:d.producer||null,status:d.status,postDate:z(d.postDate),productionStartDate:z(d.productionStartDate)||null,productionEndDate:z(d.productionEndDate)||null,metaAdsId:d.metaAdsId||null,trafficType:d.trafficType,channelIds:d.channels};console.log("=== DADOS ENVIADOS AO BACKEND ==="),console.log("OperaÃ§Ã£o:",U.value?"UPDATE":"CREATE"),console.log("Content ID:",U.value?.id||"N/A"),console.log("Content Data:",JSON.stringify(a,null,2)),console.log("====================================="),U.value?await Oe(U.value.id,a):await Ae(a),ge(),await T()}catch(a){console.error("Error saving content:",a)}finally{ue.value=!1}},xe=async()=>{if(D.value){m.value=!0;try{const a={status:d.status,channelIds:d.channels,postDate:z(d.postDate),productId:d.product||null,producerId:d.producer||null,trafficType:d.trafficType};d.status==="IN_PRODUCTION"&&(d.productionStartDate&&(a.productionStartDate=z(d.productionStartDate)),d.productionEndDate&&(a.productionEndDate=z(d.productionEndDate))),d.status==="POSTED"&&d.metaAdsId&&(a.metaAdsId=d.metaAdsId),await Ue(D.value.id,a),he(),await T()}catch(a){console.error("Error transforming draft:",a)}finally{m.value=!1}}},ge=()=>{Object.assign(d,{name:"",type:"",content:"",product:"",creator:f.value?.id||"",postDate:"",producer:f.value?.id||"",status:"PENDING",channels:[],productionStartDate:"",productionEndDate:"",metaAdsId:"",trafficType:"ORGANIC"}),te.value=!1,U.value=null},he=()=>{se.value=!1,D.value=null,ge()},Ye=async a=>{ce.value=a,ie.value=!0},ve=()=>{ie.value=!1,ce.value=null},Ke=async a=>{try{await Me(a),await T(),ve()}catch(r){console.error("Error deleting content:",r)}},We=a=>{P.value=a;const r={};a.channels.forEach(t=>{const u=a.metrics?.channelMetrics?.find(V=>V.channelId===t.id);r[t.id]=u||{likes:0,comments:0,shares:0,postClicks:0,siteVisits:0,newAccounts:0}}),v.value=r,H.value=!0},L=(a,r,t)=>{v.value[a]||(v.value[a]={}),v.value[a][r]=t},Xe=async()=>{if(P.value){R.value=!0;try{if(Object.keys(v.value).length===0){R.value=!1;return}const a=Object.entries(v.value).map(([t,u])=>({channelId:t.toString(),likes:u.likes||0,comments:u.comments||0,shares:u.shares||0,siteVisits:u.siteVisits||0,newAccounts:u.newAccounts||0,postClicks:u.postClicks||0})),r=await Fe(P.value.id,a);r.success?(H.value=!1,P.value=null,v.value={},await T()):alert(`Erro ao atualizar mÃ©tricas: ${r.error}`)}catch(a){console.error("Error updating metrics:",a);const r=a.response?.data?.message||a.message||"Erro ao atualizar mÃ©tricas";alert(`Erro ao atualizar mÃ©tricas: ${r}`)}finally{R.value=!1}}},Ze=async(a,r)=>{try{const t=await $e(a.id,r);t.success||(console.error("Error updating status:",t.error),alert(`Erro ao atualizar status: ${t.error}`))}catch(t){console.error("Error updating status:",t),alert("Erro ao atualizar status do conteÃºdo")}},et=()=>{H.value=!1,P.value=null};B(se,a=>{a?document.body.style.overflow="hidden":document.body.style.overflow=""}),B(H,a=>{a?document.body.style.overflow="hidden":document.body.style.overflow=""});const tt=a=>x.value?.find(t=>t.id===a)?.name||"",pe=a=>{if(!a)return"N/A";const r=`contentTypes.${a.toLowerCase()}`,t=l(r,n.value);return t!==r?t:a},_e=a=>{const r={PENDING:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",IN_PRODUCTION:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",POSTED:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",PRODUCTION_FINISHED:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200",FINISHED:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",CANCELED:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"};return r[a]||r.PENDING},st=a=>({PAID:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",ORGANIC:"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-200"})[a]||"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200",at=a=>{if(!a)return"";let r;if(Array.isArray(a)){const[Q,Y,K,lt=0,nt=0]=a;r=new Date(Q,Y-1,K,lt,nt)}else r=new Date(a);const t=n.value==="pt"?"pt-PT":"en-US",u=r.toLocaleDateString(t),V=r.toLocaleTimeString(t,{hour:"2-digit",minute:"2-digit"});return`${u} ${V}`},z=a=>{if(!a)return;const r=new Date(a),t=r.getFullYear(),u=String(r.getMonth()+1).padStart(2,"0"),V=String(r.getDate()).padStart(2,"0"),Q=String(r.getHours()).padStart(2,"0"),Y=String(r.getMinutes()).padStart(2,"0"),K=String(r.getSeconds()).padStart(2,"0");return`${t}-${u}-${V}T${Q}:${Y}:${K}`},ot=(a,r)=>a?a.length>r?a.substring(0,r)+"...":a:"",rt=()=>{console.log("ðŸ‘ï¸ Navegando para preview (filtros jÃ¡ salvos automaticamente)")};return pt(()=>{fe.currentRoute.value.name!=="ContentPreview"&&(Le(),console.log("ðŸšª Saindo da pÃ¡gina (nÃ£o para preview), filtros removidos"))}),(a,r)=>(i(),c(_,null,[e("div",Bt,[e("div",Ht,[e("h2",qt,[le(o(l("content"))+" ",1),ae.value?(i(),c("span",Jt,"("+o(ae.value)+")",1)):b("",!0)]),e("div",Qt,[e("button",{onClick:r[0]||(r[0]=t=>J.value.length>0&&(se.value=!0)),disabled:J.value.length===0,class:ne(["flex items-center px-4 py-2 rounded-lg transition-colors flex-shrink-0",J.value.length===0?"bg-green-400 cursor-not-allowed opacity-60 text-white":"bg-green-600 hover:bg-green-700 text-white"]),title:"Transformar rascunhos aprovados em conteÃºdo"},[g(s(St),{class:"w-4 h-4 mr-2"}),le(" "+o(l("transformDraft")),1),J.value.length===0?(i(),c("span",Kt,"(0)")):b("",!0)],10,Yt),e("button",{onClick:r[1]||(r[1]=t=>te.value=!0),class:"flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"},[g(s(we),{class:"w-4 h-4 mr-2"}),le(" "+o(l("newContent")),1)])])]),e("div",Wt,[h(e("select",{"onUpdate:modelValue":r[2]||(r[2]=t=>A.value=t),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[e("option",Xt,o(l("allStatuses")),1),(i(!0),c(_,null,k(s(ye),t=>(i(),c("option",{key:t,value:t},o(l(t)),9,Zt))),128))],512),[[N,A.value]]),h(e("select",{"onUpdate:modelValue":r[3]||(r[3]=t=>O.value=t),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",disabled:!s(I)||s(I).length===0},[e("option",ts,o(l("allChannels")),1),!s(I)||s(I).length===0?(i(),c("option",ss,o(s(w)?"Carregando canais...":"Nenhum canal disponÃ­vel"),1)):b("",!0),(i(!0),c(_,null,k(s(I),t=>(i(),c("option",{key:t.id,value:t.id},o(t.name),9,as))),128))],8,es),[[N,O.value]]),h(e("select",{"onUpdate:modelValue":r[4]||(r[4]=t=>$.value=t),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",disabled:!s(x)||s(x).length===0},[e("option",rs,o(l("allProducts")),1),!s(x)||s(x).length===0?(i(),c("option",ls,o(l("noProductsFound",s(n))),1)):b("",!0),(i(!0),c(_,null,k(s(x),t=>(i(),c("option",{key:t.id,value:t.id},o(t.name),9,ns))),128))],8,os),[[N,$.value]]),h(e("select",{"onUpdate:modelValue":r[5]||(r[5]=t=>F.value=t),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[e("option",ds,o(l("allTrafficTypes",s(n))),1),e("option",is,o(l("paid",s(n))),1),e("option",cs,o(l("organic",s(n))),1)],512),[[N,F.value]])]),(i(),M(ke,{to:"body"},[se.value?(i(),c("div",us,[e("div",gs,[e("div",ps,[e("div",ys,[e("div",bs,[g(s(Ce),{class:"w-5 h-5 text-green-600 dark:text-green-400"})]),e("div",null,[e("h3",fs,o(l("transformDraftToContent",s(n))),1)])]),e("div",ms,[e("p",xs,o(l("transformDraftDescription",s(n))),1),D.value?(i(),c("div",hs,[e("div",vs,[g(s(Ie),{class:"w-4 h-4 text-gray-500 dark:text-gray-400 mr-2 flex-shrink-0"}),e("div",_s,[e("span",ks,o(D.value.name),1),e("span",ws,o(pe(D.value.type)),1)])])])):b("",!0),e("form",{onSubmit:yt(xe,["prevent"]),class:"space-y-4"},[e("div",null,[e("label",Cs,o(l("selectDraft",s(n)))+" * ",1),h(e("select",{"onUpdate:modelValue":r[6]||(r[6]=t=>D.value=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:"",disabled:m.value},[e("option",Is,o(l("selectApprovedDraft",s(n))),1),(i(!0),c(_,null,k(J.value,t=>(i(),c("option",{key:t.id,value:t},o(t.name)+" - "+o(pe(t.type)),9,Ss))),128))],8,Ds),[[N,D.value]])]),e("div",Ts,[e("div",null,[e("label",Es,o(l("product",s(n))),1),h(e("select",{"onUpdate:modelValue":r[7]||(r[7]=t=>d.product=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:m.value},[e("option",Ps,o(l("selectProduct",s(n))),1),(i(!0),c(_,null,k(s(x),t=>(i(),c("option",{key:t.id,value:t.id},o(t.name),9,As))),128))],8,Ns),[[N,d.product]])]),e("div",null,[e("label",Os,o(l("producer",s(n))),1),h(e("select",{"onUpdate:modelValue":r[8]||(r[8]=t=>d.producer=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:m.value},[e("option",Fs,o(l("selectProducer",s(n))),1),(i(!0),c(_,null,k(s(C),t=>(i(),c("option",{key:t.id,value:t.id},o(t.name),9,Ms))),128))],8,$s),[[N,d.producer]])])]),e("div",Us,[e("div",null,[e("label",Rs,o(l("postDate",s(n))),1),h(e("input",{type:"datetime-local","onUpdate:modelValue":r[9]||(r[9]=t=>d.postDate=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:m.value},null,8,Vs),[[de,d.postDate]])]),e("div",null,[e("label",js,o(l("status",s(n))),1),h(e("select",{"onUpdate:modelValue":r[10]||(r[10]=t=>d.status=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:m.value},[(i(!0),c(_,null,k(s(ye),t=>(i(),c("option",{key:t,value:t},o(l(t,s(n))),9,zs))),128))],8,Ls),[[N,d.status]])])]),e("div",Gs,[e("div",null,[e("label",Bs,o(l("trafficType",s(n))),1),h(e("select",{"onUpdate:modelValue":r[11]||(r[11]=t=>d.trafficType=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:m.value},[e("option",qs,o(l("organic",s(n))),1),e("option",Js,o(l("paid",s(n))),1)],8,Hs),[[N,d.trafficType]])])]),d.status==="IN_PRODUCTION"?(i(),c("div",Qs,[e("div",null,[e("label",Ys,o(l("productionStartDate",s(n))),1),h(e("input",{"onUpdate:modelValue":r[12]||(r[12]=t=>d.productionStartDate=t),type:"datetime-local",disabled:m.value,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white disabled:opacity-50"},null,8,Ks),[[de,d.productionStartDate]])]),e("div",null,[e("label",Ws,o(l("productionEndDate",s(n))),1),h(e("input",{"onUpdate:modelValue":r[13]||(r[13]=t=>d.productionEndDate=t),type:"datetime-local",disabled:m.value,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white disabled:opacity-50"},null,8,Xs),[[de,d.productionEndDate]])])])):b("",!0),d.status==="POSTED"?(i(),c("div",Zs,[e("label",ea,o(l("metaAdsId",s(n))),1),h(e("input",{"onUpdate:modelValue":r[14]||(r[14]=t=>d.metaAdsId=t),type:"text",disabled:m.value,placeholder:l("enterMetaAdsId",s(n)),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white disabled:opacity-50"},null,8,ta),[[de,d.metaAdsId]])])):b("",!0),e("div",null,[e("label",sa,o(l("channels",s(n)))+" * ",1),e("div",aa,[(i(!0),c(_,null,k(s(I),t=>(i(),c("div",{key:t.id,class:"flex items-center"},[h(e("input",{id:`transform-channel-${t.id}`,type:"checkbox",value:t.id,"onUpdate:modelValue":r[15]||(r[15]=u=>d.channels=u),disabled:m.value,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 disabled:opacity-50"},null,8,oa),[[bt,d.channels]]),e("label",{for:`transform-channel-${t.id}`,class:"ml-2 text-sm text-gray-900 dark:text-gray-300 cursor-pointer truncate"},o(t.name),9,ra)]))),128))]),d.channels.length===0?(i(),c("p",la,o(l("selectAtLeastOneChannel",s(n))),1)):b("",!0)])],32)]),e("div",na,[e("button",{type:"button",onClick:he,disabled:m.value,class:"w-full sm:w-auto px-6 py-2 bg-gray-200 hover:bg-gray-300 disabled:bg-gray-100 text-gray-700 dark:bg-gray-600 dark:hover:bg-gray-500 dark:disabled:bg-gray-700 dark:text-gray-300 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},o(l("cancel",s(n))),9,da),e("button",{onClick:xe,disabled:m.value||!D.value||d.channels.length===0,class:"w-full sm:w-auto flex items-center justify-center px-6 py-2 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white rounded-lg transition-colors space-x-2 disabled:opacity-50 disabled:cursor-not-allowed"},[m.value?(i(),M(s(be),{key:0,class:"w-4 h-4 animate-spin"})):(i(),M(s(Ce),{key:1,class:"w-4 h-4"})),e("span",null,o(m.value?l("transforming",s(n)):l("transformToContent",s(n))),1)],8,ia)])])])])):b("",!0)])),g(kt,{show:te.value,"form-data":d,"editing-content":U.value,products:s(x),users:s(C),channels:s(I),"content-types":s(_t),"content-statuses":s(ye),t:l,language:s(n).value,user:s(f),"is-submitting":ue.value,onCancel:ge,onSubmit:Qe},null,8,["show","form-data","editing-content","products","users","channels","content-types","content-statuses","language","user","is-submitting"]),s(S)||ee.value?(i(),c("div",ca,[e("div",ua,[e("table",ga,[e("thead",pa,[e("tr",null,[e("th",ya,[g(y,{customClass:"h-4 w-16"})]),e("th",ba,[g(y,{customClass:"h-4 w-12"})]),e("th",fa,[g(y,{customClass:"h-4 w-20"})]),e("th",ma,[g(y,{customClass:"h-4 w-16"})]),e("th",xa,[g(y,{customClass:"h-4 w-20"})]),e("th",ha,[g(y,{customClass:"h-4 w-16"})]),e("th",va,[g(y,{customClass:"h-4 w-16"})])])]),e("tbody",_a,[(i(),c(_,null,k(6,t=>e("tr",{key:t},[e("td",ka,[g(y,{customClass:"h-4 w-32 shimmer"})]),e("td",wa,[g(y,{customClass:"h-4 w-20 shimmer"})]),e("td",Ca,[g(y,{customClass:"h-4 w-24 shimmer"})]),e("td",Da,[g(y,{customClass:"h-6 w-24 rounded-full shimmer"})]),e("td",Ia,[g(y,{customClass:"h-4 w-28 shimmer"})]),e("td",Sa,[e("div",Ta,[g(y,{customClass:"h-5 w-16 rounded-full shimmer"}),g(y,{customClass:"h-5 w-20 rounded-full shimmer"})])]),e("td",Ea,[e("div",Na,[g(y,{customClass:"h-8 w-8 rounded shimmer"}),g(y,{customClass:"h-8 w-8 rounded shimmer"}),g(y,{customClass:"h-8 w-8 rounded shimmer"}),g(y,{customClass:"h-8 w-8 rounded shimmer"})])])])),64))])])])])):!s(S)&&!ee.value?(i(),c("div",Pa,[e("table",Aa,[e("thead",Oa,[e("tr",null,[r[17]||(r[17]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Meta Ads ID",-1)),e("th",$a,o(l("name",s(n))),1),e("th",Fa,o(l("type",s(n))),1),e("th",Ma,o(l("product",s(n))),1),e("th",Ua,o(l("trafficType",s(n))),1),e("th",Ra,o(l("status",s(n))),1),e("th",Va,o(l("postDate",s(n))),1),e("th",ja,o(l("channels",s(n))),1),e("th",La,o(l("actions",s(n))),1)])]),e("tbody",za,[(i(!0),c(_,null,k(ze.value,t=>(i(),c("tr",{key:t.id},[e("td",Ga,[e("span",Ba,o(t.metaAdsId||"-"),1)]),e("td",Ha,[e("div",{class:"text-sm font-medium text-gray-900 dark:text-white truncate",title:t.name},o(ot(t.name,40)),9,qa)]),e("td",Ja,[e("div",Qa,o(pe(t.type)),1)]),e("td",Ya,[e("div",Ka,o(tt(t.productId)),1)]),e("td",Wa,[t.trafficType?(i(),c("span",{key:0,class:ne([st(t.trafficType),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},o(l(t.trafficType?.toLowerCase()||"unknown",s(n))),3)):(i(),c("span",Xa,o(l("unknown",s(n))),1))]),e("td",Za,[Je(t)?(i(),c("select",{key:0,value:t.status,onChange:u=>Ze(t,u.target.value),class:ne(["text-xs rounded-full px-2 py-1 border-0 focus:ring-2 focus:ring-blue-500",_e(t.status)])},[e("option",to,o(l("PENDING",s(n))),1),e("option",so,o(l("IN_PRODUCTION",s(n))),1),e("option",ao,o(l("POSTED",s(n))),1),e("option",oo,o(l("PRODUCTION_FINISHED",s(n))),1),e("option",ro,o(l("FINISHED",s(n))),1),e("option",lo,o(l("CANCELED",s(n))),1)],42,eo)):(i(),c("span",{key:1,class:ne(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",_e(t.status)])},o(l(t.status,s(n))),3))]),e("td",no,[e("div",io,o(at(t.postDate)),1)]),e("td",co,[e("div",uo,[(i(!0),c(_,null,k(t.channels,u=>(i(),c("span",{key:u.id,class:"inline-flex px-2 py-1 text-xs bg-gray-100 dark:bg-gray-600 text-gray-800 dark:text-gray-200 rounded"},o(u.name),1))),128))])]),e("td",go,[e("div",po,[["POSTED","FINISHED"].includes(t.status)?(i(),c("button",{key:0,onClick:u=>We(t),class:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:l("updateMetrics",s(n))},[g(s(ft),{class:"w-4 h-4"})],8,yo)):b("",!0),g(s(xt),{to:{name:"ContentPreview",params:{id:t.id},query:{from:"content-manager"}},onClick:rt,class:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",title:l("preview",s(n))},{default:mt(()=>[g(s(wt),{class:"w-4 h-4"})]),_:2},1032,["to","title"]),qe(t)?(i(),c("button",{key:1,onClick:u=>Ye(t),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"},[g(s(Se),{class:"w-4 h-4"})],8,bo)):b("",!0)])])]))),128))])]),q.value>1?(i(),c("div",fo,[e("div",mo,o(l("page",s(n)))+" "+o(Ge.value)+" / "+o(q.value)+" Â· "+o(ae.value)+" "+o(l("items",s(n))),1),e("div",xo,[e("button",{onClick:Be,disabled:E.value===0,class:"px-3 py-1 rounded border text-sm disabled:opacity-40 disabled:cursor-not-allowed bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"},o(l("previous",s(n))),9,ho),e("button",{onClick:He,disabled:E.value>=q.value-1,class:"px-3 py-1 rounded border text-sm disabled:opacity-40 disabled:cursor-not-allowed bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"},o(l("next",s(n))),9,vo)])])):b("",!0)])):b("",!0),!s(S)&&!ee.value&&me.value.length===0?(i(),c("div",_o,[g(s(It),{class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e("h3",ko,o(l("noContentFound",s(n))),1),e("p",wo,o(l("createFirstContent",s(n))),1),e("button",{onClick:r[16]||(r[16]=t=>te.value=!0),class:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"},[g(s(we),{class:"w-4 h-4 mr-2"}),le(" "+o(l("newContent",s(n))),1)])])):b("",!0),(i(),M(ke,{to:"body"},[H.value&&P.value?(i(),c("div",Co,[e("div",Do,[e("div",Io,[e("h3",So,o(l("updateMetrics",s(n)))+" - "+o(P.value.name),1),e("div",To,[(i(!0),c(_,null,k(P.value.channels,t=>(i(),c("div",{key:t.id,class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4"},[e("h4",Eo,o(t.name)+" "+o(l("metrics",s(n))),1),e("div",No,[e("div",null,[e("label",Po,o(l("likes",s(n))),1),e("input",{type:"number",min:"0",value:v.value[t.id]?.likes||0,onInput:u=>L(t.id,"likes",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,Ao)]),e("div",null,[e("label",Oo,o(l("comments",s(n))),1),e("input",{type:"number",min:"0",value:v.value[t.id]?.comments||0,onInput:u=>L(t.id,"comments",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,$o)]),e("div",null,[e("label",Fo,o(l("shares",s(n))),1),e("input",{type:"number",min:"0",value:v.value[t.id]?.shares||0,onInput:u=>L(t.id,"shares",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,Mo)]),e("div",null,[e("label",Uo,o(l("siteVisits",s(n))),1),e("input",{type:"number",min:"0",value:v.value[t.id]?.siteVisits||0,onInput:u=>L(t.id,"siteVisits",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,Ro)]),e("div",null,[e("label",Vo,o(l("newAccounts",s(n))),1),e("input",{type:"number",min:"0",value:v.value[t.id]?.newAccounts||0,onInput:u=>L(t.id,"newAccounts",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,jo)]),e("div",null,[e("label",Lo,o(l("postClicks",s(n))),1),e("input",{type:"number",min:"0",value:v.value[t.id]?.postClicks||0,onInput:u=>L(t.id,"postClicks",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,zo)])])]))),128))]),e("div",Go,[e("button",{onClick:Xe,disabled:R.value,class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center space-x-2"},[R.value?(i(),M(s(be),{key:0,class:"h-4 w-4 animate-spin"})):b("",!0),e("span",null,o(R.value?l("saving",s(n)):l("save",s(n))),1)],8,Bo),e("button",{onClick:et,disabled:R.value,class:"px-4 py-2 bg-gray-300 hover:bg-gray-400 disabled:bg-gray-200 disabled:cursor-not-allowed text-gray-700 rounded-lg transition-colors"},o(l("cancel",s(n))),9,Ho)])])])])):b("",!0)]))]),ie.value?(i(),M(Gt,{key:0,content:ce.value,onClose:ve,onDelete:Ke},null,8,["content"])):b("",!0)],64))}};export{sr as default};
