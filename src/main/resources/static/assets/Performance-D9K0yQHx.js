import{z as T,y as B,x as L,a as i,b as t,t as s,u as e,d as n,e as M,p as f,j as F,G as U,g as u,v as D,B as v,q as y,s as h,f as O,o as l}from"./index-BIWjYgpL.js";import{u as $}from"./useData-BYI3NWwh.js";import{_ as j}from"./SkeletonLoader-D2Q4n78C.js";import{B as q}from"./box-D5q0mncx.js";import"./userService-D4f8HJ4u.js";const z={class:"space-y-6"},E={class:"flex justify-between items-center"},G={class:"text-2xl font-bold text-gray-900 dark:text-white"},H=["disabled"],K={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"},J={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},Q={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},R={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},W={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},X={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Y={value:""},Z=["value"],tt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},et={value:""},at=["value"],st={key:0},rt={key:1},ot={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"},nt={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},dt={class:"overflow-x-auto"},ct={class:"w-full"},it={class:"bg-gray-50 dark:bg-gray-700"},lt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},xt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},pt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},gt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},ut={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},yt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},ht={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},_t={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},mt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},ft={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},kt={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},wt={class:"px-6 py-4 whitespace-nowrap"},bt={class:"text-sm font-medium text-gray-900 dark:text-white"},Dt={class:"text-sm text-gray-500 dark:text-gray-400"},vt={class:"px-6 py-4"},Ct={class:"flex flex-wrap gap-1"},It={class:"px-6 py-4 whitespace-nowrap"},Vt={class:"flex items-center space-x-2"},Nt={class:"text-sm text-gray-900 dark:text-white"},Pt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},At={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},St={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Tt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Bt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Lt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Mt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Ft={key:0},Ut={colspan:"10",class:"px-6 py-8 text-center"},Ot={class:"text-gray-500 dark:text-gray-400"},Ht={__name:"Performance",setup($t){const{language:o}=M(),{products:C,channels:I,performanceData:_,loading:m,fetchPerformanceData:V,fetchProducts:N,fetchChannels:P}=$(),d=T({startDate:new Date(new Date().setMonth(new Date().getMonth()-1)).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],channel:"",productId:""}),k=r=>!r||/^\d{4}-\d{2}-\d{2}$/.test(r)?r:new Date(r).toISOString().split("T")[0],w=B(()=>!_.value||!Array.isArray(_.value)?[]:_.value.filter(c=>{if(c.postDate){const a=new Date(c.postDate),g=new Date(d.startDate),b=new Date(d.endDate);if(b.setHours(23,59,59,999),a<g||a>b)return!1}return!(d.channel&&!c.channels?.includes(d.channel))})),x=async()=>{const r={};d.startDate&&(r.startDate=k(d.startDate)),d.endDate&&(r.endDate=k(d.endDate)),d.channel&&d.channel.trim()!==""&&(r.channel=d.channel.trim()),d.productId&&d.productId.trim()!==""&&(r.productId=d.productId.trim()),await V(r)};L(async()=>{await Promise.all([N(),P(),x()])});const p=r=>typeof r!="number"?"0":r>=1e6?(r/1e6).toFixed(1)+"M":r>=1e3?(r/1e3).toFixed(1)+"K":r.toLocaleString(),A=r=>r?typeof r=="string"?new Date(r).toLocaleDateString():r.toLocaleDateString():"N/A",S=r=>{if(!r)return"N/A";const c=`contentTypes.${r.toLowerCase()}`,a=n(c,o.value);return a!==c?a:r};return(r,c)=>(l(),i("div",z,[t("div",E,[t("h2",G,s(e(n)("performance",e(o))),1),t("button",{onClick:x,disabled:e(m).performance,class:"flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors"},[f(e(U),{class:"w-4 h-4 mr-2"}),F(" "+s(e(m).performance?e(n)("loading",e(o)):e(n)("refresh",e(o))),1)],8,H)]),t("div",K,[t("h3",J,s(e(n)("filters",e(o))),1),t("div",Q,[t("div",null,[t("label",R,s(e(n)("startDate",e(o))),1),u(t("input",{type:"date","onUpdate:modelValue":c[0]||(c[0]=a=>d.startDate=a),onChange:x,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,544),[[D,d.startDate]])]),t("div",null,[t("label",W,s(e(n)("endDate",e(o))),1),u(t("input",{type:"date","onUpdate:modelValue":c[1]||(c[1]=a=>d.endDate=a),onChange:x,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,544),[[D,d.endDate]])]),t("div",null,[t("label",X,s(e(n)("channel",e(o))),1),u(t("select",{"onUpdate:modelValue":c[2]||(c[2]=a=>d.channel=a),onChange:x,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[t("option",Y,s(e(n)("allChannels",e(o))),1),(l(!0),i(y,null,h(e(I),a=>(l(),i("option",{key:a.id,value:a.name},s(a.name),9,Z))),128))],544),[[v,d.channel]])]),t("div",null,[t("label",tt,s(e(n)("product",e(o))),1),u(t("select",{"onUpdate:modelValue":c[3]||(c[3]=a=>d.productId=a),onChange:x,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[t("option",et,s(e(n)("allProducts",e(o))),1),(l(!0),i(y,null,h(e(C),a=>(l(),i("option",{key:a.id,value:a.id},s(a.name),9,at))),128))],544),[[v,d.productId]])])])]),e(m).performance?(l(),i("div",st,[f(j,{type:"performance-table"})])):(l(),i("div",rt,[t("div",ot,[t("h3",nt,s(e(n)("contentPerformance",e(o))),1),t("div",dt,[t("table",ct,[t("thead",it,[t("tr",null,[t("th",lt,s(e(n)("contentName",e(o))),1),t("th",xt,s(e(n)("channels",e(o))),1),t("th",pt,s(e(n)("product",e(o))),1),t("th",gt,s(e(n)("likes",e(o))),1),t("th",ut,s(e(n)("comments",e(o))),1),t("th",yt,s(e(n)("shares",e(o))),1),t("th",ht,s(e(n)("clicks",e(o))),1),t("th",_t,s(e(n)("siteVisits",e(o))),1),t("th",mt,s(e(n)("newAccounts",e(o))),1),t("th",ft,s(e(n)("postDate",e(o))),1)])]),t("tbody",kt,[(l(!0),i(y,null,h(w.value,a=>(l(),i("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[t("td",wt,[t("div",bt,s(a.name),1),t("div",Dt,s(S(a.type)),1)]),t("td",vt,[t("div",Ct,[(l(!0),i(y,null,h(a.channels,g=>(l(),i("span",{key:g,class:"inline-block px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded"},s(g),1))),128))])]),t("td",It,[t("div",Vt,[f(e(q),{class:"w-6 h-6 text-blue-500 dark:text-blue-400"}),t("span",Nt,s(a.productName),1)])]),t("td",Pt,s(p(a.metrics.likes)),1),t("td",At,s(p(a.metrics.comments)),1),t("td",St,s(p(a.metrics.shares)),1),t("td",Tt,s(p(a.metrics.clicks)),1),t("td",Bt,s(p(a.metrics.siteVisits)),1),t("td",Lt,s(p(a.metrics.newAccounts)),1),t("td",Mt,s(A(a.postDate)),1)]))),128)),w.value.length===0?(l(),i("tr",Ft,[t("td",Ut,[t("p",Ot,s(e(n)("noPerformanceData",e(o))),1)])])):O("",!0)])])])])]))]))}};export{Ht as default};
