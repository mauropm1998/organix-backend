import{a as i,o as d,b as t,p as c,u as e,t as r,d as a,e as S,P,h as _,r as h,x as U,l as Y,C as G,f as w,j,q as N,s as M,g as H,v as J,w as K,i as Q}from"./index-DbB0lweT.js";import{u as W}from"./useData-V0qgd-s4.js";import{a as X,T as B}from"./triangle-alert-CuWdgXWZ.js";import{L as A}from"./loader-circle-xaVZ0R8c.js";import{P as T}from"./plus-DCAQ6IeS.js";import{B as Z}from"./box-Duw1zIIP.js";import{S as ee}from"./square-pen-BLm1d_9d.js";import"./userService-BbL24v_D.js";const te={class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50"},se={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4 transform transition-all"},ae={class:"p-6"},re={class:"flex items-center mb-4"},de={class:"flex-shrink-0 w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center mr-3"},le={class:"text-lg font-medium text-gray-900 dark:text-white"},oe={class:"mb-6"},ie={class:"text-gray-600 dark:text-gray-400"},ne={class:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600"},ce={class:"flex items-center"},ue={class:"text-sm font-medium text-gray-900 dark:text-white truncate"},ge={class:"flex space-x-3 justify-end"},be=["disabled"],me=["disabled"],he={__name:"DeleteProductModal",props:{product:{type:Object,required:!0},isDeleting:{type:Boolean,default:!1}},emits:["confirm","cancel"],setup(v){const{language:s}=S();return(y,u)=>(d(),i("div",te,[t("div",se,[t("div",ae,[t("div",re,[t("div",de,[c(e(X),{class:"w-5 h-5 text-red-600 dark:text-red-400"})]),t("div",null,[t("h3",le,r(e(a)("confirmDeletion",e(s))),1)])]),t("div",oe,[t("p",ie,r(e(a)("confirmDeleteProduct",e(s))),1),t("div",ne,[t("div",ce,[c(e(P),{class:"w-4 h-4 text-gray-500 dark:text-gray-400 mr-2 flex-shrink-0"}),t("span",ue,r(v.product?.name),1)])])]),t("div",ge,[t("button",{onClick:u[0]||(u[0]=$=>y.$emit("cancel")),disabled:v.isDeleting,class:"px-4 py-2 bg-gray-200 hover:bg-gray-300 disabled:bg-gray-100 text-gray-700 dark:bg-gray-600 dark:hover:bg-gray-500 dark:disabled:bg-gray-700 dark:text-gray-300 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},r(e(a)("cancel",e(s))),9,be),t("button",{onClick:u[1]||(u[1]=$=>y.$emit("confirm")),disabled:v.isDeleting,class:"flex items-center px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white rounded-lg transition-colors space-x-2 disabled:opacity-50 disabled:cursor-not-allowed"},[v.isDeleting?(d(),_(e(A),{key:0,class:"w-4 h-4 animate-spin"})):(d(),_(e(B),{key:1,class:"w-4 h-4"})),t("span",null,r(v.isDeleting?e(a)("deleting",e(s)):e(a)("delete",e(s))),1)],8,me)])])])]))}},ve={class:"space-y-6"},ye={key:0,class:"text-center py-12"},xe={class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},fe={class:"text-gray-600 dark:text-gray-400"},pe={key:1},_e={class:"flex justify-between items-center"},ke={class:"text-2xl font-bold text-gray-900 dark:text-white"},we={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6"},Pe={key:1},$e={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mt-6"},De={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},Ce={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},je=["disabled"],Ne={class:"flex space-x-3"},Me=["disabled"],Te=["disabled"],Se={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6"},Be={class:"h-48 bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-700 dark:to-gray-600 flex items-center justify-center"},Ae={class:"p-4"},Ve={class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},qe={class:"flex justify-end space-x-2"},Ee=["onClick","disabled"],Ie=["onClick","disabled","title"],Le={key:2,class:"text-center py-12"},Fe={class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},ze={class:"text-gray-600 dark:text-gray-400 mb-4"},Qe={__name:"ProductManager",setup(v){const{language:s}=S(),{currentUser:y}=Y(),{products:u,loadingProducts:$,fetchProducts:D,createProduct:V,updateProduct:q,deleteProduct:E}=W(),f=h(!1),b=h(null),n=h(!1),p=h(null),k=h(!1),m=h(null),x=h({name:""});U(async()=>{y.value?.adminType==="ADMIN"&&await D()}),G(y,l=>{l&&l.adminType==="ADMIN"&&D()},{immediate:!0});const I=async()=>{n.value=!0;try{b.value?await q(b.value.id,x.value):await V(x.value),C()}catch(l){console.error("Error saving product:",l)}finally{n.value=!1}},L=l=>{b.value=l,x.value={name:l.name},f.value=!0},C=()=>{f.value=!1,b.value=null,x.value={name:""}},F=async l=>{m.value=l,k.value=!0},z=async()=>{if(m.value){p.value=m.value.id;try{await E(m.value.id),k.value=!1,m.value=null}catch(l){console.error("Error deleting product:",l)}finally{p.value=null}}},O=()=>{k.value=!1,m.value=null};return(l,g)=>(d(),i("div",ve,[e(y)?.adminType!=="ADMIN"?(d(),i("div",ye,[c(e(P),{class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t("h3",xe,r(e(a)("accessRestricted",e(s))),1),t("p",fe,r(e(a)("onlyAdminsProducts",e(s))),1)])):(d(),i("div",pe,[t("div",_e,[t("h2",ke,r(e(a)("products",e(s))),1),t("button",{onClick:g[0]||(g[0]=o=>f.value=!0),class:"flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"},[c(e(T),{class:"w-4 h-4 mr-2"}),j(" "+r(e(a)("newProduct",e(s))),1)])]),e($)?(d(),i("div",we,[(d(),i(N,null,M(6,o=>t("div",{key:o,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},g[3]||(g[3]=[Q('<div class="h-48 flex items-center justify-center shimmer-strong"><div class="w-16 h-16 rounded-lg shimmer"></div></div><div class="p-4"><div class="h-6 rounded w-3/4 mb-2 shimmer"></div><div class="flex justify-end space-x-2 mt-4"><div class="w-8 h-8 rounded shimmer"></div><div class="w-8 h-8 rounded shimmer"></div></div></div>',2)]))),64))])):(d(),i("div",Pe,[f.value?(d(),i("div",$e,[t("h3",De,r(b.value?e(a)("editProduct",e(s)):e(a)("createNewProduct",e(s))),1),t("form",{onSubmit:K(I,["prevent"]),class:"space-y-4"},[t("div",null,[t("label",Ce,r(e(a)("productName",e(s))),1),H(t("input",{"onUpdate:modelValue":g[1]||(g[1]=o=>x.value.name=o),type:"text",required:"",disabled:n.value,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white disabled:opacity-50 disabled:cursor-not-allowed"},null,8,je),[[J,x.value.name]])]),t("div",Ne,[t("button",{type:"submit",disabled:n.value,class:"flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors space-x-2 disabled:opacity-50 disabled:cursor-not-allowed"},[n.value?(d(),_(e(A),{key:0,class:"w-4 h-4 animate-spin"})):(d(),_(e(P),{key:1,class:"w-4 h-4"})),t("span",null,r(n.value?b.value?e(a)("updatingProduct",e(s)):e(a)("creatingProduct",e(s)):b.value?e(a)("update",e(s)):e(a)("create",e(s)))+" "+r(n.value?"":e(a)("product",e(s))),1)],8,Me),t("button",{type:"button",onClick:C,disabled:n.value,class:"px-4 py-2 bg-gray-300 hover:bg-gray-400 disabled:bg-gray-200 text-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},r(e(a)("cancel",e(s))),9,Te)])],32)])):w("",!0),e(u).length>0?(d(),i("div",Se,[(d(!0),i(N,null,M(e(u),o=>(d(),i("div",{key:o.id,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},[t("div",Be,[c(e(Z),{class:"w-16 h-16 text-blue-500 dark:text-blue-400"})]),t("div",Ae,[t("h3",Ve,r(o.name),1),t("div",qe,[t("button",{onClick:R=>L(o),disabled:n.value||p.value===o.id,class:"p-2 text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[c(e(ee),{class:"w-4 h-4"})],8,Ee),t("button",{onClick:R=>F(o),disabled:n.value||p.value===o.id,class:"p-2 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",title:e(a)("deleteProduct",e(s))},[c(e(B),{class:"w-4 h-4"})],8,Ie)])])]))),128))])):w("",!0),e(u).length===0?(d(),i("div",Le,[c(e(P),{class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t("h3",Fe,r(e(a)("noProductsYet",e(s))),1),t("p",ze,r(e(a)("getStartedProduct",e(s))),1),t("button",{onClick:g[2]||(g[2]=o=>f.value=!0),class:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"},[c(e(T),{class:"w-4 h-4 mr-2"}),j(" "+r(e(a)("createProduct",e(s))),1)])])):w("",!0)]))])),k.value?(d(),_(he,{key:2,product:m.value,"is-deleting":p.value!==null,onConfirm:z,onCancel:O},null,8,["product","is-deleting"])):w("",!0)]))}};export{Qe as default};
