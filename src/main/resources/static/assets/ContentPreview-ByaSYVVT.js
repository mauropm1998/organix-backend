import{r as f,z as oe,y as j,l as ne,d as de,e as le,x as ce,a as c,b as e,f as g,p as m,u as o,t as a,n as F,q as _,s as b,j as E,G as ie,R as ue,i as ge,F as ye,E as xe,H as pe,k as ve,o as i}from"./index-NEpPsdbC.js";import{u as me,c as _e}from"./useData-CoCRTTjc.js";import{E as he,C as ke,a as fe,_ as be}from"./index-MqKNRwmT.js";import{S as we}from"./square-pen-DOWlPt1F.js";import"./userService-Dm1G1Bn4.js";import"./loader-circle-BMnpDFdt.js";import"./plus-CkdgHC_B.js";const De={class:"space-y-6"},Se={class:"flex items-start justify-between flex-wrap gap-4"},Ee={class:"space-y-2"},Ie={class:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-3"},Ne={key:0},Ce={key:1,class:"h-6 w-52 rounded shimmer-block"},Te={key:0,class:"flex flex-wrap gap-2"},je={class:"flex items-center gap-3"},Ae={key:0,class:"space-y-6"},Me={class:"flex flex-col lg:flex-row gap-8"},Oe={class:"flex-1 space-y-5"},Pe={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4"},$e={key:1,class:"p-6 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-300"},Fe={key:2,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Le={class:"lg:col-span-2 space-y-6"},He={class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 space-y-4"},Re={class:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2"},Ue={class:"whitespace-pre-wrap text-sm leading-relaxed text-gray-800 dark:text-gray-200 font-sans bg-gray-50 dark:bg-gray-900/40 p-4 rounded border border-gray-100 dark:border-gray-700 overflow-auto max-h-96"},Be={key:0,class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 space-y-4"},ze={class:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2"},Ge={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},qe={key:0,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 text-center"},Ye={class:"text-[10px] uppercase tracking-wide text-gray-500 dark:text-gray-400 font-medium"},Je={class:"mt-1 text-lg font-semibold text-gray-800 dark:text-gray-100 tabular-nums"},Ke={key:1,class:"border-t border-gray-200 dark:border-gray-700 my-4"},Qe={key:2,class:"space-y-4"},Ve={class:"flex items-center justify-between mb-3"},We={class:"text-sm font-medium text-gray-800 dark:text-gray-200"},Xe={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 text-xs"},Ze={class:"flex flex-col"},et={class:"text-gray-500 dark:text-gray-400"},tt={class:"font-semibold text-gray-800 dark:text-gray-100"},st={class:"flex flex-col"},at={class:"text-gray-500 dark:text-gray-400"},rt={class:"font-semibold text-gray-800 dark:text-gray-100"},ot={class:"flex flex-col"},nt={class:"text-gray-500 dark:text-gray-400"},dt={class:"font-semibold text-gray-800 dark:text-gray-100"},lt={class:"flex flex-col"},ct={class:"text-gray-500 dark:text-gray-400"},it={class:"font-semibold text-gray-800 dark:text-gray-100"},ut={class:"flex flex-col"},gt={class:"text-gray-500 dark:text-gray-400"},yt={class:"font-semibold text-gray-800 dark:text-gray-100"},xt={class:"flex flex-col"},pt={class:"text-gray-500 dark:text-gray-400"},vt={class:"font-semibold text-gray-800 dark:text-gray-100"},mt={key:3,class:"text-sm text-gray-500 dark:text-gray-400"},_t={class:"space-y-6"},ht={class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 space-y-4"},kt={class:"text-sm font-semibold tracking-wide text-gray-500 dark:text-gray-400 uppercase"},ft={class:"space-y-3 text-sm"},bt={class:"flex justify-between gap-4"},wt={class:"text-gray-500 dark:text-gray-400"},Dt={class:"text-gray-800 dark:text-gray-200 font-medium"},St={key:0,class:"flex justify-between gap-4"},Et={class:"text-gray-500 dark:text-gray-400"},It={class:"text-gray-800 dark:text-gray-200 font-medium"},Nt={key:1,class:"flex justify-between gap-4"},Ct={class:"text-gray-500 dark:text-gray-400"},Tt={class:"text-gray-800 dark:text-gray-200 font-medium"},jt={key:2,class:"flex justify-between gap-4"},At={class:"text-gray-500 dark:text-gray-400"},Mt={class:"text-gray-800 dark:text-gray-200 font-medium"},Ot={key:3,class:"flex justify-between gap-4"},Pt={class:"text-gray-500 dark:text-gray-400"},$t={class:"text-gray-800 dark:text-gray-200 font-medium"},Ft={class:"flex justify-between gap-4"},Lt={class:"text-gray-500 dark:text-gray-400"},Ht={class:"text-gray-800 dark:text-gray-200 font-medium"},Rt={class:"flex justify-between gap-4"},Ut={class:"text-gray-500 dark:text-gray-400"},Bt={class:"text-gray-800 dark:text-gray-200 font-medium"},zt={key:4,class:"flex justify-between gap-4"},Gt={class:"text-gray-500 dark:text-gray-400"},qt={class:"text-gray-800 dark:text-gray-200 font-medium"},Yt={class:"flex justify-between gap-4"},Jt={class:"text-gray-800 dark:text-gray-200 font-mono text-xs tracking-wide"},Kt={class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6"},Qt={class:"text-sm font-semibold tracking-wide text-gray-500 dark:text-gray-400 uppercase flex items-center gap-2 mb-4"},Vt={key:0,class:"space-y-4 list-none m-0 p-0"},Wt={class:"flex flex-col items-center self-stretch"},Xt={key:0,class:"flex-1 w-px bg-gray-200 dark:bg-gray-700 mt-1"},Zt={class:"flex-1 min-w-0"},es={class:"flex flex-wrap items-center gap-2 text-xs font-medium text-gray-800 dark:text-gray-200"},ts=["title"],ss={class:"flex flex-wrap items-center gap-1"},as={key:0,class:"text-gray-500 dark:text-gray-400"},rs={key:1,class:"text-gray-400"},os={class:"text-[10px] text-gray-500 dark:text-gray-400 mt-1"},ns={key:1,class:"text-xs text-gray-500 dark:text-gray-400 flex flex-col items-start gap-3 leading-normal"},ds={class:"flex items-center gap-3"},ls={class:"space-y-0.5"},cs={class:"font-medium text-gray-700 dark:text-gray-300 leading-snug"},is={class:"text-[11px] text-gray-500 dark:text-gray-400 leading-snug"},hs={__name:"ContentPreview",setup(us){const L=pe();ve();const{currentUser:w}=ne(),{language:n}=le(),l=(r,s=n.value)=>de(r,s),{products:A,channels:M,users:O,fetchProducts:H,fetchChannels:R,fetchUsers:U,updateContent:B}=me(),t=f(null),I=f(!0),D=f(""),S=f(!1),N=f(!1),u=oe({name:"",type:"",content:"",product:"",creator:"",producer:"",status:"PENDING",postDate:"",channels:[],productionStartDate:"",productionEndDate:""}),z=fe,G=ke,q=j(()=>!t.value||!w.value?!1:w.value.adminType==="ADMIN"||[t.value.creatorId,t.value.producerId].includes(w.value.id)),Y=r=>({PENDING:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",IN_PRODUCTION:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",POSTED:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",FINISHED:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",CANCELED:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"})[r]||"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300",J=r=>({PENDING:"bg-yellow-400",IN_PRODUCTION:"bg-blue-500",POSTED:"bg-green-500",FINISHED:"bg-purple-500",CANCELED:"bg-red-500"})[r]||"bg-gray-400",K=j(()=>{if(!t.value?.metrics)return!1;const{views:r,likes:s,comments:d,shares:y,reach:x,engagement:p}=t.value.metrics;return[r,s,d,y,x,p].some(v=>typeof v=="number")}),Q=j(()=>{if(!t.value?.metrics)return[];const r=t.value.metrics;return[{key:"views",label:l("views",n.value),value:r.views??0},{key:"likes",label:l("likes",n.value),value:r.likes??0},{key:"comments",label:l("comments",n.value),value:r.comments??0},{key:"shares",label:l("shares",n.value),value:r.shares??0},{key:"reach",label:l("reach",n.value),value:r.reach??0},{key:"engagement",label:l("engagement",n.value),value:r.engagement??0}]});function V(r){return A.value?.find(s=>s.id===r)?.name||"-"}function P(r){return O.value?.find(s=>s.id===r)?.name||"-"}function W(r){return M.value?.find(s=>s.id===r)?.name||r}function h(r){if(!r)return"";let s;if(Array.isArray(r)){const[y,x,p,v=0,k=0]=r;s=new Date(y,x-1,p,v,k)}else s=new Date(r);const d=n.value==="pt"?"pt-PT":"en-US";return s.toLocaleString(d,{dateStyle:"medium",timeStyle:"short"})}function C(r){if(!r)return"";let s;if(Array.isArray(r)){const[k,te,se,ae=0,re=0]=r;s=new Date(k,te-1,se,ae,re)}else s=new Date(r);const d=s.getFullYear(),y=String(s.getMonth()+1).padStart(2,"0"),x=String(s.getDate()).padStart(2,"0"),p=String(s.getHours()).padStart(2,"0"),v=String(s.getMinutes()).padStart(2,"0");return`${d}-${y}-${x}T${p}:${v}`}function T(r){if(!r)return;const s=new Date(r),d=s.getFullYear(),y=String(s.getMonth()+1).padStart(2,"0"),x=String(s.getDate()).padStart(2,"0"),p=String(s.getHours()).padStart(2,"0"),v=String(s.getMinutes()).padStart(2,"0"),k=String(s.getSeconds()).padStart(2,"0");return`${d}-${y}-${x}T${p}:${v}:${k}`}async function $(){I.value=!0,D.value="";try{await Promise.all([H(),R(),U()]);const r=L.params.id,s=await _e.getContentById(r);t.value=s,console.log(t.value)}catch(r){D.value=r?.response?.data?.message||r.message||"Erro ao carregar conteúdo"}finally{I.value=!1}}function X(){t.value&&(Object.assign(u,{name:t.value.name,type:t.value.type,content:t.value.content,product:t.value.productId,creator:t.value.creatorId,producer:t.value.producerId,status:t.value.status,postDate:C(t.value.postDate),channels:t.value.channels?.map(r=>r.id)||[],productionStartDate:t.value.productionStartDate?C(t.value.productionStartDate):"",productionEndDate:t.value.productionEndDate?C(t.value.productionEndDate):""}),S.value=!0)}function Z(){S.value=!1}async function ee(){if(t.value){N.value=!0;try{const r={name:u.name,type:u.type,content:u.content,productId:u.product,postDate:T(u.postDate),channelIds:u.channels,status:u.status,producerId:u.producer,creatorId:u.creator};u.status==="IN_PRODUCTION"&&(u.productionStartDate&&(r.productionStartDate=T(u.productionStartDate)),u.productionEndDate&&(r.productionEndDate=T(u.productionEndDate))),await B(t.value.id,r),S.value=!1,await $()}catch(r){console.error(r),alert(r?.response?.data?.message||r.message||"Erro ao atualizar")}finally{N.value=!1}}}return ce($),(r,s)=>(i(),c("div",De,[e("div",Se,[e("div",Ee,[e("h1",Ie,[m(o(he),{class:"w-6 h-6 text-blue-600 dark:text-blue-400"}),t.value?(i(),c("span",Ne,a(t.value.name),1)):(i(),c("span",Ce)),t.value?(i(),c("span",{key:2,class:F(["text-xs px-2 py-1 rounded-full font-medium",Y(t.value.status)])},a(l(t.value.status,o(n).value)),3)):g("",!0)]),t.value?.channels?.length?(i(),c("div",Te,[(i(!0),c(_,null,b(t.value.channels,d=>(i(),c("span",{key:d.id,class:"px-2 py-1 text-xs rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"},a(d.name),1))),128))])):g("",!0)]),e("div",je,[t.value&&q.value?(i(),c("button",{key:0,onClick:X,class:"inline-flex items-center px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm rounded-lg transition-colors"},[m(o(we),{class:"w-4 h-4 mr-2"}),E(" "+a(l("edit",o(n).value)),1)])):g("",!0),m(o(ue),{to:{name:"ContentManager"},class:"inline-flex items-center px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 text-sm rounded-lg transition-colors"},{default:ie(()=>[E(a(l("back",o(n).value)),1)]),_:1})])]),I.value?(i(),c("div",Ae,[s[6]||(s[6]=e("div",{class:"h-7 w-1/3 rounded shimmer-block"},null,-1)),e("div",Me,[e("div",Oe,[s[0]||(s[0]=e("div",{class:"h-5 w-2/3 rounded shimmer-block"},null,-1)),s[1]||(s[1]=e("div",{class:"h-40 rounded shimmer-block"},null,-1)),s[2]||(s[2]=e("div",{class:"h-5 w-1/4 rounded shimmer-block"},null,-1)),e("div",Pe,[(i(),c(_,null,b(6,d=>e("div",{key:d,class:"h-16 rounded shimmer-block"})),64))]),s[3]||(s[3]=e("div",{class:"h-5 w-40 rounded shimmer-block"},null,-1)),s[4]||(s[4]=e("div",{class:"h-24 rounded shimmer-block"},null,-1))]),s[5]||(s[5]=ge('<div class="w-full lg:w-80 space-y-4"><div class="h-5 w-1/2 rounded shimmer-block"></div><div class="h-32 rounded shimmer-block"></div><div class="h-5 w-2/3 rounded shimmer-block"></div><div class="h-48 rounded shimmer-block"></div></div>',1))])])):D.value?(i(),c("div",$e,a(D.value),1)):t.value?(i(),c("div",Fe,[e("div",Le,[e("section",He,[e("h2",Re,[m(o(ye),{class:"w-5 h-5 text-gray-400"}),E(" "+a(l("content",o(n).value)),1)]),e("pre",Ue,a(t.value.content),1)]),t.value.status==="POSTED"?(i(),c("section",Be,[e("h2",ze,[m(o(xe),{class:"w-5 h-5 text-gray-400"}),E(" "+a(l("metrics",o(n).value)),1)]),t.value.metrics?(i(),c(_,{key:1},[K.value?(i(),c("div",qe,[(i(!0),c(_,null,b(Q.value,d=>(i(),c("div",{key:d.key,class:"p-3 rounded bg-gray-50 dark:bg-gray-900/40 border border-gray-100 dark:border-gray-700"},[e("div",Ye,a(d.label),1),e("div",Je,a(d.value),1)]))),128))])):g("",!0),t.value.metrics.channelMetrics?.length?(i(),c("div",Ke)):g("",!0),t.value.metrics.channelMetrics?.length?(i(),c("div",Qe,[(i(!0),c(_,null,b(t.value.metrics.channelMetrics,d=>(i(),c("div",{key:d.channelId,class:"p-4 rounded border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/40"},[e("div",Ve,[e("h3",We,a(W(d.channelId)),1)]),e("div",Xe,[e("div",Ze,[e("span",et,a(l("likes",o(n).value)),1),e("span",tt,a(d.likes),1)]),e("div",st,[e("span",at,a(l("comments",o(n).value)),1),e("span",rt,a(d.comments),1)]),e("div",ot,[e("span",nt,a(l("shares",o(n).value)),1),e("span",dt,a(d.shares),1)]),e("div",lt,[e("span",ct,a(l("postClicks",o(n).value)),1),e("span",it,a(d.postClicks),1)]),e("div",ut,[e("span",gt,a(l("siteVisits",o(n).value)),1),e("span",yt,a(d.siteVisits),1)]),e("div",xt,[e("span",pt,a(l("newAccounts",o(n).value)),1),e("span",vt,a(d.newAccounts),1)])])]))),128))])):(i(),c("div",mt,a(l("noChannelMetrics",o(n).value)),1))],64)):(i(),c("div",Ge,a(l("noMetrics",o(n).value)),1))])):g("",!0)]),e("aside",_t,[e("section",ht,[e("h2",kt,a(l("details",o(n).value)),1),e("dl",ft,[e("div",bt,[e("dt",wt,a(l("type",o(n).value)),1),e("dd",Dt,a(l(`contentTypes.${t.value.type}`,o(n).value)),1)]),t.value.productId?(i(),c("div",St,[e("dt",Et,a(l("product",o(n).value)),1),e("dd",It,a(V(t.value.productId)),1)])):g("",!0),t.value.creatorName||t.value.creatorId?(i(),c("div",Nt,[e("dt",Ct,a(l("creator",o(n).value)),1),e("dd",Tt,a(t.value.creatorName||P(t.value.creatorId)),1)])):g("",!0),t.value.producerName||t.value.producerId?(i(),c("div",jt,[e("dt",At,a(l("producer",o(n).value)),1),e("dd",Mt,a(t.value.producerName||P(t.value.producerId)),1)])):g("",!0),t.value.creationDate?(i(),c("div",Ot,[e("dt",Pt,a(l("createdAt",o(n).value)),1),e("dd",$t,a(h(t.value.creationDate)),1)])):g("",!0),e("div",Ft,[e("dt",Lt,a(l("productionStartDate",o(n).value)),1),e("dd",Ht,a(t.value.productionStartDate?h(t.value.productionStartDate):"—"),1)]),e("div",Rt,[e("dt",Ut,a(l("productionEndDate",o(n).value)),1),e("dd",Bt,a(t.value.productionEndDate?h(t.value.productionEndDate):"—"),1)]),t.value.postDate?(i(),c("div",zt,[e("dt",Gt,a(l("postDate",o(n).value)),1),e("dd",qt,a(h(t.value.postDate)),1)])):g("",!0),e("div",Yt,[s[7]||(s[7]=e("dt",{class:"text-gray-500 dark:text-gray-400"},"Meta Ads ID",-1)),e("dd",Jt,a(t.value.metaAdsId||"—"),1)])])]),e("section",Kt,[e("h2",Qt,a(l("history",o(n).value)),1),t.value.history&&t.value.history.length?(i(),c("ol",Vt,[(i(!0),c(_,null,b(t.value.history,(d,y)=>(i(),c("li",{key:d.changedAt+(d.newStatus||""),class:"flex items-start gap-4"},[e("div",Wt,[e("span",{class:F(["w-3 h-3 rounded-full ring-4 ring-white dark:ring-gray-800",J(d.newStatus)])},null,2),y<t.value.history.length-1?(i(),c("span",Xt)):g("",!0)]),e("div",Zt,[e("div",es,[e("span",{class:"truncate max-w-[140px]",title:d.userName},a(d.userName),9,ts),s[8]||(s[8]=e("span",{class:"text-gray-400"},"•",-1)),e("span",ss,[d.previousStatus?(i(),c("span",as,a(l(d.previousStatus,o(n).value)),1)):g("",!0),d.previousStatus?(i(),c("span",rs,"→")):g("",!0),e("span",null,a(l(d.newStatus,o(n).value)),1)])]),e("div",os,a(h(d.changedAt)),1)])]))),128))])):(i(),c("div",ns,[e("div",ds,[s[9]||(s[9]=e("div",{class:"w-8 h-8 aspect-square rounded-full bg-gray-100 dark:bg-gray-700 inline-flex items-center justify-center flex-none shrink-0"},[e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor","stroke-width":"1.5",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",ls,[e("div",cs,a(l("noHistoryTitle",o(n).value)),1),e("div",is,a(l("noHistoryDesc",o(n).value)),1)])])]))])])])):g("",!0),m(be,{show:S.value,"form-data":u,"editing-content":t.value,products:o(A),users:o(O),channels:o(M),"content-types":o(z),"content-statuses":o(G),t:l,language:o(n).value,user:o(w),"is-submitting":N.value,onCancel:Z,onSubmit:ee},null,8,["show","form-data","editing-content","products","users","channels","content-types","content-statuses","language","user","is-submitting"])]))}};export{hs as default};
