import{a as i,o as d,b as t,p as c,u as e,t as r,d as s,e as S,P,h as k,r as m,x as U,l as Y,A as G,f as w,j,q as N,s as M,g as H,v as J,w as K,i as Q}from"./index-DREGtBfx.js";import{u as W}from"./useData-BrohWoT6.js";import{a as X,T as A,P as T,S as Z}from"./triangle-alert-BMArtJVk.js";import{L as B}from"./loader-circle-pXTdhc2I.js";import{B as ee}from"./box-DL5tKtp-.js";import"./userService-CKXDl8V0.js";const te={class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50"},ae={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4 transform transition-all"},se={class:"p-6"},re={class:"flex items-center mb-4"},de={class:"flex-shrink-0 w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center mr-3"},le={class:"text-lg font-medium text-gray-900 dark:text-white"},oe={class:"mb-6"},ie={class:"text-gray-600 dark:text-gray-400"},ne={class:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600"},ce={class:"flex items-center"},ue={class:"text-sm font-medium text-gray-900 dark:text-white truncate"},ge={class:"flex space-x-3 justify-end"},be=["disabled"],ye=["disabled"],me={__name:"DeleteProductModal",props:{product:{type:Object,required:!0},isDeleting:{type:Boolean,default:!1}},emits:["confirm","cancel"],setup(v){const{language:a}=S();return(h,u)=>(d(),i("div",te,[t("div",ae,[t("div",se,[t("div",re,[t("div",de,[c(e(X),{class:"w-5 h-5 text-red-600 dark:text-red-400"})]),t("div",null,[t("h3",le,r(e(s)("confirmDeletion",e(a))),1)])]),t("div",oe,[t("p",ie,r(e(s)("confirmDeleteProduct",e(a))),1),t("div",ne,[t("div",ce,[c(e(P),{class:"w-4 h-4 text-gray-500 dark:text-gray-400 mr-2 flex-shrink-0"}),t("span",ue,r(v.product?.name),1)])])]),t("div",ge,[t("button",{onClick:u[0]||(u[0]=$=>h.$emit("cancel")),disabled:v.isDeleting,class:"px-4 py-2 bg-gray-200 hover:bg-gray-300 disabled:bg-gray-100 text-gray-700 dark:bg-gray-600 dark:hover:bg-gray-500 dark:disabled:bg-gray-700 dark:text-gray-300 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},r(e(s)("cancel",e(a))),9,be),t("button",{onClick:u[1]||(u[1]=$=>h.$emit("confirm")),disabled:v.isDeleting,class:"flex items-center px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white rounded-lg transition-colors space-x-2 disabled:opacity-50 disabled:cursor-not-allowed"},[v.isDeleting?(d(),k(e(B),{key:0,class:"w-4 h-4 animate-spin"})):(d(),k(e(A),{key:1,class:"w-4 h-4"})),t("span",null,r(v.isDeleting?e(s)("deleting",e(a)):e(s)("delete",e(a))),1)],8,ye)])])])]))}},ve={class:"space-y-6"},he={key:0,class:"text-center py-12"},xe={class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},fe={class:"text-gray-600 dark:text-gray-400"},pe={key:1},ke={class:"flex justify-between items-center"},_e={class:"text-2xl font-bold text-gray-900 dark:text-white"},we={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6"},Pe={key:1},$e={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mt-6"},De={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},Ce={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},je=["disabled"],Ne={class:"flex space-x-3"},Me=["disabled"],Te=["disabled"],Se={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6"},Ae={class:"h-48 bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-700 dark:to-gray-600 flex items-center justify-center"},Be={class:"p-4"},Ve={class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},qe={class:"flex justify-end space-x-2"},Ee=["onClick","disabled"],Ie=["onClick","disabled","title"],Le={key:2,class:"text-center py-12"},Fe={class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},ze={class:"text-gray-600 dark:text-gray-400 mb-4"},Je={__name:"ProductManager",setup(v){const{language:a}=S(),{currentUser:h}=Y(),{products:u,loadingProducts:$,fetchProducts:D,createProduct:V,updateProduct:q,deleteProduct:E}=W(),f=m(!1),b=m(null),n=m(!1),p=m(null),_=m(!1),y=m(null),x=m({name:""});U(async()=>{h.value?.adminType==="ADMIN"&&await D()}),G(h,l=>{l&&l.adminType==="ADMIN"&&D()},{immediate:!0});const I=async()=>{n.value=!0;try{b.value?await q(b.value.id,x.value):await V(x.value),C()}catch(l){console.error("Error saving product:",l)}finally{n.value=!1}},L=l=>{b.value=l,x.value={name:l.name},f.value=!0},C=()=>{f.value=!1,b.value=null,x.value={name:""}},F=async l=>{y.value=l,_.value=!0},z=async()=>{if(y.value){p.value=y.value.id;try{await E(y.value.id),_.value=!1,y.value=null}catch(l){console.error("Error deleting product:",l)}finally{p.value=null}}},O=()=>{_.value=!1,y.value=null};return(l,g)=>(d(),i("div",ve,[e(h)?.adminType!=="ADMIN"?(d(),i("div",he,[c(e(P),{class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t("h3",xe,r(e(s)("accessRestricted",e(a))),1),t("p",fe,r(e(s)("onlyAdminsProducts",e(a))),1)])):(d(),i("div",pe,[t("div",ke,[t("h2",_e,r(e(s)("products",e(a))),1),t("button",{onClick:g[0]||(g[0]=o=>f.value=!0),class:"flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"},[c(e(T),{class:"w-4 h-4 mr-2"}),j(" "+r(e(s)("newProduct",e(a))),1)])]),e($)?(d(),i("div",we,[(d(),i(N,null,M(6,o=>t("div",{key:o,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden animate-pulse"},g[3]||(g[3]=[Q('<div class="h-48 bg-gray-200 dark:bg-gray-700 flex items-center justify-center"><div class="w-16 h-16 bg-gray-300 dark:bg-gray-600 rounded-lg"></div></div><div class="p-4"><div class="h-6 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"></div><div class="flex justify-end space-x-2 mt-4"><div class="w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded"></div><div class="w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded"></div></div></div>',2)]))),64))])):(d(),i("div",Pe,[f.value?(d(),i("div",$e,[t("h3",De,r(b.value?e(s)("editProduct",e(a)):e(s)("createNewProduct",e(a))),1),t("form",{onSubmit:K(I,["prevent"]),class:"space-y-4"},[t("div",null,[t("label",Ce,r(e(s)("productName",e(a))),1),H(t("input",{"onUpdate:modelValue":g[1]||(g[1]=o=>x.value.name=o),type:"text",required:"",disabled:n.value,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white disabled:opacity-50 disabled:cursor-not-allowed"},null,8,je),[[J,x.value.name]])]),t("div",Ne,[t("button",{type:"submit",disabled:n.value,class:"flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors space-x-2 disabled:opacity-50 disabled:cursor-not-allowed"},[n.value?(d(),k(e(B),{key:0,class:"w-4 h-4 animate-spin"})):(d(),k(e(P),{key:1,class:"w-4 h-4"})),t("span",null,r(n.value?b.value?e(s)("updatingProduct",e(a)):e(s)("creatingProduct",e(a)):b.value?e(s)("update",e(a)):e(s)("create",e(a)))+" "+r(n.value?"":e(s)("product",e(a))),1)],8,Me),t("button",{type:"button",onClick:C,disabled:n.value,class:"px-4 py-2 bg-gray-300 hover:bg-gray-400 disabled:bg-gray-200 text-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},r(e(s)("cancel",e(a))),9,Te)])],32)])):w("",!0),e(u).length>0?(d(),i("div",Se,[(d(!0),i(N,null,M(e(u),o=>(d(),i("div",{key:o.id,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},[t("div",Ae,[c(e(ee),{class:"w-16 h-16 text-blue-500 dark:text-blue-400"})]),t("div",Be,[t("h3",Ve,r(o.name),1),t("div",qe,[t("button",{onClick:R=>L(o),disabled:n.value||p.value===o.id,class:"p-2 text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[c(e(Z),{class:"w-4 h-4"})],8,Ee),t("button",{onClick:R=>F(o),disabled:n.value||p.value===o.id,class:"p-2 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",title:e(s)("deleteProduct",e(a))},[c(e(A),{class:"w-4 h-4"})],8,Ie)])])]))),128))])):w("",!0),e(u).length===0?(d(),i("div",Le,[c(e(P),{class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t("h3",Fe,r(e(s)("noProductsYet",e(a))),1),t("p",ze,r(e(s)("getStartedProduct",e(a))),1),t("button",{onClick:g[2]||(g[2]=o=>f.value=!0),class:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"},[c(e(T),{class:"w-4 h-4 mr-2"}),j(" "+r(e(s)("createProduct",e(a))),1)])])):w("",!0)]))])),_.value?(d(),k(me,{key:2,product:y.value,"is-deleting":p.value!==null,onConfirm:z,onCancel:O},null,8,["product","is-deleting"])):w("",!0)]))}};export{Je as default};
