import{c as rt,r as p,A as B,a as c,o as i,b as e,p as g,u as s,t as a,d as j,e as Ce,F as De,h as $,z as lt,l as nt,x as dt,k as it,y as se,E as ct,f as m,j as oe,n as ge,g as _,B as V,q as f,s as k,w as ut,v as ae,T as _e,D as gt,G as pt,H as yt,R as mt}from"./index-BIWjYgpL.js";import{i as bt,c as ht,C as pe,a as xt,_ as vt,E as ft}from"./index-DYmWQXF8.js";import{u as _t}from"./useData-BYI3NWwh.js";import{_ as y}from"./SkeletonLoader-D2Q4n78C.js";import{a as kt,T as Ie}from"./triangle-alert-CK9bSMzs.js";import{L as ye}from"./loader-circle-Z6pSUaYO.js";import{P as ke}from"./plus-DkhhKbo2.js";import{A as we}from"./arrow-right-VGISIxQE.js";import{B as wt}from"./box-D5q0mncx.js";import"./userService-D4f8HJ4u.js";/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=rt("circle-arrow-right",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}],["path",{d:"M8 12h8",key:"1wcyev"}]]),Dt={class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50"},It={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4 transform transition-all"},St={class:"p-6"},Et={class:"flex items-center mb-4"},Nt={class:"flex-shrink-0 w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center mr-3"},Pt={class:"text-lg font-medium text-gray-900 dark:text-white"},Tt={class:"mb-6"},At={class:"text-gray-600 dark:text-gray-400"},Ot={class:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600"},$t={class:"flex items-center"},Ft={class:"flex-1 min-w-0"},Mt={class:"text-sm font-medium text-gray-900 dark:text-white truncate block"},Ut={class:"text-xs text-gray-500 dark:text-gray-400"},Vt={class:"flex justify-end space-x-3"},jt=["disabled"],Rt={__name:"DeleteContentModal",props:{content:{type:Object,required:!0}},emits:["close","delete"],setup(Q,{emit:n}){const b=Q,Y=n,{language:h}=Ce(),C=p(!1);function K(w){if(!w)return"N/A";const S=`contentTypes.${w.toLowerCase()}`,E=j(S,h.value);return E!==S?E:w}const I=async()=>{if(!(!b.content||C.value)){C.value=!0;try{Y("delete",b.content.id)}catch(w){console.error("Error deleting content:",w),C.value=!1}}};return B(()=>b.content,w=>{w||(C.value=!1)}),(w,S)=>(i(),c("div",Dt,[e("div",It,[e("div",St,[e("div",Et,[e("div",Nt,[g(s(kt),{class:"w-5 h-5 text-red-600 dark:text-red-400"})]),e("div",null,[e("h3",Pt,a(s(j)("confirmDeletion",s(h))),1)])]),e("div",Tt,[e("p",At,a(s(j)("confirmDeleteContent",s(h))),1),e("div",Ot,[e("div",$t,[g(s(De),{class:"w-4 h-4 text-gray-500 dark:text-gray-400 mr-2 flex-shrink-0"}),e("div",Ft,[e("span",Mt,a(Q.content?.name),1),e("span",Ut,a(K(Q.content?.type)),1)])])])]),e("div",Vt,[e("button",{type:"button",onClick:S[0]||(S[0]=E=>w.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"},a(s(j)("cancel",s(h))),1),e("button",{type:"button",onClick:I,disabled:C.value,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2"},[C.value?(i(),$(s(ye),{key:0,class:"w-4 h-4 animate-spin"})):(i(),$(s(Ie),{key:1,class:"w-4 h-4"})),e("span",null,a(C.value?s(j)("deleting",s(h)):s(j)("delete",s(h))),1)],8,jt)])])])]))}},Lt={class:"space-y-6"},zt={class:"flex justify-between items-center"},Bt={class:"text-2xl font-bold text-gray-900 dark:text-white"},Ht={key:0},Gt={class:"flex space-x-3"},qt=["disabled"],Jt={key:0,class:"ml-1 text-xs"},Qt={class:"flex space-x-4"},Yt={value:""},Kt=["value"],Wt=["disabled"],Xt={value:""},Zt={key:0,disabled:""},es=["value"],ts=["disabled"],ss={value:""},os={key:0,disabled:""},as=["value"],rs={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[9999] p-4"},ls={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[calc(100vh-2rem)] overflow-y-auto"},ns={class:"p-6"},ds={class:"flex items-center mb-4"},is={class:"flex-shrink-0 w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/20 flex items-center justify-center mr-3"},cs={class:"text-lg font-medium text-gray-900 dark:text-white"},us={class:"mb-6"},gs={class:"text-gray-600 dark:text-gray-400 mb-4"},ps={key:0,class:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600 mb-4"},ys={class:"flex items-center"},ms={class:"min-w-0 flex-1"},bs={class:"text-sm font-medium text-gray-900 dark:text-white block truncate"},hs={class:"text-xs text-gray-500 dark:text-gray-400"},xs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},vs=["disabled"],fs={value:null},_s=["value"],ks={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ws={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Cs=["disabled"],Ds={value:""},Is=["value"],Ss={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Es=["disabled"],Ns={value:""},Ps=["value"],Ts={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},As={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Os=["disabled"],$s={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Fs=["disabled"],Ms=["value"],Us={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Vs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},js=["disabled"],Rs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Ls=["disabled"],zs={key:1},Bs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Hs=["disabled","placeholder"],Gs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},qs={class:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-32 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-lg p-3"},Js=["id","value","disabled"],Qs=["for"],Ys={key:0,class:"text-xs text-red-500 mt-1"},Ks={class:"flex flex-col sm:flex-row gap-3 sm:justify-end pt-4 border-t border-gray-200 dark:border-gray-600"},Ws=["disabled"],Xs=["disabled"],Zs={key:0,class:"space-y-6"},eo={class:"overflow-x-auto"},to={class:"w-full border border-gray-200 dark:border-gray-700 rounded-lg"},so={class:"bg-gray-50 dark:bg-gray-700"},oo={class:"px-6 py-3 text-left"},ao={class:"px-6 py-3 text-left"},ro={class:"px-6 py-3 text-left"},lo={class:"px-6 py-3 text-left"},no={class:"px-6 py-3 text-left"},io={class:"px-6 py-3 text-left"},co={class:"px-6 py-3 text-right"},uo={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},go={class:"px-6 py-4"},po={class:"px-6 py-4"},yo={class:"px-6 py-4"},mo={class:"px-6 py-4"},bo={class:"px-6 py-4"},ho={class:"px-6 py-4"},xo={class:"flex flex-wrap gap-1"},vo={class:"px-6 py-4"},fo={class:"flex items-center justify-end space-x-2"},_o={key:1,class:"overflow-x-auto"},ko={class:"w-full border border-gray-200 dark:border-gray-700 rounded-lg"},wo={class:"bg-gray-50 dark:bg-gray-700"},Co={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Do={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Io={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},So={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Eo={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},No={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Po={class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},To={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Ao={class:"px-6 py-4 whitespace-nowrap"},Oo={class:"text-xs font-mono text-gray-500 dark:text-gray-400"},$o={class:"px-6 py-4"},Fo={class:"text-sm font-medium text-gray-900 dark:text-white"},Mo={class:"px-6 py-4 whitespace-nowrap"},Uo={class:"text-sm text-gray-500 dark:text-gray-400"},Vo={class:"px-6 py-4 whitespace-nowrap"},jo={class:"text-sm text-gray-500 dark:text-gray-400"},Ro={class:"px-6 py-4 whitespace-nowrap"},Lo=["value","onChange"],zo={value:"PENDING"},Bo={value:"IN_PRODUCTION"},Ho={value:"POSTED"},Go={value:"PRODUCTION_FINISHED"},qo={value:"FINISHED"},Jo={value:"CANCELED"},Qo={class:"px-6 py-4 whitespace-nowrap"},Yo={class:"text-sm text-gray-500 dark:text-gray-400"},Ko={class:"px-6 py-4"},Wo={class:"flex flex-wrap gap-1"},Xo={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Zo={class:"flex items-center justify-end space-x-2"},ea=["onClick","title"],ta=["onClick"],sa={key:0,class:"flex items-center justify-between mt-4 flex-wrap gap-3"},oa={class:"text-sm text-gray-600 dark:text-gray-400"},aa={class:"flex items-center space-x-2"},ra=["disabled"],la=["disabled"],na={key:2,class:"text-center py-12"},da={class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},ia={class:"text-gray-600 dark:text-gray-400 mb-4"},ca={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-[9999]"},ua={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[calc(100vh-2rem)] overflow-y-auto"},ga={class:"p-6"},pa={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},ya={class:"space-y-6"},ma={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},ba={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4"},ha={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},xa=["value","onInput"],va={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},fa=["value","onInput"],_a={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ka=["value","onInput"],wa={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Ca=["value","onInput"],Da={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Ia=["value","onInput"],Sa={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Ea=["value","onInput"],Na={class:"flex space-x-3 mt-6"},Pa=["disabled"],Ta=["disabled"],z="contentManagerFilters",za={__name:"ContentManager",setup(Q){const{language:n}=Ce(),{currentUser:b}=nt(),{content:Y,products:h,users:C,drafts:K,channels:I,loadingChannels:w,loadingContent:S,fetchContent:E,fetchProducts:Se,fetchUsers:Ee,fetchDrafts:Ne,fetchChannels:Pe,createContent:Te,updateContent:Ae,updateContentStatus:Oe,updateContentChannelMetrics:$e,deleteContent:Fe,transformDraftToContent:Me}=_t(),l=o=>j(o,n.value),W=p(!0),X=p(!1),Z=p(!1),H=p(!1),re=p(!1),F=p(null),D=p(null),P=p(null),le=p(null),T=p(""),A=p(""),O=p(""),N=p(0),Ue=p(15),ee=p(0),G=p(1),ne=p(!1),x=p(!1),M=p(!1),v=p({}),me=it(),Ve=()=>{const o={filterStatus:T.value,filterChannel:A.value,filterProduct:O.value,timestamp:Date.now()};o.filterStatus||o.filterChannel||o.filterProduct?(localStorage.setItem(z,JSON.stringify(o)),console.log("ðŸ“ Filtros salvos no localStorage:",o)):(localStorage.removeItem(z),console.log("ðŸ—‘ï¸ Filtros vazios, removidos do localStorage"))},je=()=>{try{const o=localStorage.getItem(z);if(console.log("ðŸ” Procurando filtros no localStorage..."),console.log("ðŸ“¦ Dados encontrados:",o),o){const r=JSON.parse(o);return console.log("ðŸ“‚ Filtros parseados:",r),T.value=r.filterStatus||"",A.value=r.filterChannel||"",O.value=r.filterProduct||"",console.log("âœ… Filtros aplicados:"),console.log("  - Status:",T.value),console.log("  - Channel:",A.value),console.log("  - Product:",O.value),localStorage.removeItem(z),console.log("ðŸ—‘ï¸ Filtros removidos do localStorage apÃ³s carregamento"),!0}else console.log("ðŸš« Nenhum filtro encontrado no localStorage")}catch(o){console.error("âŒ Erro ao carregar filtros do localStorage:",o)}return!1},Re=()=>{localStorage.removeItem(z)},d=lt({name:"",type:"",content:"",product:"",creator:b.value?.id||"",postDate:"",producer:b.value?.id||"",status:"PENDING",channels:[],productionStartDate:"",productionEndDate:"",metaAdsId:""});dt(async()=>{const o=me.currentRoute.value.query,r=o.from==="preview";localStorage.getItem(z);const t=bt();console.log("ðŸš€ ContentManager montado"),console.log("ðŸ“ Query params:",o),console.log("ï¿½ Query params stringified:",JSON.stringify(o)),console.log("ðŸ“ from value:",o.from),console.log("ðŸ“ from type:",typeof o.from),console.log("ï¿½ðŸ” Vindo do preview?",r);let u=!1;r||t?(u=je(),ht(),console.log("ðŸ”„ Vindo do preview (detectado), filtros carregados:",u)):console.log("âšª NÃ£o vindo do preview, nÃ£o carregando filtros"),await Promise.all([Se(),Ee(),Ne(),Pe()]),await te(),W.value=!1});const q=se(()=>!K.value||!b.value?[]:K.value.filter(o=>o.status==="APPROVED")),be=se(()=>!Y.value||!b.value?[]:Y.value),Le=se(()=>be.value),ze=se(()=>N.value+1);B([T,A,O],async([o,r,t],[u,U,J])=>{console.log("ðŸ”„ Filtros alterados:"),console.log("  - Status:",u,"->",o),console.log("  - Channel:",U,"->",r),console.log("  - Product:",J,"->",t),N.value=0,await te(),Ve(),console.log("ï¿½ Filtros salvos automaticamente no localStorage")},{immediate:!1}),B(()=>d.status,o=>{o!=="IN_PRODUCTION"&&(d.productionStartDate="",d.productionEndDate=""),o!=="POSTED"&&(d.metaAdsId="")}),B(D,o=>{o&&o.productId?d.product=o.productId:d.product=""});const te=async()=>{const o={page:N.value,size:Ue.value};T.value&&(o.status=T.value),A.value&&(o.channelId=A.value),O.value&&(o.productId=O.value);const r=await E(o);r&&typeof r=="object"&&(typeof r.totalPages=="number"&&(G.value=r.totalPages),typeof r.totalElements=="number"&&(ee.value=r.totalElements))},Be=async()=>{N.value!==0&&(N.value-=1,await te())},He=async()=>{N.value>=G.value-1||(N.value+=1,await te())},Ge=o=>b.value?.adminType==="ADMIN"||o.creatorId===b.value?.id||o.producerId===b.value?.id,qe=o=>b.value?.adminType==="ADMIN"||o.producerId===b.value?.id,Je=async()=>{console.log("ðŸ”¥ handleSubmit chamado! Iniciando processo de salvamento..."),console.log("ðŸ“ Form Data atual:",JSON.stringify(d,null,2)),console.log("âœï¸ Editing Content:",F.value),ne.value=!0;try{const o={name:d.name,type:d.type,content:d.content,productId:d.product||null,producerId:d.producer||null,status:d.status,postDate:L(d.postDate),productionStartDate:L(d.productionStartDate)||null,productionEndDate:L(d.productionEndDate)||null,metaAdsId:d.metaAdsId||null,channelIds:d.channels};console.log("=== DADOS ENVIADOS AO BACKEND ==="),console.log("OperaÃ§Ã£o:",F.value?"UPDATE":"CREATE"),console.log("Content ID:",F.value?.id||"N/A"),console.log("Content Data:",JSON.stringify(o,null,2)),console.log("====================================="),F.value?await Ae(F.value.id,o):await Te(o),de(),await E()}catch(o){console.error("Error saving content:",o)}finally{ne.value=!1}},he=async()=>{if(D.value){x.value=!0;try{const o={status:d.status,channelIds:d.channels,postDate:L(d.postDate),productId:d.product||null,producerId:d.producer||null};d.status==="IN_PRODUCTION"&&(d.productionStartDate&&(o.productionStartDate=L(d.productionStartDate)),d.productionEndDate&&(o.productionEndDate=L(d.productionEndDate))),d.status==="POSTED"&&d.metaAdsId&&(o.metaAdsId=d.metaAdsId),await Me(D.value.id,o),xe(),await E()}catch(o){console.error("Error transforming draft:",o)}finally{x.value=!1}}},de=()=>{Object.assign(d,{name:"",type:"",content:"",product:"",creator:b.value?.id||"",postDate:"",producer:b.value?.id||"",status:"PENDING",channels:[],productionStartDate:"",productionEndDate:"",metaAdsId:""}),X.value=!1,F.value=null},xe=()=>{Z.value=!1,D.value=null,de()},Qe=async o=>{le.value=o,re.value=!0},ve=()=>{re.value=!1,le.value=null},Ye=async o=>{try{await Fe(o),await E(),ve()}catch(r){console.error("Error deleting content:",r)}},Ke=o=>{P.value=o;const r={};o.channels.forEach(t=>{const u=o.metrics?.channelMetrics?.find(U=>U.channelId===t.id);r[t.id]=u||{likes:0,comments:0,shares:0,postClicks:0,siteVisits:0,newAccounts:0}}),v.value=r,H.value=!0},R=(o,r,t)=>{v.value[o]||(v.value[o]={}),v.value[o][r]=t},We=async()=>{if(P.value){M.value=!0;try{if(Object.keys(v.value).length===0){M.value=!1;return}const o=Object.entries(v.value).map(([t,u])=>({channelId:t.toString(),likes:u.likes||0,comments:u.comments||0,shares:u.shares||0,siteVisits:u.siteVisits||0,newAccounts:u.newAccounts||0,postClicks:u.postClicks||0})),r=await $e(P.value.id,o);r.success?(H.value=!1,P.value=null,v.value={},await E()):alert(`Erro ao atualizar mÃ©tricas: ${r.error}`)}catch(o){console.error("Error updating metrics:",o);const r=o.response?.data?.message||o.message||"Erro ao atualizar mÃ©tricas";alert(`Erro ao atualizar mÃ©tricas: ${r}`)}finally{M.value=!1}}},Xe=async(o,r)=>{try{const t=await Oe(o.id,r);t.success||(console.error("Error updating status:",t.error),alert(`Erro ao atualizar status: ${t.error}`))}catch(t){console.error("Error updating status:",t),alert("Erro ao atualizar status do conteÃºdo")}},Ze=()=>{H.value=!1,P.value=null};B(Z,o=>{o?document.body.style.overflow="hidden":document.body.style.overflow=""}),B(H,o=>{o?document.body.style.overflow="hidden":document.body.style.overflow=""});const et=o=>h.value?.find(t=>t.id===o)?.name||"",ie=o=>{if(!o)return"N/A";const r=`contentTypes.${o.toLowerCase()}`,t=l(r,n.value);return t!==r?t:o},fe=o=>{const r={PENDING:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",IN_PRODUCTION:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",POSTED:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",PRODUCTION_FINISHED:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200",FINISHED:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",CANCELED:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"};return r[o]||r.PENDING},tt=o=>{if(!o)return"";let r;if(Array.isArray(o)){const[J,ce,ue,ot=0,at=0]=o;r=new Date(J,ce-1,ue,ot,at)}else r=new Date(o);const t=n.value==="pt"?"pt-PT":"en-US",u=r.toLocaleDateString(t),U=r.toLocaleTimeString(t,{hour:"2-digit",minute:"2-digit"});return`${u} ${U}`},L=o=>{if(!o)return;const r=new Date(o),t=r.getFullYear(),u=String(r.getMonth()+1).padStart(2,"0"),U=String(r.getDate()).padStart(2,"0"),J=String(r.getHours()).padStart(2,"0"),ce=String(r.getMinutes()).padStart(2,"0"),ue=String(r.getSeconds()).padStart(2,"0");return`${t}-${u}-${U}T${J}:${ce}:${ue}`},st=()=>{console.log("ðŸ‘ï¸ Navegando para preview (filtros jÃ¡ salvos automaticamente)")};return ct(()=>{me.currentRoute.value.name!=="ContentPreview"&&(Re(),console.log("ðŸšª Saindo da pÃ¡gina (nÃ£o para preview), filtros removidos"))}),(o,r)=>(i(),c(f,null,[e("div",Lt,[e("div",zt,[e("h2",Bt,[oe(a(l("content"))+" ",1),ee.value?(i(),c("span",Ht,"("+a(ee.value)+")",1)):m("",!0)]),e("div",Gt,[e("button",{onClick:r[0]||(r[0]=t=>q.value.length>0&&(Z.value=!0)),disabled:q.value.length===0,class:ge(["flex items-center px-4 py-2 rounded-lg transition-colors flex-shrink-0",q.value.length===0?"bg-green-400 cursor-not-allowed opacity-60 text-white":"bg-green-600 hover:bg-green-700 text-white"]),title:"Transformar rascunhos aprovados em conteÃºdo"},[g(s(Ct),{class:"w-4 h-4 mr-2"}),oe(" "+a(l("transformDraft")),1),q.value.length===0?(i(),c("span",Jt,"(0)")):m("",!0)],10,qt),e("button",{onClick:r[1]||(r[1]=t=>X.value=!0),class:"flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"},[g(s(ke),{class:"w-4 h-4 mr-2"}),oe(" "+a(l("newContent")),1)])])]),e("div",Qt,[_(e("select",{"onUpdate:modelValue":r[2]||(r[2]=t=>T.value=t),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[e("option",Yt,a(l("allStatuses")),1),(i(!0),c(f,null,k(s(pe),t=>(i(),c("option",{key:t,value:t},a(l(t)),9,Kt))),128))],512),[[V,T.value]]),_(e("select",{"onUpdate:modelValue":r[3]||(r[3]=t=>A.value=t),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",disabled:!s(I)||s(I).length===0},[e("option",Xt,a(l("allChannels")),1),!s(I)||s(I).length===0?(i(),c("option",Zt,a(s(w)?"Carregando canais...":"Nenhum canal disponÃ­vel"),1)):m("",!0),(i(!0),c(f,null,k(s(I),t=>(i(),c("option",{key:t.id,value:t.id},a(t.name),9,es))),128))],8,Wt),[[V,A.value]]),_(e("select",{"onUpdate:modelValue":r[4]||(r[4]=t=>O.value=t),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",disabled:!s(h)||s(h).length===0},[e("option",ss,a(l("allProducts")),1),!s(h)||s(h).length===0?(i(),c("option",os,a(l("noProductsFound",s(n))),1)):m("",!0),(i(!0),c(f,null,k(s(h),t=>(i(),c("option",{key:t.id,value:t.id},a(t.name),9,as))),128))],8,ts),[[V,O.value]])]),(i(),$(_e,{to:"body"},[Z.value?(i(),c("div",rs,[e("div",ls,[e("div",ns,[e("div",ds,[e("div",is,[g(s(we),{class:"w-5 h-5 text-green-600 dark:text-green-400"})]),e("div",null,[e("h3",cs,a(l("transformDraftToContent",s(n))),1)])]),e("div",us,[e("p",gs,a(l("transformDraftDescription",s(n))),1),D.value?(i(),c("div",ps,[e("div",ys,[g(s(De),{class:"w-4 h-4 text-gray-500 dark:text-gray-400 mr-2 flex-shrink-0"}),e("div",ms,[e("span",bs,a(D.value.name),1),e("span",hs,a(ie(D.value.type)),1)])])])):m("",!0),e("form",{onSubmit:ut(he,["prevent"]),class:"space-y-4"},[e("div",null,[e("label",xs,a(l("selectDraft",s(n)))+" * ",1),_(e("select",{"onUpdate:modelValue":r[5]||(r[5]=t=>D.value=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:"",disabled:x.value},[e("option",fs,a(l("selectApprovedDraft",s(n))),1),(i(!0),c(f,null,k(q.value,t=>(i(),c("option",{key:t.id,value:t},a(t.name)+" - "+a(ie(t.type)),9,_s))),128))],8,vs),[[V,D.value]])]),e("div",ks,[e("div",null,[e("label",ws,a(l("product",s(n))),1),_(e("select",{"onUpdate:modelValue":r[6]||(r[6]=t=>d.product=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:x.value},[e("option",Ds,a(l("selectProduct",s(n))),1),(i(!0),c(f,null,k(s(h),t=>(i(),c("option",{key:t.id,value:t.id},a(t.name),9,Is))),128))],8,Cs),[[V,d.product]])]),e("div",null,[e("label",Ss,a(l("producer",s(n))),1),_(e("select",{"onUpdate:modelValue":r[7]||(r[7]=t=>d.producer=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:x.value},[e("option",Ns,a(l("selectProducer",s(n))),1),(i(!0),c(f,null,k(s(C),t=>(i(),c("option",{key:t.id,value:t.id},a(t.name),9,Ps))),128))],8,Es),[[V,d.producer]])])]),e("div",Ts,[e("div",null,[e("label",As,a(l("postDate",s(n))),1),_(e("input",{type:"datetime-local","onUpdate:modelValue":r[8]||(r[8]=t=>d.postDate=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:x.value},null,8,Os),[[ae,d.postDate]])]),e("div",null,[e("label",$s,a(l("status",s(n))),1),_(e("select",{"onUpdate:modelValue":r[9]||(r[9]=t=>d.status=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:x.value},[(i(!0),c(f,null,k(s(pe),t=>(i(),c("option",{key:t,value:t},a(l(t,s(n))),9,Ms))),128))],8,Fs),[[V,d.status]])])]),d.status==="IN_PRODUCTION"?(i(),c("div",Us,[e("div",null,[e("label",Vs,a(l("productionStartDate",s(n))),1),_(e("input",{"onUpdate:modelValue":r[10]||(r[10]=t=>d.productionStartDate=t),type:"datetime-local",disabled:x.value,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white disabled:opacity-50"},null,8,js),[[ae,d.productionStartDate]])]),e("div",null,[e("label",Rs,a(l("productionEndDate",s(n))),1),_(e("input",{"onUpdate:modelValue":r[11]||(r[11]=t=>d.productionEndDate=t),type:"datetime-local",disabled:x.value,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white disabled:opacity-50"},null,8,Ls),[[ae,d.productionEndDate]])])])):m("",!0),d.status==="POSTED"?(i(),c("div",zs,[e("label",Bs,a(l("metaAdsId",s(n))),1),_(e("input",{"onUpdate:modelValue":r[12]||(r[12]=t=>d.metaAdsId=t),type:"text",disabled:x.value,placeholder:l("enterMetaAdsId",s(n)),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white disabled:opacity-50"},null,8,Hs),[[ae,d.metaAdsId]])])):m("",!0),e("div",null,[e("label",Gs,a(l("channels",s(n)))+" * ",1),e("div",qs,[(i(!0),c(f,null,k(s(I),t=>(i(),c("div",{key:t.id,class:"flex items-center"},[_(e("input",{id:`transform-channel-${t.id}`,type:"checkbox",value:t.id,"onUpdate:modelValue":r[13]||(r[13]=u=>d.channels=u),disabled:x.value,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 disabled:opacity-50"},null,8,Js),[[gt,d.channels]]),e("label",{for:`transform-channel-${t.id}`,class:"ml-2 text-sm text-gray-900 dark:text-gray-300 cursor-pointer truncate"},a(t.name),9,Qs)]))),128))]),d.channels.length===0?(i(),c("p",Ys,a(l("selectAtLeastOneChannel",s(n))),1)):m("",!0)])],32)]),e("div",Ks,[e("button",{type:"button",onClick:xe,disabled:x.value,class:"w-full sm:w-auto px-6 py-2 bg-gray-200 hover:bg-gray-300 disabled:bg-gray-100 text-gray-700 dark:bg-gray-600 dark:hover:bg-gray-500 dark:disabled:bg-gray-700 dark:text-gray-300 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},a(l("cancel",s(n))),9,Ws),e("button",{onClick:he,disabled:x.value||!D.value||d.channels.length===0,class:"w-full sm:w-auto flex items-center justify-center px-6 py-2 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white rounded-lg transition-colors space-x-2 disabled:opacity-50 disabled:cursor-not-allowed"},[x.value?(i(),$(s(ye),{key:0,class:"w-4 h-4 animate-spin"})):(i(),$(s(we),{key:1,class:"w-4 h-4"})),e("span",null,a(x.value?l("transforming",s(n)):l("transformToContent",s(n))),1)],8,Xs)])])])])):m("",!0)])),g(vt,{show:X.value,"form-data":d,"editing-content":F.value,products:s(h),users:s(C),channels:s(I),"content-types":s(xt),"content-statuses":s(pe),t:l,language:s(n).value,user:s(b),"is-submitting":ne.value,onCancel:de,onSubmit:Je},null,8,["show","form-data","editing-content","products","users","channels","content-types","content-statuses","language","user","is-submitting"]),s(S)||W.value?(i(),c("div",Zs,[e("div",eo,[e("table",to,[e("thead",so,[e("tr",null,[e("th",oo,[g(y,{customClass:"h-4 w-16"})]),e("th",ao,[g(y,{customClass:"h-4 w-12"})]),e("th",ro,[g(y,{customClass:"h-4 w-20"})]),e("th",lo,[g(y,{customClass:"h-4 w-16"})]),e("th",no,[g(y,{customClass:"h-4 w-20"})]),e("th",io,[g(y,{customClass:"h-4 w-16"})]),e("th",co,[g(y,{customClass:"h-4 w-16"})])])]),e("tbody",uo,[(i(),c(f,null,k(6,t=>e("tr",{key:t},[e("td",go,[g(y,{customClass:"h-4 w-32 shimmer"})]),e("td",po,[g(y,{customClass:"h-4 w-20 shimmer"})]),e("td",yo,[g(y,{customClass:"h-4 w-24 shimmer"})]),e("td",mo,[g(y,{customClass:"h-6 w-24 rounded-full shimmer"})]),e("td",bo,[g(y,{customClass:"h-4 w-28 shimmer"})]),e("td",ho,[e("div",xo,[g(y,{customClass:"h-5 w-16 rounded-full shimmer"}),g(y,{customClass:"h-5 w-20 rounded-full shimmer"})])]),e("td",vo,[e("div",fo,[g(y,{customClass:"h-8 w-8 rounded shimmer"}),g(y,{customClass:"h-8 w-8 rounded shimmer"}),g(y,{customClass:"h-8 w-8 rounded shimmer"}),g(y,{customClass:"h-8 w-8 rounded shimmer"})])])])),64))])])])])):!s(S)&&!W.value?(i(),c("div",_o,[e("table",ko,[e("thead",wo,[e("tr",null,[r[15]||(r[15]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"Meta Ads ID",-1)),e("th",Co,a(l("name",s(n))),1),e("th",Do,a(l("type",s(n))),1),e("th",Io,a(l("product",s(n))),1),e("th",So,a(l("status",s(n))),1),e("th",Eo,a(l("postDate",s(n))),1),e("th",No,a(l("channels",s(n))),1),e("th",Po,a(l("actions",s(n))),1)])]),e("tbody",To,[(i(!0),c(f,null,k(Le.value,t=>(i(),c("tr",{key:t.id},[e("td",Ao,[e("span",Oo,a(t.metaAdsId||"-"),1)]),e("td",$o,[e("div",Fo,a(t.name),1)]),e("td",Mo,[e("div",Uo,a(ie(t.type)),1)]),e("td",Vo,[e("div",jo,a(et(t.productId)),1)]),e("td",Ro,[qe(t)?(i(),c("select",{key:0,value:t.status,onChange:u=>Xe(t,u.target.value),class:ge(["text-xs rounded-full px-2 py-1 border-0 focus:ring-2 focus:ring-blue-500",fe(t.status)])},[e("option",zo,a(l("PENDING",s(n))),1),e("option",Bo,a(l("IN_PRODUCTION",s(n))),1),e("option",Ho,a(l("POSTED",s(n))),1),e("option",Go,a(l("PRODUCTION_FINISHED",s(n))),1),e("option",qo,a(l("FINISHED",s(n))),1),e("option",Jo,a(l("CANCELED",s(n))),1)],42,Lo)):(i(),c("span",{key:1,class:ge(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",fe(t.status)])},a(l(t.status,s(n))),3))]),e("td",Qo,[e("div",Yo,a(tt(t.postDate)),1)]),e("td",Ko,[e("div",Wo,[(i(!0),c(f,null,k(t.channels,u=>(i(),c("span",{key:u.id,class:"inline-flex px-2 py-1 text-xs bg-gray-100 dark:bg-gray-600 text-gray-800 dark:text-gray-200 rounded"},a(u.name),1))),128))])]),e("td",Xo,[e("div",Zo,[["POSTED","FINISHED"].includes(t.status)?(i(),c("button",{key:0,onClick:u=>Ke(t),class:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:l("updateMetrics",s(n))},[g(s(pt),{class:"w-4 h-4"})],8,ea)):m("",!0),g(s(mt),{to:{name:"ContentPreview",params:{id:t.id},query:{from:"content-manager"}},onClick:st,class:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300",title:l("preview",s(n))},{default:yt(()=>[g(s(ft),{class:"w-4 h-4"})]),_:2},1032,["to","title"]),Ge(t)?(i(),c("button",{key:1,onClick:u=>Qe(t),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"},[g(s(Ie),{class:"w-4 h-4"})],8,ta)):m("",!0)])])]))),128))])]),G.value>1?(i(),c("div",sa,[e("div",oa,a(l("page",s(n)))+" "+a(ze.value)+" / "+a(G.value)+" Â· "+a(ee.value)+" "+a(l("items",s(n))),1),e("div",aa,[e("button",{onClick:Be,disabled:N.value===0,class:"px-3 py-1 rounded border text-sm disabled:opacity-40 disabled:cursor-not-allowed bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"},a(l("previous",s(n))),9,ra),e("button",{onClick:He,disabled:N.value>=G.value-1,class:"px-3 py-1 rounded border text-sm disabled:opacity-40 disabled:cursor-not-allowed bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"},a(l("next",s(n))),9,la)])])):m("",!0)])):m("",!0),!s(S)&&!W.value&&be.value.length===0?(i(),c("div",na,[g(s(wt),{class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e("h3",da,a(l("noContentFound",s(n))),1),e("p",ia,a(l("createFirstContent",s(n))),1),e("button",{onClick:r[14]||(r[14]=t=>X.value=!0),class:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"},[g(s(ke),{class:"w-4 h-4 mr-2"}),oe(" "+a(l("newContent",s(n))),1)])])):m("",!0),(i(),$(_e,{to:"body"},[H.value&&P.value?(i(),c("div",ca,[e("div",ua,[e("div",ga,[e("h3",pa,a(l("updateMetrics",s(n)))+" - "+a(P.value.name),1),e("div",ya,[(i(!0),c(f,null,k(P.value.channels,t=>(i(),c("div",{key:t.id,class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4"},[e("h4",ma,a(t.name)+" "+a(l("metrics",s(n))),1),e("div",ba,[e("div",null,[e("label",ha,a(l("likes",s(n))),1),e("input",{type:"number",min:"0",value:v.value[t.id]?.likes||0,onInput:u=>R(t.id,"likes",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,xa)]),e("div",null,[e("label",va,a(l("comments",s(n))),1),e("input",{type:"number",min:"0",value:v.value[t.id]?.comments||0,onInput:u=>R(t.id,"comments",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,fa)]),e("div",null,[e("label",_a,a(l("shares",s(n))),1),e("input",{type:"number",min:"0",value:v.value[t.id]?.shares||0,onInput:u=>R(t.id,"shares",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,ka)]),e("div",null,[e("label",wa,a(l("siteVisits",s(n))),1),e("input",{type:"number",min:"0",value:v.value[t.id]?.siteVisits||0,onInput:u=>R(t.id,"siteVisits",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,Ca)]),e("div",null,[e("label",Da,a(l("newAccounts",s(n))),1),e("input",{type:"number",min:"0",value:v.value[t.id]?.newAccounts||0,onInput:u=>R(t.id,"newAccounts",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,Ia)]),e("div",null,[e("label",Sa,a(l("postClicks",s(n))),1),e("input",{type:"number",min:"0",value:v.value[t.id]?.postClicks||0,onInput:u=>R(t.id,"postClicks",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,Ea)])])]))),128))]),e("div",Na,[e("button",{onClick:We,disabled:M.value,class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center space-x-2"},[M.value?(i(),$(s(ye),{key:0,class:"h-4 w-4 animate-spin"})):m("",!0),e("span",null,a(M.value?l("saving",s(n)):l("save",s(n))),1)],8,Pa),e("button",{onClick:Ze,disabled:M.value,class:"px-4 py-2 bg-gray-300 hover:bg-gray-400 disabled:bg-gray-200 disabled:cursor-not-allowed text-gray-700 rounded-lg transition-colors"},a(l("cancel",s(n))),9,Ta)])])])])):m("",!0)]))]),re.value?(i(),$(Rt,{key:0,content:le.value,onClose:ve,onDelete:Ye},null,8,["content"])):m("",!0)],64))}};export{za as default};
