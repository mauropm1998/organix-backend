import{c as Je,r as m,A as K,a as i,o as d,b as e,p as g,u as s,t as r,d as U,e as _e,F as ke,h as S,z as Ke,l as Qe,x as Xe,y as be,f as v,j as J,g as h,B as C,q as y,s as x,w as xe,v as ae,T as he,D as me,n as fe,E as Ze}from"./index-krPxap5C.js";import{u as et}from"./useData-45MqasNR.js";import{_ as b}from"./SkeletonLoader-Caadzshv.js";import{a as tt,T as we,P as oe,S as st}from"./triangle-alert-CrVGxk2S.js";import{L as Q}from"./loader-circle-DwedsyWm.js";import{A as ve}from"./arrow-right-3zlSq235.js";import{B as rt}from"./box-B5U1IAFD.js";import"./userService-oO7j-WBV.js";/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=Je("circle-arrow-right",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}],["path",{d:"M8 12h8",key:"1wcyev"}]]),ot=["article","video","image","social","email","blog"],le=["PENDING","IN_PRODUCTION","POSTED","FINISHED","CANCELED"],lt={class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50"},nt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4 transform transition-all"},dt={class:"p-6"},it={class:"flex items-center mb-4"},ct={class:"flex-shrink-0 w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center mr-3"},ut={class:"text-lg font-medium text-gray-900 dark:text-white"},gt={class:"mb-6"},pt={class:"text-gray-600 dark:text-gray-400"},yt={class:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600"},bt={class:"flex items-center"},xt={class:"flex-1 min-w-0"},ht={class:"text-sm font-medium text-gray-900 dark:text-white truncate block"},mt={class:"text-xs text-gray-500 dark:text-gray-400"},ft={class:"flex justify-end space-x-3"},vt=["disabled"],_t={__name:"DeleteContentModal",props:{content:{type:Object,required:!0}},emits:["close","delete"],setup(Y,{emit:n}){const p=Y,O=n,{language:D}=_e(),k=m(!1);function F(w){if(!w)return"N/A";const $=`contentTypes.${w.toLowerCase()}`,I=U($,D.value);return I!==$?I:w}const N=async()=>{if(!(!p.content||k.value)){k.value=!0;try{O("delete",p.content.id)}catch(w){console.error("Error deleting content:",w),k.value=!1}}};return K(()=>p.content,w=>{w||(k.value=!1)}),(w,$)=>(d(),i("div",lt,[e("div",nt,[e("div",dt,[e("div",it,[e("div",ct,[g(s(tt),{class:"w-5 h-5 text-red-600 dark:text-red-400"})]),e("div",null,[e("h3",ut,r(s(U)("confirmDeletion",s(D))),1)])]),e("div",gt,[e("p",pt,r(s(U)("confirmDeleteContent",s(D))),1),e("div",yt,[e("div",bt,[g(s(ke),{class:"w-4 h-4 text-gray-500 dark:text-gray-400 mr-2 flex-shrink-0"}),e("div",xt,[e("span",ht,r(Y.content?.name),1),e("span",mt,r(F(Y.content?.type)),1)])])])]),e("div",ft,[e("button",{type:"button",onClick:$[0]||($[0]=I=>w.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"},r(s(U)("cancel",s(D))),1),e("button",{type:"button",onClick:N,disabled:k.value,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2"},[k.value?(d(),S(s(Q),{key:0,class:"w-4 h-4 animate-spin"})):(d(),S(s(we),{key:1,class:"w-4 h-4"})),e("span",null,r(k.value?s(U)("deleting",s(D)):s(U)("delete",s(D))),1)],8,vt)])])])]))}},kt={class:"space-y-6"},wt={class:"flex justify-between items-center"},Ct={class:"text-2xl font-bold text-gray-900 dark:text-white"},Dt={class:"flex space-x-3"},It={class:"flex space-x-4"},St={value:""},Nt=["value"],Et=["disabled"],$t={value:""},Tt={key:0,disabled:""},Mt=["value"],At={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[9999] p-4"},Pt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[calc(100vh-2rem)] overflow-y-auto"},Ut={class:"p-6"},Vt={class:"flex items-center mb-4"},jt={class:"flex-shrink-0 w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/20 flex items-center justify-center mr-3"},Ot={class:"text-lg font-medium text-gray-900 dark:text-white"},Ft={class:"mb-6"},Lt={class:"text-gray-600 dark:text-gray-400 mb-4"},zt={key:0,class:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600 mb-4"},qt={class:"flex items-center"},Bt={class:"min-w-0 flex-1"},Rt={class:"text-sm font-medium text-gray-900 dark:text-white block truncate"},Gt={class:"text-xs text-gray-500 dark:text-gray-400"},Ht={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Yt=["disabled"],Wt={value:null},Jt=["value"],Kt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Qt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Xt=["disabled"],Zt={value:""},es=["value"],ts={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ss=["disabled"],rs={value:""},as=["value"],os={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ls={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ns=["disabled"],ds={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},is=["disabled"],cs=["value"],us={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},gs={class:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-32 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-lg p-3"},ps=["id","value","disabled"],ys=["for"],bs={key:0,class:"text-xs text-red-500 mt-1"},xs={class:"flex flex-col sm:flex-row gap-3 sm:justify-end pt-4 border-t border-gray-200 dark:border-gray-600"},hs=["disabled"],ms=["disabled"],fs={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"},vs={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},_s={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ks={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ws={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Cs={value:""},Ds=["value"],Is={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ss={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Ns={value:""},Es=["value"],$s={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Ts={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ms={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},As=["disabled"],Ps=["value"],Us={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Vs=["value"],js={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Os=["value"],Fs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Ls={class:"grid grid-cols-2 md:grid-cols-3 gap-2"},zs=["value"],qs={class:"ml-2 text-sm text-gray-700 dark:text-gray-300"},Bs={class:"flex space-x-3"},Rs=["disabled"],Gs=["disabled"],Hs={key:1,class:"space-y-6"},Ys={class:"overflow-x-auto"},Ws={class:"w-full border border-gray-200 dark:border-gray-700 rounded-lg"},Js={class:"bg-gray-50 dark:bg-gray-700"},Ks={class:"px-6 py-3 text-left"},Qs={class:"px-6 py-3 text-left"},Xs={class:"px-6 py-3 text-left"},Zs={class:"px-6 py-3 text-left"},er={class:"px-6 py-3 text-left"},tr={class:"px-6 py-3 text-left"},sr={class:"px-6 py-3 text-right"},rr={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ar={class:"px-6 py-4"},or={class:"px-6 py-4"},lr={class:"px-6 py-4"},nr={class:"px-6 py-4"},dr={class:"px-6 py-4"},ir={class:"px-6 py-4"},cr={class:"flex flex-wrap gap-1"},ur={class:"px-6 py-4"},gr={class:"flex items-center justify-end space-x-2"},pr={key:2,class:"overflow-x-auto"},yr={class:"w-full border border-gray-200 dark:border-gray-700 rounded-lg"},br={class:"bg-gray-50 dark:bg-gray-700"},xr={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},hr={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},mr={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},fr={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},vr={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},_r={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},kr={class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},wr={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Cr={class:"px-6 py-4 whitespace-nowrap"},Dr={class:"text-sm font-medium text-gray-900 dark:text-white"},Ir={class:"px-6 py-4 whitespace-nowrap"},Sr={class:"text-sm text-gray-500 dark:text-gray-400"},Nr={class:"px-6 py-4 whitespace-nowrap"},Er={class:"text-sm text-gray-500 dark:text-gray-400"},$r={class:"px-6 py-4 whitespace-nowrap"},Tr=["value","onChange"],Mr={value:"PENDING"},Ar={value:"IN_PRODUCTION"},Pr={value:"POSTED"},Ur={value:"FINISHED"},Vr={value:"CANCELED"},jr={class:"px-6 py-4 whitespace-nowrap"},Or={class:"text-sm text-gray-500 dark:text-gray-400"},Fr={class:"px-6 py-4"},Lr={class:"flex flex-wrap gap-1"},zr={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},qr={class:"flex items-center justify-end space-x-2"},Br=["onClick","title"],Rr=["onClick"],Gr=["onClick"],Hr={key:3,class:"text-center py-12"},Yr={class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},Wr={class:"text-gray-600 dark:text-gray-400 mb-4"},Jr={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-[9999]"},Kr={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[calc(100vh-2rem)] overflow-y-auto"},Qr={class:"p-6"},Xr={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},Zr={class:"space-y-6"},ea={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},ta={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4"},sa={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ra=["value","onInput"],aa={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},oa=["value","onInput"],la={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},na=["value","onInput"],da={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ia=["value","onInput"],ca={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ua=["value","onInput"],ga={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},pa=["value","onInput"],ya={class:"flex space-x-3 mt-6"},ba=["disabled"],xa=["disabled"],Da={__name:"ContentManager",setup(Y){const{language:n}=_e(),{currentUser:p}=Qe(),{content:O,products:D,users:k,drafts:F,channels:N,loadingChannels:w,loadingContent:$,fetchContent:I,fetchProducts:Ce,fetchUsers:De,fetchDrafts:Ie,fetchChannels:Se,createContent:Ne,updateContent:Ee,updateContentStatus:$e,updateContentChannelMetrics:Te,deleteContent:Me,transformDraftToContent:Ae}=et(),l=a=>U(a,n.value),L=m(!1),W=m(!1),z=m(!1),X=m(!1),T=m(null),E=m(null),M=m(null),Z=m(null),q=m(""),B=m(""),V=m(!1),_=m(!1),A=m(!1),f=m({}),c=Ke({name:"",type:"",product:"",creator:p.value?.id||"",postDate:"",producer:p.value?.id||"",status:"PENDING",channels:[]});Xe(async()=>{await Promise.all([I(),Ce(),De(),Ie(),Se()])});const ne=be(()=>!F.value||!p.value?[]:p.value.adminType==="ADMIN"?F.value.filter(a=>a.status==="APPROVED"):F.value.filter(a=>a.status==="APPROVED"&&a.creatorId===p.value.id)),de=be(()=>!O.value||!p.value?[]:p.value.adminType==="ADMIN"?O.value:O.value.filter(a=>a.creatorId===p.value.id||a.producerId===p.value.id));K([q,B],async()=>{await Pe()},{immediate:!1});const Pe=async()=>{const a={};q.value&&(a.status=q.value),B.value&&(a.channelId=B.value),await I(a)},ie=a=>p.value?.adminType==="ADMIN"||a.creatorId===p.value?.id||a.producerId===p.value?.id,Ue=a=>p.value?.adminType==="ADMIN"||a.producerId===p.value?.id,Ve=async()=>{V.value=!0;try{const a={name:c.name,type:c.type,productId:c.product,postDate:ye(c.postDate),channelIds:c.channels,status:c.status};c.producer&&(a.producerId=c.producer),T.value&&(a.creatorId=c.creator),T.value?await Ee(T.value.id,a):await Ne(a),ee(),await I()}catch(a){console.error("Error saving content:",a)}finally{V.value=!1}},ce=async()=>{if(E.value){_.value=!0;try{const a={status:c.status,channelIds:c.channels,postDate:ye(c.postDate),productId:c.product||void 0,producerId:c.producer||void 0};await Ae(E.value.id,a),ue(),await I()}catch(a){console.error("Error transforming draft:",a)}finally{_.value=!1}}},ee=()=>{Object.assign(c,{name:"",type:"",product:"",creator:p.value?.id||"",postDate:"",producer:p.value?.id||"",status:"PENDING",channels:[]}),L.value=!1,T.value=null},ue=()=>{W.value=!1,E.value=null,ee()},je=a=>{T.value=a,Object.assign(c,{name:a.name,type:a.type,product:a.productId,creator:a.creatorId,postDate:He(a.postDate),producer:a.producerId,status:a.status,channels:a.channels?.map(o=>o.id)||[]}),L.value=!0},Oe=async a=>{Z.value=a,X.value=!0},ge=()=>{X.value=!1,Z.value=null},Fe=async a=>{try{await Me(a),await I(),ge()}catch(o){console.error("Error deleting content:",o)}},Le=a=>{M.value=a;const o={};a.channels.forEach(t=>{const u=a.metrics?.channelMetrics?.find(P=>P.channelId===t.id);o[t.id]=u||{likes:0,comments:0,shares:0,postClicks:0,siteVisits:0,newAccounts:0}}),f.value=o,z.value=!0},j=(a,o,t)=>{f.value[a]||(f.value[a]={}),f.value[a][o]=t},ze=async()=>{if(M.value){A.value=!0;try{if(Object.keys(f.value).length===0){A.value=!1;return}const a=Object.entries(f.value).map(([t,u])=>({channelId:t.toString(),likes:u.likes||0,comments:u.comments||0,shares:u.shares||0,siteVisits:u.siteVisits||0,newAccounts:u.newAccounts||0,postClicks:u.postClicks||0})),o=await Te(M.value.id,a);o.success?(z.value=!1,M.value=null,f.value={},await I()):alert(`Erro ao atualizar métricas: ${o.error}`)}catch(a){console.error("Error updating metrics:",a);const o=a.response?.data?.message||a.message||"Erro ao atualizar métricas";alert(`Erro ao atualizar métricas: ${o}`)}finally{A.value=!1}}},qe=async(a,o)=>{try{const t=await $e(a.id,o);t.success||(console.error("Error updating status:",t.error),alert(`Erro ao atualizar status: ${t.error}`))}catch(t){console.error("Error updating status:",t),alert("Erro ao atualizar status do conteúdo")}},Be=()=>{z.value=!1,M.value=null};K(W,a=>{a?document.body.style.overflow="hidden":document.body.style.overflow=""}),K(z,a=>{a?document.body.style.overflow="hidden":document.body.style.overflow=""});const Re=a=>D.value?.find(t=>t.id===a)?.name||"",te=a=>{if(!a)return"N/A";const o=`contentTypes.${a.toLowerCase()}`,t=l(o,n.value);return t!==o?t:a},pe=a=>{const o={PENDING:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",IN_PRODUCTION:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",POSTED:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",FINISHED:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",CANCELED:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"};return o[a]||o.PENDING},Ge=a=>{if(!a)return"";let o;if(Array.isArray(a)){const[R,G,H,se=0,re=0]=a;o=new Date(R,G-1,H,se,re)}else o=new Date(a);const t=n.value==="pt"?"pt-PT":"en-US",u=o.toLocaleDateString(t),P=o.toLocaleTimeString(t,{hour:"2-digit",minute:"2-digit"});return`${u} ${P}`},He=a=>{if(!a)return"";let o;if(Array.isArray(a)){const[H,se,re,Ye=0,We=0]=a;o=new Date(H,se-1,re,Ye,We)}else o=new Date(a);const t=o.getFullYear(),u=String(o.getMonth()+1).padStart(2,"0"),P=String(o.getDate()).padStart(2,"0"),R=String(o.getHours()).padStart(2,"0"),G=String(o.getMinutes()).padStart(2,"0");return`${t}-${u}-${P}T${R}:${G}`},ye=a=>{if(!a)return;const o=new Date(a),t=o.getFullYear(),u=String(o.getMonth()+1).padStart(2,"0"),P=String(o.getDate()).padStart(2,"0"),R=String(o.getHours()).padStart(2,"0"),G=String(o.getMinutes()).padStart(2,"0"),H=String(o.getSeconds()).padStart(2,"0");return`${t}-${u}-${P}T${R}:${G}:${H}`};return(a,o)=>(d(),i(y,null,[e("div",kt,[e("div",wt,[e("h2",Ct,r(l("content")),1),e("div",Dt,[ne.value.length>0?(d(),i("button",{key:0,onClick:o[0]||(o[0]=t=>W.value=!0),class:"flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors"},[g(s(at),{class:"w-4 h-4 mr-2"}),J(" "+r(l("transformDraft")),1)])):v("",!0),e("button",{onClick:o[1]||(o[1]=t=>L.value=!0),class:"flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"},[g(s(oe),{class:"w-4 h-4 mr-2"}),J(" "+r(l("newContent")),1)])])]),e("div",It,[h(e("select",{"onUpdate:modelValue":o[2]||(o[2]=t=>q.value=t),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[e("option",St,r(l("allStatuses")),1),(d(!0),i(y,null,x(s(le),t=>(d(),i("option",{key:t,value:t},r(l(t)),9,Nt))),128))],512),[[C,q.value]]),h(e("select",{"onUpdate:modelValue":o[3]||(o[3]=t=>B.value=t),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",disabled:!s(N)||s(N).length===0},[e("option",$t,r(l("allChannels")),1),!s(N)||s(N).length===0?(d(),i("option",Tt,r(s(w)?"Carregando canais...":"Nenhum canal disponível"),1)):v("",!0),(d(!0),i(y,null,x(s(N),t=>(d(),i("option",{key:t.id,value:t.id},r(t.name),9,Mt))),128))],8,Et),[[C,B.value]])]),(d(),S(he,{to:"body"},[W.value?(d(),i("div",At,[e("div",Pt,[e("div",Ut,[e("div",Vt,[e("div",jt,[g(s(ve),{class:"w-5 h-5 text-green-600 dark:text-green-400"})]),e("div",null,[e("h3",Ot,r(l("transformDraftToContent",s(n))),1)])]),e("div",Ft,[e("p",Lt,r(l("transformDraftDescription",s(n))),1),E.value?(d(),i("div",zt,[e("div",qt,[g(s(ke),{class:"w-4 h-4 text-gray-500 dark:text-gray-400 mr-2 flex-shrink-0"}),e("div",Bt,[e("span",Rt,r(E.value.name),1),e("span",Gt,r(te(E.value.type)),1)])])])):v("",!0),e("form",{onSubmit:xe(ce,["prevent"]),class:"space-y-4"},[e("div",null,[e("label",Ht,r(l("selectDraft",s(n)))+" * ",1),h(e("select",{"onUpdate:modelValue":o[4]||(o[4]=t=>E.value=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:"",disabled:_.value},[e("option",Wt,r(l("selectApprovedDraft",s(n))),1),(d(!0),i(y,null,x(ne.value,t=>(d(),i("option",{key:t.id,value:t},r(t.name)+" - "+r(te(t.type)),9,Jt))),128))],8,Yt),[[C,E.value]])]),e("div",Kt,[e("div",null,[e("label",Qt,r(l("product",s(n))),1),h(e("select",{"onUpdate:modelValue":o[5]||(o[5]=t=>c.product=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:_.value},[e("option",Zt,r(l("selectProduct",s(n))),1),(d(!0),i(y,null,x(s(D),t=>(d(),i("option",{key:t.id,value:t.id},r(t.name),9,es))),128))],8,Xt),[[C,c.product]])]),e("div",null,[e("label",ts,r(l("producer",s(n))),1),h(e("select",{"onUpdate:modelValue":o[6]||(o[6]=t=>c.producer=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:_.value},[e("option",rs,r(l("selectProducer",s(n))),1),(d(!0),i(y,null,x(s(k),t=>(d(),i("option",{key:t.id,value:t.id},r(t.name),9,as))),128))],8,ss),[[C,c.producer]])])]),e("div",os,[e("div",null,[e("label",ls,r(l("postDate",s(n))),1),h(e("input",{type:"datetime-local","onUpdate:modelValue":o[7]||(o[7]=t=>c.postDate=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:_.value},null,8,ns),[[ae,c.postDate]])]),e("div",null,[e("label",ds,r(l("status",s(n))),1),h(e("select",{"onUpdate:modelValue":o[8]||(o[8]=t=>c.status=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:_.value},[(d(!0),i(y,null,x(s(le),t=>(d(),i("option",{key:t,value:t},r(l(t,s(n))),9,cs))),128))],8,is),[[C,c.status]])])]),e("div",null,[e("label",us,r(l("channels",s(n)))+" * ",1),e("div",gs,[(d(!0),i(y,null,x(s(N),t=>(d(),i("div",{key:t.id,class:"flex items-center"},[h(e("input",{id:`transform-channel-${t.id}`,type:"checkbox",value:t.id,"onUpdate:modelValue":o[9]||(o[9]=u=>c.channels=u),disabled:_.value,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 disabled:opacity-50"},null,8,ps),[[me,c.channels]]),e("label",{for:`transform-channel-${t.id}`,class:"ml-2 text-sm text-gray-900 dark:text-gray-300 cursor-pointer truncate"},r(t.name),9,ys)]))),128))]),c.channels.length===0?(d(),i("p",bs,r(l("selectAtLeastOneChannel",s(n))),1)):v("",!0)])],32)]),e("div",xs,[e("button",{type:"button",onClick:ue,disabled:_.value,class:"w-full sm:w-auto px-6 py-2 bg-gray-200 hover:bg-gray-300 disabled:bg-gray-100 text-gray-700 dark:bg-gray-600 dark:hover:bg-gray-500 dark:disabled:bg-gray-700 dark:text-gray-300 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},r(l("cancel",s(n))),9,hs),e("button",{onClick:ce,disabled:_.value||!E.value||c.channels.length===0,class:"w-full sm:w-auto flex items-center justify-center px-6 py-2 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white rounded-lg transition-colors space-x-2 disabled:opacity-50 disabled:cursor-not-allowed"},[_.value?(d(),S(s(Q),{key:0,class:"w-4 h-4 animate-spin"})):(d(),S(s(ve),{key:1,class:"w-4 h-4"})),e("span",null,r(_.value?l("transforming",s(n)):l("transformToContent",s(n))),1)],8,ms)])])])])):v("",!0)])),L.value?(d(),i("div",fs,[e("h3",vs,r(T.value?l("editContent"):l("createNewContent")),1),e("form",{onSubmit:xe(Ve,["prevent"]),class:"space-y-4"},[e("div",_s,[e("div",null,[e("label",ks,r(l("name",s(n))),1),h(e("input",{type:"text","onUpdate:modelValue":o[10]||(o[10]=t=>c.name=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:""},null,512),[[ae,c.name]])]),e("div",null,[e("label",ws,r(l("type",s(n))),1),h(e("select",{"onUpdate:modelValue":o[11]||(o[11]=t=>c.type=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:""},[e("option",Cs,r(l("type",s(n))),1),(d(!0),i(y,null,x(s(ot),t=>(d(),i("option",{key:t,value:t},r(l(`contentTypes.${t}`,s(n))),9,Ds))),128))],512),[[C,c.type]])])]),e("div",Is,[e("div",null,[e("label",Ss,r(l("product",s(n))),1),h(e("select",{"onUpdate:modelValue":o[12]||(o[12]=t=>c.product=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:""},[e("option",Ns,r(l("product",s(n))),1),(d(!0),i(y,null,x(s(D),t=>(d(),i("option",{key:t.id,value:t.id},r(t.name),9,Es))),128))],512),[[C,c.product]])]),e("div",null,[e("label",$s,r(l("postDate",s(n))),1),h(e("input",{type:"datetime-local","onUpdate:modelValue":o[13]||(o[13]=t=>c.postDate=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:""},null,512),[[ae,c.postDate]])])]),e("div",Ts,[e("div",null,[e("label",Ms,r(l("creator",s(n))),1),h(e("select",{"onUpdate:modelValue":o[14]||(o[14]=t=>c.creator=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:"",disabled:s(p).adminType!=="ADMIN"},[(d(!0),i(y,null,x(s(k),t=>(d(),i("option",{key:t.id,value:t.id},r(t.name),9,Ps))),128))],8,As),[[C,c.creator]])]),e("div",null,[e("label",Us,r(l("producer",s(n))),1),h(e("select",{"onUpdate:modelValue":o[15]||(o[15]=t=>c.producer=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:""},[(d(!0),i(y,null,x(s(k),t=>(d(),i("option",{key:t.id,value:t.id},r(t.name),9,Vs))),128))],512),[[C,c.producer]])]),e("div",null,[e("label",js,r(l("status",s(n))),1),h(e("select",{"onUpdate:modelValue":o[16]||(o[16]=t=>c.status=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"},[(d(!0),i(y,null,x(s(le),t=>(d(),i("option",{key:t,value:t},r(l(t,s(n))),9,Os))),128))],512),[[C,c.status]])])]),e("div",null,[e("label",Fs,r(l("channels",s(n))),1),e("div",Ls,[(d(!0),i(y,null,x(s(N),t=>(d(),i("label",{key:t.id,class:"flex items-center"},[h(e("input",{type:"checkbox",value:t.id,"onUpdate:modelValue":o[17]||(o[17]=u=>c.channels=u),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,8,zs),[[me,c.channels]]),e("span",qs,r(t.name),1)]))),128))])]),e("div",Bs,[e("button",{type:"submit",disabled:V.value,class:"flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-lg transition-colors"},[V.value?(d(),S(s(Q),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):(d(),S(s(oe),{key:1,class:"w-4 h-4 mr-2"})),J(" "+r(V.value?T.value?l("updating",s(n)):l("creating",s(n)):T.value?l("update",s(n)):l("create",s(n))),1)],8,Rs),e("button",{type:"button",onClick:ee,disabled:V.value,class:"px-4 py-2 bg-gray-300 hover:bg-gray-400 disabled:bg-gray-200 text-gray-700 rounded-lg transition-colors"},r(l("cancel",s(n))),9,Gs)])],32)])):v("",!0),s($)?(d(),i("div",Hs,[e("div",Ys,[e("table",Ws,[e("thead",Js,[e("tr",null,[e("th",Ks,[g(b,{customClass:"h-4 w-16"})]),e("th",Qs,[g(b,{customClass:"h-4 w-12"})]),e("th",Xs,[g(b,{customClass:"h-4 w-20"})]),e("th",Zs,[g(b,{customClass:"h-4 w-16"})]),e("th",er,[g(b,{customClass:"h-4 w-20"})]),e("th",tr,[g(b,{customClass:"h-4 w-16"})]),e("th",sr,[g(b,{customClass:"h-4 w-16"})])])]),e("tbody",rr,[(d(),i(y,null,x(6,t=>e("tr",{key:t,class:"animate-pulse"},[e("td",ar,[g(b,{customClass:"h-4 w-32"})]),e("td",or,[g(b,{customClass:"h-4 w-20"})]),e("td",lr,[g(b,{customClass:"h-4 w-24"})]),e("td",nr,[g(b,{customClass:"h-6 w-24 rounded-full"})]),e("td",dr,[g(b,{customClass:"h-4 w-28"})]),e("td",ir,[e("div",cr,[g(b,{customClass:"h-5 w-16 rounded-full"}),g(b,{customClass:"h-5 w-20 rounded-full"})])]),e("td",ur,[e("div",gr,[g(b,{customClass:"h-8 w-8 rounded"}),g(b,{customClass:"h-8 w-8 rounded"}),g(b,{customClass:"h-8 w-8 rounded"}),g(b,{customClass:"h-8 w-8 rounded"})])])])),64))])])])])):(d(),i("div",pr,[e("table",yr,[e("thead",br,[e("tr",null,[e("th",xr,r(l("name",s(n))),1),e("th",hr,r(l("type",s(n))),1),e("th",mr,r(l("product",s(n))),1),e("th",fr,r(l("status",s(n))),1),e("th",vr,r(l("postDate",s(n))),1),e("th",_r,r(l("channels",s(n))),1),e("th",kr,r(l("actions",s(n))),1)])]),e("tbody",wr,[(d(!0),i(y,null,x(de.value,t=>(d(),i("tr",{key:t.id},[e("td",Cr,[e("div",Dr,r(t.name),1)]),e("td",Ir,[e("div",Sr,r(te(t.type)),1)]),e("td",Nr,[e("div",Er,r(Re(t.productId)),1)]),e("td",$r,[Ue(t)?(d(),i("select",{key:0,value:t.status,onChange:u=>qe(t,u.target.value),class:fe(["text-xs rounded-full px-2 py-1 border-0 focus:ring-2 focus:ring-blue-500",pe(t.status)])},[e("option",Mr,r(l("PENDING",s(n))),1),e("option",Ar,r(l("IN_PRODUCTION",s(n))),1),e("option",Pr,r(l("POSTED",s(n))),1),e("option",Ur,r(l("FINISHED",s(n))),1),e("option",Vr,r(l("CANCELED",s(n))),1)],42,Tr)):(d(),i("span",{key:1,class:fe(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",pe(t.status)])},r(l(t.status,s(n))),3))]),e("td",jr,[e("div",Or,r(Ge(t.postDate)),1)]),e("td",Fr,[e("div",Lr,[(d(!0),i(y,null,x(t.channels,u=>(d(),i("span",{key:u.id,class:"inline-flex px-2 py-1 text-xs bg-gray-100 dark:bg-gray-600 text-gray-800 dark:text-gray-200 rounded"},r(u.name),1))),128))])]),e("td",zr,[e("div",qr,[["POSTED","FINISHED"].includes(t.status)?(d(),i("button",{key:0,onClick:u=>Le(t),class:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:l("updateMetrics",s(n))},[g(s(Ze),{class:"w-4 h-4"})],8,Br)):v("",!0),ie(t)?(d(),i("button",{key:1,onClick:u=>je(t),class:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300"},[g(s(st),{class:"w-4 h-4"})],8,Rr)):v("",!0),ie(t)?(d(),i("button",{key:2,onClick:u=>Oe(t),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"},[g(s(we),{class:"w-4 h-4"})],8,Gr)):v("",!0)])])]))),128))])])])),!s($)&&de.value.length===0?(d(),i("div",Hr,[g(s(rt),{class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e("h3",Yr,r(l("noContentFound",s(n))),1),e("p",Wr,r(l("createFirstContent",s(n))),1),e("button",{onClick:o[18]||(o[18]=t=>L.value=!0),class:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"},[g(s(oe),{class:"w-4 h-4 mr-2"}),J(" "+r(l("newContent",s(n))),1)])])):v("",!0),(d(),S(he,{to:"body"},[z.value&&M.value?(d(),i("div",Jr,[e("div",Kr,[e("div",Qr,[e("h3",Xr,r(l("updateMetrics",s(n)))+" - "+r(M.value.name),1),e("div",Zr,[(d(!0),i(y,null,x(M.value.channels,t=>(d(),i("div",{key:t.id,class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4"},[e("h4",ea,r(t.name)+" "+r(l("metrics",s(n))),1),e("div",ta,[e("div",null,[e("label",sa,r(l("likes",s(n))),1),e("input",{type:"number",min:"0",value:f.value[t.id]?.likes||0,onInput:u=>j(t.id,"likes",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,ra)]),e("div",null,[e("label",aa,r(l("comments",s(n))),1),e("input",{type:"number",min:"0",value:f.value[t.id]?.comments||0,onInput:u=>j(t.id,"comments",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,oa)]),e("div",null,[e("label",la,r(l("shares",s(n))),1),e("input",{type:"number",min:"0",value:f.value[t.id]?.shares||0,onInput:u=>j(t.id,"shares",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,na)]),e("div",null,[e("label",da,r(l("siteVisits",s(n))),1),e("input",{type:"number",min:"0",value:f.value[t.id]?.siteVisits||0,onInput:u=>j(t.id,"siteVisits",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,ia)]),e("div",null,[e("label",ca,r(l("newAccounts",s(n))),1),e("input",{type:"number",min:"0",value:f.value[t.id]?.newAccounts||0,onInput:u=>j(t.id,"newAccounts",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,ua)]),e("div",null,[e("label",ga,r(l("postClicks",s(n))),1),e("input",{type:"number",min:"0",value:f.value[t.id]?.postClicks||0,onInput:u=>j(t.id,"postClicks",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,pa)])])]))),128))]),e("div",ya,[e("button",{onClick:ze,disabled:A.value,class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center space-x-2"},[A.value?(d(),S(s(Q),{key:0,class:"h-4 w-4 animate-spin"})):v("",!0),e("span",null,r(A.value?l("saving",s(n)):l("save",s(n))),1)],8,ba),e("button",{onClick:Be,disabled:A.value,class:"px-4 py-2 bg-gray-300 hover:bg-gray-400 disabled:bg-gray-200 disabled:cursor-not-allowed text-gray-700 rounded-lg transition-colors"},r(l("cancel",s(n))),9,xa)])])])])):v("",!0)]))]),X.value?(d(),S(_t,{key:0,content:Z.value,onClose:ge,onDelete:Fe},null,8,["content"])):v("",!0)],64))}};export{Da as default};
