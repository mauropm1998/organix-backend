import{J as c,y as p,r as y,B as I}from"./index-C7JZJEmc.js";import{u as C}from"./userService-HYSguwDL.js";const v={async getAllProducts(){return(await c.get("/api/products")).data},async createProduct(t){return(await c.post("/api/products",t)).data},async updateProduct(t,r){return(await c.put(`/api/products/${t}`,r)).data},async deleteProduct(t){await c.delete(`/api/products/${t}`)}},w={async getAllDrafts(t={}){const r={};return t.status&&(r.status=t.status),t.creatorId&&(r.creatorId=t.creatorId),t.productId&&(r.productId=t.productId),typeof t.page=="number"&&(r.page=t.page),typeof t.size=="number"&&(r.size=t.size),(await c.get("/api/drafts",{params:r})).data},async getDraftById(t){return(await c.get(`/api/drafts/${t}`)).data},async createDraft(t){return(await c.post("/api/drafts",t)).data},async updateDraft(t,r){return(await c.put(`/api/drafts/${t}`,r)).data},async deleteDraft(t){await c.delete(`/api/drafts/${t}`)},async transformDraftToContent(t,r){return(await c.post(`/api/content/transform-draft/${t}`,r)).data},async getRecentDrafts(t=7){return(await c.get("/api/drafts/recent",{params:{days:t}})).data},async getDraftStats(){return(await c.get("/api/drafts/stats")).data}},f={async getAllContent(t={}){const r={};return t.status&&(r.status=t.status),t.channelId&&(r.channelId=t.channelId),t.productId&&(r.productId=t.productId),t.userId&&(r.userId=t.userId),t.creatorId&&(r.creatorId=t.creatorId),t.trafficType&&(r.trafficType=t.trafficType),typeof t.page=="number"&&(r.page=t.page),typeof t.size=="number"&&(r.size=t.size),(await c.get("/api/content",{params:r})).data},async getContentById(t){return(await c.get(`/api/content/${t}`)).data},async getMyContent(){return(await c.get("/api/content/my")).data},async createContent(t){return(await c.post("/api/content",t)).data},async updateContent(t,r){return(await c.put(`/api/content/${t}`,r)).data},async updateContentStatus(t,r){return(await c.patch(`/api/content/${t}/status`,{status:r})).data},async updateContentChannelMetrics(t,r){return(await c.put(`/api/content/${t}/channels/metrics`,{channelMetrics:r})).data},async deleteContent(t){await c.delete(`/api/content/${t}`)},async getRecentContent(t=7){return(await c.get("/api/content/recent",{params:{days:t}})).data},async getContentStats(){return(await c.get("/api/content/stats")).data}},ae={async getPerformanceSummary(t={}){return(await c.get("/api/performance/summary",{params:t})).data},async getTopContent(t={}){return(await c.get("/api/performance/top-content",{params:t})).data},async getChannelPerformance(t={}){return(await c.get("/api/performance/channel-performance",{params:t})).data}},re={async getCompanyInfo(){return(await c.get("/api/company")).data},async updateCompany(t){return(await c.put("/api/company",t)).data},async getCompanyStats(){return(await c.get("/api/company/stats")).data}},se={async getAllChannels(){return(await c.get("/api/channels")).data}},ne=async(t=7)=>{n.drafts=!0,l.drafts=null;try{i.value=await w.getRecentDrafts(t)}catch(r){l.drafts=r.response?.data?.message||"Erro ao carregar rascunhos recentes",console.error("Error fetching recent drafts:",r)}finally{n.drafts=!1}},oe=async(t=7)=>{n.content=!0,l.content=null;try{d.value=await f.getRecentContent(t)}catch(r){l.content=r.response?.data?.message||"Erro ao carregar conteúdo recente",console.error("Error fetching recent content:",r)}finally{n.content=!1}},m=y([]),h=y([]),i=y([]),d=y([]),D=y(null),E=y(null),M=y([]),P=y(null),S=y(null),n=I({users:!1,products:!1,drafts:!1,content:!1,draftStats:!1,contentStats:!1,channels:!1,companyStats:!1,performance:!1}),l=I({users:null,products:null,drafts:null,content:null,draftStats:null,contentStats:null,channels:null,companyStats:null,performance:null});function le(){const t=async()=>{n.users=!0,l.users=null;try{m.value=await C.getAllUsers()}catch(a){l.users=a.response?.data?.message||"Erro ao carregar usuários",console.error("Error fetching users:",a)}finally{n.users=!1}},r=async a=>{try{const e=await C.createUser(a);return m.value.push(e),{success:!0,data:e}}catch(e){return{success:!1,error:e.response?.data?.message||"Erro ao criar usuário"}}},g=async(a,e)=>{try{const s=await C.updateUser(a,e),u=m.value.findIndex(o=>o.id===a);return u!==-1&&(m.value[u]=s),{success:!0,data:s}}catch(s){return{success:!1,error:s.response?.data?.message||"Erro ao atualizar usuário"}}},A=async a=>{try{return await C.deleteUser(a),m.value=m.value.filter(e=>e.id!==a),{success:!0}}catch(e){return{success:!1,error:e.response?.data?.message||"Erro ao excluir usuário"}}},b=async()=>{n.products=!0,l.products=null;try{h.value=await v.getAllProducts()}catch(a){l.products=a.response?.data?.message||"Erro ao carregar produtos",console.error("Error fetching products:",a)}finally{n.products=!1}},z=async a=>{try{const e=await v.createProduct(a);return h.value.push(e),{success:!0,data:e}}catch(e){return{success:!1,error:e.response?.data?.message||"Erro ao criar produto"}}},x=async(a,e)=>{try{const s=await v.updateProduct(a,e),u=h.value.findIndex(o=>o.id===a);return u!==-1&&(h.value[u]=s),{success:!0,data:s}}catch(s){return{success:!1,error:s.response?.data?.message||"Erro ao atualizar produto"}}},$=async a=>{try{return await v.deleteProduct(a),h.value=h.value.filter(e=>e.id!==a),{success:!0}}catch(e){return{success:!1,error:e.response?.data?.message||"Erro ao excluir produto"}}},T=async(a={})=>{n.drafts=!0,l.drafts=null;try{const e=await w.getAllDrafts(a);return e&&typeof e=="object"&&Array.isArray(e.content)&&(typeof e.totalPages=="number"||typeof e.totalElements=="number")?(i.value=e.content,e):Array.isArray(e)?(i.value=e,{content:e,totalPages:1,totalElements:e.length,size:e.length,number:0}):(i.value=[],{content:[],totalPages:1,totalElements:0,size:0,number:0})}catch(e){return l.drafts=e.response?.data?.message||"Erro ao carregar rascunhos",console.error("Error fetching drafts:",e),{content:[],totalPages:1,totalElements:0,size:0,number:0}}finally{n.drafts=!1}},U=async()=>{n.draftStats=!0,l.draftStats=null;try{D.value=await w.getDraftStats()}catch(a){l.draftStats=a.response?.data?.message||"Erro ao carregar estatísticas de rascunhos"}finally{n.draftStats=!1}},N=async a=>{try{const e=await w.createDraft(a);return i.value.push(e),{success:!0,data:e}}catch(e){return{success:!1,error:e.response?.data?.message||"Erro ao criar rascunho"}}},R=async(a,e)=>{try{const s=await w.updateDraft(a,e),u=i.value.findIndex(o=>o.id===a);return u!==-1&&(i.value[u]=s),{success:!0,data:s}}catch(s){return{success:!1,error:s.response?.data?.message||"Erro ao atualizar rascunho"}}},B=async a=>{try{return await w.deleteDraft(a),i.value=i.value.filter(e=>e.id!==a),{success:!0}}catch(e){return{success:!1,error:e.response?.data?.message||"Erro ao excluir rascunho"}}},k=async(a,e)=>{try{const s=await w.transformDraftToContent(a,e);return i.value=i.value.filter(u=>u.id!==a),d.value&&Array.isArray(d.value)&&d.value.push(s),{success:!0,data:s}}catch(s){return{success:!1,error:s.response?.data?.message||"Erro ao transformar rascunho em conteúdo"}}},O=async(a={})=>{n.content=!0,l.content=null;try{const e=await f.getAllContent(a);return e&&typeof e=="object"&&Array.isArray(e.content)&&(typeof e.totalPages=="number"||typeof e.totalElements=="number")?(d.value=e.content,e):Array.isArray(e)?(d.value=e,{content:e,totalPages:1,totalElements:e.length,size:e.length,number:0}):(d.value=[],{content:[],totalPages:1,totalElements:0,size:0,number:0})}catch(e){return l.content=e.response?.data?.message||"Erro ao carregar conteúdo",console.error("Error fetching content:",e),{content:[],totalPages:1,totalElements:0,size:0,number:0}}finally{n.content=!1}},j=async()=>{n.contentStats=!0,l.contentStats=null;try{E.value=await f.getContentStats()}catch(a){l.contentStats=a.response?.data?.message||"Erro ao carregar estatísticas de conteúdo"}finally{n.contentStats=!1}},V=async()=>{n.content=!0,l.content=null;try{d.value=await f.getMyContent()}catch(a){l.content=a.response?.data?.message||"Erro ao carregar meu conteúdo",console.error("Error fetching my content:",a)}finally{n.content=!1}},F=async a=>{try{return{success:!0,data:await f.getContentById(a)}}catch(e){return{success:!1,error:e.response?.data?.message||"Erro ao buscar conteúdo"}}},G=async a=>{try{const e=await f.createContent(a);return d.value.push(e),{success:!0,data:e}}catch(e){return{success:!1,error:e.response?.data?.message||"Erro ao criar conteúdo"}}},J=async(a,e)=>{try{const s=await f.updateContent(a,e),u=d.value.findIndex(o=>o.id===a);return u!==-1&&(d.value[u]=s),{success:!0,data:s}}catch(s){return{success:!1,error:s.response?.data?.message||"Erro ao atualizar conteúdo"}}},L=async(a,e)=>{try{const s=await f.updateContentStatus(a,e),u=d.value.findIndex(o=>o.id===a);return u!==-1&&(d.value[u]=s),{success:!0,data:s}}catch(s){return{success:!1,error:s.response?.data?.message||"Erro ao atualizar status do conteúdo"}}},q=async(a,e)=>{try{const s=await f.updateContentChannelMetrics(a,e),u=d.value.findIndex(o=>o.id===a);return u!==-1&&(d.value[u]=s),{success:!0,data:s}}catch(s){return{success:!1,error:s.response?.data?.message||"Erro ao atualizar métricas do conteúdo"}}},H=async a=>{try{return await f.deleteContent(a),d.value=d.value.filter(e=>e.id!==a),{success:!0}}catch(e){return{success:!1,error:e.response?.data?.message||"Erro ao excluir conteúdo"}}},K=async(a={})=>{n.performance=!0,l.performance=null;try{const e={};if(a.startDate){const o=new Date(a.startDate);e.startDate=o.toISOString().split("T")[0]}if(a.endDate){const o=new Date(a.endDate);e.endDate=o.toISOString().split("T")[0]}a.channel&&a.channel.trim()!==""&&(e.channel=a.channel.trim()),a.productId&&a.productId.trim()!==""&&(e.productId=a.productId.trim());const u=(await ae.getTopContent(e)).map(o=>({id:`${o.contentId}-${o.channel}`,contentId:o.contentId,name:o.contentName,type:o.contentType,channels:[o.channel],productName:o.productName||"N/A",metrics:{likes:o.channelLikes||0,comments:o.channelComments||0,shares:o.channelShares||0,clicks:o.channelPostClicks||0,siteVisits:o.channelSiteVisits||0,newAccounts:o.channelNewAccounts||0},postDate:o.publishDate,performanceScore:o.performanceScore||0}));S.value=u}catch(e){S.value=[],l.performance=e.response?.data?.message||"Erro ao carregar dados de performance"}finally{n.performance=!1}},Q=async()=>{n.companyStats=!0,l.companyStats=null;try{P.value=await re.getCompanyStats()}catch(a){l.companyStats=a.response?.data?.message||"Erro ao carregar estatísticas da empresa",console.error("Error fetching company stats:",a)}finally{n.companyStats=!1}},W=async()=>{n.channels=!0,l.channels=null;try{M.value=await se.getAllChannels()}catch(a){l.channels=a.response?.data?.message||"Erro ao carregar canais",console.error("Error fetching channels:",a)}finally{n.channels=!1}},X=p(()=>i.value.filter(a=>a.status==="PENDING")),Y=p(()=>d.value.filter(a=>a.status==="POSTED")),Z=p(()=>m.value.length),_=p(()=>h.value.length),ee=p(()=>i.value.length),te=p(()=>d.value.length);return{users:m,products:h,drafts:i,content:d,draftStatsData:D,contentStatsData:E,channels:M,companyStats:P,performanceData:S,loading:n,loadingUsers:p(()=>n.users),loadingProducts:p(()=>n.products),loadingDrafts:p(()=>n.drafts),loadingContent:p(()=>n.content),loadingDraftStats:p(()=>n.draftStats),loadingContentStats:p(()=>n.contentStats),loadingChannels:p(()=>n.channels),loadingCompanyStats:p(()=>n.companyStats),loadingPerformance:p(()=>n.performance),errors:l,fetchUsers:t,createUser:r,updateUser:g,deleteUser:A,fetchProducts:b,createProduct:z,updateProduct:x,deleteProduct:$,fetchDrafts:T,fetchDraftStats:U,fetchRecentDrafts:ne,createDraft:N,updateDraft:R,deleteDraft:B,transformDraftToContent:k,fetchContent:O,fetchContentStats:j,fetchRecentContent:oe,fetchMyContent:V,getContentById:F,createContent:G,updateContent:J,updateContentStatus:L,updateContentChannelMetrics:q,deleteContent:H,fetchPerformanceData:K,fetchCompanyStats:Q,fetchChannels:W,pendingDrafts:X,publishedContent:Y,totalUsers:Z,totalProducts:_,totalDrafts:ee,totalContent:te}}export{f as c,le as u};
