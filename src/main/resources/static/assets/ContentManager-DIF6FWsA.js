import{c as Je,r as m,A as Q,a as i,o as d,b as e,p as g,u as s,t as r,d as U,e as ve,F as ke,h as S,z as Ke,l as Qe,x as Xe,y as be,f as _,j as J,g as b,B as C,q as p,s as x,w as xe,v as K,T as he,D as me,n as fe,E as Ze}from"./index-DREGtBfx.js";import{u as et}from"./useData-BrohWoT6.js";import{_ as y}from"./SkeletonLoader-CVbr6uya.js";import{a as tt,T as we,P as oe,S as st}from"./triangle-alert-BMArtJVk.js";import{L as X}from"./loader-circle-pXTdhc2I.js";import{A as _e}from"./arrow-right-Ch2fXteQ.js";import{B as rt}from"./box-DL5tKtp-.js";import"./userService-CKXDl8V0.js";/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=Je("circle-arrow-right",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}],["path",{d:"M8 12h8",key:"1wcyev"}]]),ot=["article","video","image","social","email","blog"],le=["PENDING","IN_PRODUCTION","POSTED","FINISHED","CANCELED"],lt={class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50"},nt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4 transform transition-all"},dt={class:"p-6"},it={class:"flex items-center mb-4"},ct={class:"flex-shrink-0 w-10 h-10 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center mr-3"},ut={class:"text-lg font-medium text-gray-900 dark:text-white"},gt={class:"mb-6"},pt={class:"text-gray-600 dark:text-gray-400"},yt={class:"mt-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600"},bt={class:"flex items-center"},xt={class:"flex-1 min-w-0"},ht={class:"text-sm font-medium text-gray-900 dark:text-white truncate block"},mt={class:"text-xs text-gray-500 dark:text-gray-400"},ft={class:"flex justify-end space-x-3"},_t=["disabled"],vt={__name:"DeleteContentModal",props:{content:{type:Object,required:!0}},emits:["close","delete"],setup(H,{emit:n}){const h=H,R=n,{language:D}=ve(),k=m(!1);function Y(w){if(!w)return"N/A";const $=`contentTypes.${w.toLowerCase()}`,I=U($,D.value);return I!==$?I:w}const E=async()=>{if(!(!h.content||k.value)){k.value=!0;try{R("delete",h.content.id)}catch(w){console.error("Error deleting content:",w),k.value=!1}}};return Q(()=>h.content,w=>{w||(k.value=!1)}),(w,$)=>(d(),i("div",lt,[e("div",nt,[e("div",dt,[e("div",it,[e("div",ct,[g(s(tt),{class:"w-5 h-5 text-red-600 dark:text-red-400"})]),e("div",null,[e("h3",ut,r(s(U)("confirmDeletion",s(D))),1)])]),e("div",gt,[e("p",pt,r(s(U)("confirmDeleteContent",s(D))),1),e("div",yt,[e("div",bt,[g(s(ke),{class:"w-4 h-4 text-gray-500 dark:text-gray-400 mr-2 flex-shrink-0"}),e("div",xt,[e("span",ht,r(H.content?.name),1),e("span",mt,r(Y(H.content?.type)),1)])])])]),e("div",ft,[e("button",{type:"button",onClick:$[0]||($[0]=I=>w.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors"},r(s(U)("cancel",s(D))),1),e("button",{type:"button",onClick:E,disabled:k.value,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2"},[k.value?(d(),S(s(X),{key:0,class:"w-4 h-4 animate-spin"})):(d(),S(s(we),{key:1,class:"w-4 h-4"})),e("span",null,r(k.value?s(U)("deleting",s(D)):s(U)("delete",s(D))),1)],8,_t)])])])]))}},kt={class:"space-y-6"},wt={class:"flex justify-between items-center"},Ct={class:"text-2xl font-bold text-gray-900 dark:text-white"},Dt={class:"flex space-x-3"},It={class:"flex space-x-4"},St={value:""},Et=["value"],Nt=["disabled"],$t={value:""},Tt={key:0,disabled:""},Mt=["value"],At={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[9999] p-4"},Pt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[calc(100vh-2rem)] overflow-y-auto"},Ut={class:"p-6"},Vt={class:"flex items-center mb-4"},jt={class:"flex-shrink-0 w-10 h-10 rounded-full bg-green-100 dark:bg-green-900/20 flex items-center justify-center mr-3"},Ot={class:"text-lg font-medium text-gray-900 dark:text-white"},Ft={class:"mb-6"},Lt={class:"text-gray-600 dark:text-gray-400 mb-4"},zt={key:0,class:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600 mb-4"},qt={class:"flex items-center"},Bt={class:"min-w-0 flex-1"},Gt={class:"text-sm font-medium text-gray-900 dark:text-white block truncate"},Ht={class:"text-xs text-gray-500 dark:text-gray-400"},Rt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Yt=["disabled"],Wt={value:null},Jt=["value"],Kt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Qt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Xt=["disabled"],Zt={value:""},es=["value"],ts={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ss=["disabled"],rs={value:""},as=["value"],os={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ls={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ns=["disabled"],ds={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},is=["disabled"],cs=["value"],us={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},gs={class:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-32 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-lg p-3"},ps=["id","value","disabled"],ys=["for"],bs={key:0,class:"text-xs text-red-500 mt-1"},xs={class:"flex flex-col sm:flex-row gap-3 sm:justify-end pt-4 border-t border-gray-200 dark:border-gray-600"},hs=["disabled"],ms=["disabled"],fs={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"},_s={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},vs={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ks={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ws={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Cs={value:""},Ds=["value"],Is={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Ss=["placeholder"],Es={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ns={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},$s={value:""},Ts=["value"],Ms={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},As={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ps={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Us=["disabled"],Vs=["value"],js={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Os=["value"],Fs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Ls=["value"],zs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},qs={class:"grid grid-cols-2 md:grid-cols-3 gap-2"},Bs=["value"],Gs={class:"ml-2 text-sm text-gray-700 dark:text-gray-300"},Hs={class:"flex space-x-3"},Rs=["disabled"],Ys=["disabled"],Ws={key:1,class:"space-y-6"},Js={class:"overflow-x-auto"},Ks={class:"w-full border border-gray-200 dark:border-gray-700 rounded-lg"},Qs={class:"bg-gray-50 dark:bg-gray-700"},Xs={class:"px-6 py-3 text-left"},Zs={class:"px-6 py-3 text-left"},er={class:"px-6 py-3 text-left"},tr={class:"px-6 py-3 text-left"},sr={class:"px-6 py-3 text-left"},rr={class:"px-6 py-3 text-left"},ar={class:"px-6 py-3 text-right"},or={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},lr={class:"px-6 py-4"},nr={class:"px-6 py-4"},dr={class:"px-6 py-4"},ir={class:"px-6 py-4"},cr={class:"px-6 py-4"},ur={class:"px-6 py-4"},gr={class:"flex flex-wrap gap-1"},pr={class:"px-6 py-4"},yr={class:"flex items-center justify-end space-x-2"},br={key:2,class:"overflow-x-auto"},xr={class:"w-full border border-gray-200 dark:border-gray-700 rounded-lg"},hr={class:"bg-gray-50 dark:bg-gray-700"},mr={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},fr={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},_r={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},vr={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},kr={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},wr={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Cr={class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},Dr={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Ir={class:"px-6 py-4 whitespace-nowrap"},Sr={class:"text-sm font-medium text-gray-900 dark:text-white"},Er={class:"px-6 py-4 whitespace-nowrap"},Nr={class:"text-sm text-gray-500 dark:text-gray-400"},$r={class:"px-6 py-4 whitespace-nowrap"},Tr={class:"text-sm text-gray-500 dark:text-gray-400"},Mr={class:"px-6 py-4 whitespace-nowrap"},Ar=["value","onChange"],Pr={value:"PENDING"},Ur={value:"IN_PRODUCTION"},Vr={value:"POSTED"},jr={value:"FINISHED"},Or={value:"CANCELED"},Fr={class:"px-6 py-4 whitespace-nowrap"},Lr={class:"text-sm text-gray-500 dark:text-gray-400"},zr={class:"px-6 py-4"},qr={class:"flex flex-wrap gap-1"},Br={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Gr={class:"flex items-center justify-end space-x-2"},Hr=["onClick","title"],Rr=["onClick"],Yr=["onClick"],Wr={key:3,class:"text-center py-12"},Jr={class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},Kr={class:"text-gray-600 dark:text-gray-400 mb-4"},Qr={key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-[9999]"},Xr={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[calc(100vh-2rem)] overflow-y-auto"},Zr={class:"p-6"},ea={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},ta={class:"space-y-6"},sa={class:"text-md font-medium text-gray-900 dark:text-white mb-4"},ra={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4"},aa={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},oa=["value","onInput"],la={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},na=["value","onInput"],da={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ia=["value","onInput"],ca={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ua=["value","onInput"],ga={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},pa=["value","onInput"],ya={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ba=["value","onInput"],xa={class:"flex space-x-3 mt-6"},ha=["disabled"],ma=["disabled"],Sa={__name:"ContentManager",setup(H){const{language:n}=ve(),{currentUser:h}=Qe(),{content:R,products:D,users:k,drafts:Y,channels:E,loadingChannels:w,loadingContent:$,fetchContent:I,fetchProducts:Ce,fetchUsers:De,fetchDrafts:Ie,fetchChannels:Se,createContent:Ee,updateContent:Ne,updateContentStatus:$e,updateContentChannelMetrics:Te,deleteContent:Me,transformDraftToContent:Ae}=et(),l=o=>U(o,n.value),O=m(!1),W=m(!1),F=m(!1),Z=m(!1),T=m(null),N=m(null),M=m(null),ee=m(null),L=m(""),z=m(""),V=m(!1),v=m(!1),A=m(!1),f=m({}),c=Ke({name:"",type:"",content:"",product:"",creator:h.value?.id||"",postDate:"",producer:h.value?.id||"",status:"PENDING",channels:[]});Xe(async()=>{await Promise.all([I(),Ce(),De(),Ie(),Se()])});const ne=be(()=>!Y.value||!h.value?[]:Y.value.filter(o=>o.status==="APPROVED")),de=be(()=>!R.value||!h.value?[]:R.value);Q([L,z],async()=>{await Pe()},{immediate:!1});const Pe=async()=>{const o={};L.value&&(o.status=L.value),z.value&&(o.channelId=z.value),await I(o)},ie=o=>h.value?.adminType==="ADMIN"||o.creatorId===h.value?.id||o.producerId===h.value?.id,Ue=o=>h.value?.adminType==="ADMIN"||o.producerId===h.value?.id,Ve=async()=>{V.value=!0;try{const o={name:c.name,type:c.type,content:c.content,productId:c.product,postDate:ye(c.postDate),channelIds:c.channels,status:c.status};c.producer&&(o.producerId=c.producer),T.value&&(o.creatorId=c.creator),T.value?await Ne(T.value.id,o):await Ee(o),te(),await I()}catch(o){console.error("Error saving content:",o)}finally{V.value=!1}},ce=async()=>{if(N.value){v.value=!0;try{const o={status:c.status,channelIds:c.channels,postDate:ye(c.postDate),productId:c.product||void 0,producerId:c.producer||void 0};await Ae(N.value.id,o),ue(),await I()}catch(o){console.error("Error transforming draft:",o)}finally{v.value=!1}}},te=()=>{Object.assign(c,{name:"",type:"",content:"",product:"",creator:h.value?.id||"",postDate:"",producer:h.value?.id||"",status:"PENDING",channels:[]}),O.value=!1,T.value=null},ue=()=>{W.value=!1,N.value=null,te()},je=o=>{T.value=o,Object.assign(c,{name:o.name,type:o.type,content:o.content||"",product:o.productId,creator:o.creatorId,postDate:Re(o.postDate),producer:o.producerId,status:o.status,channels:o.channels?.map(a=>a.id)||[]}),O.value=!0},Oe=async o=>{ee.value=o,Z.value=!0},ge=()=>{Z.value=!1,ee.value=null},Fe=async o=>{try{await Me(o),await I(),ge()}catch(a){console.error("Error deleting content:",a)}},Le=o=>{M.value=o;const a={};o.channels.forEach(t=>{const u=o.metrics?.channelMetrics?.find(P=>P.channelId===t.id);a[t.id]=u||{likes:0,comments:0,shares:0,postClicks:0,siteVisits:0,newAccounts:0}}),f.value=a,F.value=!0},j=(o,a,t)=>{f.value[o]||(f.value[o]={}),f.value[o][a]=t},ze=async()=>{if(M.value){A.value=!0;try{if(Object.keys(f.value).length===0){A.value=!1;return}const o=Object.entries(f.value).map(([t,u])=>({channelId:t.toString(),likes:u.likes||0,comments:u.comments||0,shares:u.shares||0,siteVisits:u.siteVisits||0,newAccounts:u.newAccounts||0,postClicks:u.postClicks||0})),a=await Te(M.value.id,o);a.success?(F.value=!1,M.value=null,f.value={},await I()):alert(`Erro ao atualizar métricas: ${a.error}`)}catch(o){console.error("Error updating metrics:",o);const a=o.response?.data?.message||o.message||"Erro ao atualizar métricas";alert(`Erro ao atualizar métricas: ${a}`)}finally{A.value=!1}}},qe=async(o,a)=>{try{const t=await $e(o.id,a);t.success||(console.error("Error updating status:",t.error),alert(`Erro ao atualizar status: ${t.error}`))}catch(t){console.error("Error updating status:",t),alert("Erro ao atualizar status do conteúdo")}},Be=()=>{F.value=!1,M.value=null};Q(W,o=>{o?document.body.style.overflow="hidden":document.body.style.overflow=""}),Q(F,o=>{o?document.body.style.overflow="hidden":document.body.style.overflow=""});const Ge=o=>D.value?.find(t=>t.id===o)?.name||"",se=o=>{if(!o)return"N/A";const a=`contentTypes.${o.toLowerCase()}`,t=l(a,n.value);return t!==a?t:o},pe=o=>{const a={PENDING:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",IN_PRODUCTION:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",POSTED:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",FINISHED:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",CANCELED:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"};return a[o]||a.PENDING},He=o=>{if(!o)return"";let a;if(Array.isArray(o)){const[q,B,G,re=0,ae=0]=o;a=new Date(q,B-1,G,re,ae)}else a=new Date(o);const t=n.value==="pt"?"pt-PT":"en-US",u=a.toLocaleDateString(t),P=a.toLocaleTimeString(t,{hour:"2-digit",minute:"2-digit"});return`${u} ${P}`},Re=o=>{if(!o)return"";let a;if(Array.isArray(o)){const[G,re,ae,Ye=0,We=0]=o;a=new Date(G,re-1,ae,Ye,We)}else a=new Date(o);const t=a.getFullYear(),u=String(a.getMonth()+1).padStart(2,"0"),P=String(a.getDate()).padStart(2,"0"),q=String(a.getHours()).padStart(2,"0"),B=String(a.getMinutes()).padStart(2,"0");return`${t}-${u}-${P}T${q}:${B}`},ye=o=>{if(!o)return;const a=new Date(o),t=a.getFullYear(),u=String(a.getMonth()+1).padStart(2,"0"),P=String(a.getDate()).padStart(2,"0"),q=String(a.getHours()).padStart(2,"0"),B=String(a.getMinutes()).padStart(2,"0"),G=String(a.getSeconds()).padStart(2,"0");return`${t}-${u}-${P}T${q}:${B}:${G}`};return(o,a)=>(d(),i(p,null,[e("div",kt,[e("div",wt,[e("h2",Ct,r(l("content")),1),e("div",Dt,[ne.value.length>0?(d(),i("button",{key:0,onClick:a[0]||(a[0]=t=>W.value=!0),class:"flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors"},[g(s(at),{class:"w-4 h-4 mr-2"}),J(" "+r(l("transformDraft")),1)])):_("",!0),e("button",{onClick:a[1]||(a[1]=t=>O.value=!0),class:"flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"},[g(s(oe),{class:"w-4 h-4 mr-2"}),J(" "+r(l("newContent")),1)])])]),e("div",It,[b(e("select",{"onUpdate:modelValue":a[2]||(a[2]=t=>L.value=t),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[e("option",St,r(l("allStatuses")),1),(d(!0),i(p,null,x(s(le),t=>(d(),i("option",{key:t,value:t},r(l(t)),9,Et))),128))],512),[[C,L.value]]),b(e("select",{"onUpdate:modelValue":a[3]||(a[3]=t=>z.value=t),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",disabled:!s(E)||s(E).length===0},[e("option",$t,r(l("allChannels")),1),!s(E)||s(E).length===0?(d(),i("option",Tt,r(s(w)?"Carregando canais...":"Nenhum canal disponível"),1)):_("",!0),(d(!0),i(p,null,x(s(E),t=>(d(),i("option",{key:t.id,value:t.id},r(t.name),9,Mt))),128))],8,Nt),[[C,z.value]])]),(d(),S(he,{to:"body"},[W.value?(d(),i("div",At,[e("div",Pt,[e("div",Ut,[e("div",Vt,[e("div",jt,[g(s(_e),{class:"w-5 h-5 text-green-600 dark:text-green-400"})]),e("div",null,[e("h3",Ot,r(l("transformDraftToContent",s(n))),1)])]),e("div",Ft,[e("p",Lt,r(l("transformDraftDescription",s(n))),1),N.value?(d(),i("div",zt,[e("div",qt,[g(s(ke),{class:"w-4 h-4 text-gray-500 dark:text-gray-400 mr-2 flex-shrink-0"}),e("div",Bt,[e("span",Gt,r(N.value.name),1),e("span",Ht,r(se(N.value.type)),1)])])])):_("",!0),e("form",{onSubmit:xe(ce,["prevent"]),class:"space-y-4"},[e("div",null,[e("label",Rt,r(l("selectDraft",s(n)))+" * ",1),b(e("select",{"onUpdate:modelValue":a[4]||(a[4]=t=>N.value=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:"",disabled:v.value},[e("option",Wt,r(l("selectApprovedDraft",s(n))),1),(d(!0),i(p,null,x(ne.value,t=>(d(),i("option",{key:t.id,value:t},r(t.name)+" - "+r(se(t.type)),9,Jt))),128))],8,Yt),[[C,N.value]])]),e("div",Kt,[e("div",null,[e("label",Qt,r(l("product",s(n))),1),b(e("select",{"onUpdate:modelValue":a[5]||(a[5]=t=>c.product=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:v.value},[e("option",Zt,r(l("selectProduct",s(n))),1),(d(!0),i(p,null,x(s(D),t=>(d(),i("option",{key:t.id,value:t.id},r(t.name),9,es))),128))],8,Xt),[[C,c.product]])]),e("div",null,[e("label",ts,r(l("producer",s(n))),1),b(e("select",{"onUpdate:modelValue":a[6]||(a[6]=t=>c.producer=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:v.value},[e("option",rs,r(l("selectProducer",s(n))),1),(d(!0),i(p,null,x(s(k),t=>(d(),i("option",{key:t.id,value:t.id},r(t.name),9,as))),128))],8,ss),[[C,c.producer]])])]),e("div",os,[e("div",null,[e("label",ls,r(l("postDate",s(n))),1),b(e("input",{type:"datetime-local","onUpdate:modelValue":a[7]||(a[7]=t=>c.postDate=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:v.value},null,8,ns),[[K,c.postDate]])]),e("div",null,[e("label",ds,r(l("status",s(n))),1),b(e("select",{"onUpdate:modelValue":a[8]||(a[8]=t=>c.status=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:v.value},[(d(!0),i(p,null,x(s(le),t=>(d(),i("option",{key:t,value:t},r(l(t,s(n))),9,cs))),128))],8,is),[[C,c.status]])])]),e("div",null,[e("label",us,r(l("channels",s(n)))+" * ",1),e("div",gs,[(d(!0),i(p,null,x(s(E),t=>(d(),i("div",{key:t.id,class:"flex items-center"},[b(e("input",{id:`transform-channel-${t.id}`,type:"checkbox",value:t.id,"onUpdate:modelValue":a[9]||(a[9]=u=>c.channels=u),disabled:v.value,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600 disabled:opacity-50"},null,8,ps),[[me,c.channels]]),e("label",{for:`transform-channel-${t.id}`,class:"ml-2 text-sm text-gray-900 dark:text-gray-300 cursor-pointer truncate"},r(t.name),9,ys)]))),128))]),c.channels.length===0?(d(),i("p",bs,r(l("selectAtLeastOneChannel",s(n))),1)):_("",!0)])],32)]),e("div",xs,[e("button",{type:"button",onClick:ue,disabled:v.value,class:"w-full sm:w-auto px-6 py-2 bg-gray-200 hover:bg-gray-300 disabled:bg-gray-100 text-gray-700 dark:bg-gray-600 dark:hover:bg-gray-500 dark:disabled:bg-gray-700 dark:text-gray-300 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},r(l("cancel",s(n))),9,hs),e("button",{onClick:ce,disabled:v.value||!N.value||c.channels.length===0,class:"w-full sm:w-auto flex items-center justify-center px-6 py-2 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white rounded-lg transition-colors space-x-2 disabled:opacity-50 disabled:cursor-not-allowed"},[v.value?(d(),S(s(X),{key:0,class:"w-4 h-4 animate-spin"})):(d(),S(s(_e),{key:1,class:"w-4 h-4"})),e("span",null,r(v.value?l("transforming",s(n)):l("transformToContent",s(n))),1)],8,ms)])])])])):_("",!0)])),O.value?(d(),i("div",fs,[e("h3",_s,r(T.value?l("editContent"):l("createNewContent")),1),e("form",{onSubmit:xe(Ve,["prevent"]),class:"space-y-4"},[e("div",vs,[e("div",null,[e("label",ks,r(l("name",s(n))),1),b(e("input",{type:"text","onUpdate:modelValue":a[10]||(a[10]=t=>c.name=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:""},null,512),[[K,c.name]])]),e("div",null,[e("label",ws,r(l("type",s(n))),1),b(e("select",{"onUpdate:modelValue":a[11]||(a[11]=t=>c.type=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:""},[e("option",Cs,r(l("type",s(n))),1),(d(!0),i(p,null,x(s(ot),t=>(d(),i("option",{key:t,value:t},r(l(`contentTypes.${t}`,s(n))),9,Ds))),128))],512),[[C,c.type]])])]),e("div",null,[e("label",Is,r(l("content",s(n))),1),b(e("textarea",{"onUpdate:modelValue":a[12]||(a[12]=t=>c.content=t),rows:"6",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white resize-vertical",placeholder:l("enterContentText",s(n)),required:""},null,8,Ss),[[K,c.content]])]),e("div",Es,[e("div",null,[e("label",Ns,r(l("product",s(n))),1),b(e("select",{"onUpdate:modelValue":a[13]||(a[13]=t=>c.product=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:""},[e("option",$s,r(l("product",s(n))),1),(d(!0),i(p,null,x(s(D),t=>(d(),i("option",{key:t.id,value:t.id},r(t.name),9,Ts))),128))],512),[[C,c.product]])]),e("div",null,[e("label",Ms,r(l("postDate",s(n))),1),b(e("input",{type:"datetime-local","onUpdate:modelValue":a[14]||(a[14]=t=>c.postDate=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:""},null,512),[[K,c.postDate]])])]),e("div",As,[e("div",null,[e("label",Ps,r(l("creator",s(n))),1),b(e("select",{"onUpdate:modelValue":a[15]||(a[15]=t=>c.creator=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:"",disabled:s(h).adminType!=="ADMIN"},[(d(!0),i(p,null,x(s(k),t=>(d(),i("option",{key:t.id,value:t.id},r(t.name),9,Vs))),128))],8,Us),[[C,c.creator]])]),e("div",null,[e("label",js,r(l("producer",s(n))),1),b(e("select",{"onUpdate:modelValue":a[16]||(a[16]=t=>c.producer=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:""},[(d(!0),i(p,null,x(s(k),t=>(d(),i("option",{key:t.id,value:t.id},r(t.name),9,Os))),128))],512),[[C,c.producer]])]),e("div",null,[e("label",Fs,r(l("status",s(n))),1),b(e("select",{"onUpdate:modelValue":a[17]||(a[17]=t=>c.status=t),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"},[(d(!0),i(p,null,x(s(le),t=>(d(),i("option",{key:t,value:t},r(l(t,s(n))),9,Ls))),128))],512),[[C,c.status]])])]),e("div",null,[e("label",zs,r(l("channels",s(n))),1),e("div",qs,[(d(!0),i(p,null,x(s(E),t=>(d(),i("label",{key:t.id,class:"flex items-center"},[b(e("input",{type:"checkbox",value:t.id,"onUpdate:modelValue":a[18]||(a[18]=u=>c.channels=u),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,8,Bs),[[me,c.channels]]),e("span",Gs,r(t.name),1)]))),128))])]),e("div",Hs,[e("button",{type:"submit",disabled:V.value,class:"flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-lg transition-colors"},[V.value?(d(),S(s(X),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):(d(),S(s(oe),{key:1,class:"w-4 h-4 mr-2"})),J(" "+r(V.value?T.value?l("updating",s(n)):l("creating",s(n)):T.value?l("update",s(n)):l("create",s(n))),1)],8,Rs),e("button",{type:"button",onClick:te,disabled:V.value,class:"px-4 py-2 bg-gray-300 hover:bg-gray-400 disabled:bg-gray-200 text-gray-700 rounded-lg transition-colors"},r(l("cancel",s(n))),9,Ys)])],32)])):_("",!0),s($)?(d(),i("div",Ws,[e("div",Js,[e("table",Ks,[e("thead",Qs,[e("tr",null,[e("th",Xs,[g(y,{customClass:"h-4 w-16"})]),e("th",Zs,[g(y,{customClass:"h-4 w-12"})]),e("th",er,[g(y,{customClass:"h-4 w-20"})]),e("th",tr,[g(y,{customClass:"h-4 w-16"})]),e("th",sr,[g(y,{customClass:"h-4 w-20"})]),e("th",rr,[g(y,{customClass:"h-4 w-16"})]),e("th",ar,[g(y,{customClass:"h-4 w-16"})])])]),e("tbody",or,[(d(),i(p,null,x(6,t=>e("tr",{key:t,class:"animate-pulse"},[e("td",lr,[g(y,{customClass:"h-4 w-32"})]),e("td",nr,[g(y,{customClass:"h-4 w-20"})]),e("td",dr,[g(y,{customClass:"h-4 w-24"})]),e("td",ir,[g(y,{customClass:"h-6 w-24 rounded-full"})]),e("td",cr,[g(y,{customClass:"h-4 w-28"})]),e("td",ur,[e("div",gr,[g(y,{customClass:"h-5 w-16 rounded-full"}),g(y,{customClass:"h-5 w-20 rounded-full"})])]),e("td",pr,[e("div",yr,[g(y,{customClass:"h-8 w-8 rounded"}),g(y,{customClass:"h-8 w-8 rounded"}),g(y,{customClass:"h-8 w-8 rounded"}),g(y,{customClass:"h-8 w-8 rounded"})])])])),64))])])])])):(d(),i("div",br,[e("table",xr,[e("thead",hr,[e("tr",null,[e("th",mr,r(l("name",s(n))),1),e("th",fr,r(l("type",s(n))),1),e("th",_r,r(l("product",s(n))),1),e("th",vr,r(l("status",s(n))),1),e("th",kr,r(l("postDate",s(n))),1),e("th",wr,r(l("channels",s(n))),1),e("th",Cr,r(l("actions",s(n))),1)])]),e("tbody",Dr,[(d(!0),i(p,null,x(de.value,t=>(d(),i("tr",{key:t.id},[e("td",Ir,[e("div",Sr,r(t.name),1)]),e("td",Er,[e("div",Nr,r(se(t.type)),1)]),e("td",$r,[e("div",Tr,r(Ge(t.productId)),1)]),e("td",Mr,[Ue(t)?(d(),i("select",{key:0,value:t.status,onChange:u=>qe(t,u.target.value),class:fe(["text-xs rounded-full px-2 py-1 border-0 focus:ring-2 focus:ring-blue-500",pe(t.status)])},[e("option",Pr,r(l("PENDING",s(n))),1),e("option",Ur,r(l("IN_PRODUCTION",s(n))),1),e("option",Vr,r(l("POSTED",s(n))),1),e("option",jr,r(l("FINISHED",s(n))),1),e("option",Or,r(l("CANCELED",s(n))),1)],42,Ar)):(d(),i("span",{key:1,class:fe(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",pe(t.status)])},r(l(t.status,s(n))),3))]),e("td",Fr,[e("div",Lr,r(He(t.postDate)),1)]),e("td",zr,[e("div",qr,[(d(!0),i(p,null,x(t.channels,u=>(d(),i("span",{key:u.id,class:"inline-flex px-2 py-1 text-xs bg-gray-100 dark:bg-gray-600 text-gray-800 dark:text-gray-200 rounded"},r(u.name),1))),128))])]),e("td",Br,[e("div",Gr,[["POSTED","FINISHED"].includes(t.status)?(d(),i("button",{key:0,onClick:u=>Le(t),class:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:l("updateMetrics",s(n))},[g(s(Ze),{class:"w-4 h-4"})],8,Hr)):_("",!0),ie(t)?(d(),i("button",{key:1,onClick:u=>je(t),class:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300"},[g(s(st),{class:"w-4 h-4"})],8,Rr)):_("",!0),ie(t)?(d(),i("button",{key:2,onClick:u=>Oe(t),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"},[g(s(we),{class:"w-4 h-4"})],8,Yr)):_("",!0)])])]))),128))])])])),!s($)&&de.value.length===0?(d(),i("div",Wr,[g(s(rt),{class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e("h3",Jr,r(l("noContentFound",s(n))),1),e("p",Kr,r(l("createFirstContent",s(n))),1),e("button",{onClick:a[19]||(a[19]=t=>O.value=!0),class:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"},[g(s(oe),{class:"w-4 h-4 mr-2"}),J(" "+r(l("newContent",s(n))),1)])])):_("",!0),(d(),S(he,{to:"body"},[F.value&&M.value?(d(),i("div",Qr,[e("div",Xr,[e("div",Zr,[e("h3",ea,r(l("updateMetrics",s(n)))+" - "+r(M.value.name),1),e("div",ta,[(d(!0),i(p,null,x(M.value.channels,t=>(d(),i("div",{key:t.id,class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4"},[e("h4",sa,r(t.name)+" "+r(l("metrics",s(n))),1),e("div",ra,[e("div",null,[e("label",aa,r(l("likes",s(n))),1),e("input",{type:"number",min:"0",value:f.value[t.id]?.likes||0,onInput:u=>j(t.id,"likes",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,oa)]),e("div",null,[e("label",la,r(l("comments",s(n))),1),e("input",{type:"number",min:"0",value:f.value[t.id]?.comments||0,onInput:u=>j(t.id,"comments",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,na)]),e("div",null,[e("label",da,r(l("shares",s(n))),1),e("input",{type:"number",min:"0",value:f.value[t.id]?.shares||0,onInput:u=>j(t.id,"shares",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,ia)]),e("div",null,[e("label",ca,r(l("siteVisits",s(n))),1),e("input",{type:"number",min:"0",value:f.value[t.id]?.siteVisits||0,onInput:u=>j(t.id,"siteVisits",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,ua)]),e("div",null,[e("label",ga,r(l("newAccounts",s(n))),1),e("input",{type:"number",min:"0",value:f.value[t.id]?.newAccounts||0,onInput:u=>j(t.id,"newAccounts",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,pa)]),e("div",null,[e("label",ya,r(l("postClicks",s(n))),1),e("input",{type:"number",min:"0",value:f.value[t.id]?.postClicks||0,onInput:u=>j(t.id,"postClicks",parseInt(u.target.value)||0),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-600 dark:text-white"},null,40,ba)])])]))),128))]),e("div",xa,[e("button",{onClick:ze,disabled:A.value,class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center space-x-2"},[A.value?(d(),S(s(X),{key:0,class:"h-4 w-4 animate-spin"})):_("",!0),e("span",null,r(A.value?l("saving",s(n)):l("save",s(n))),1)],8,ha),e("button",{onClick:Be,disabled:A.value,class:"px-4 py-2 bg-gray-300 hover:bg-gray-400 disabled:bg-gray-200 disabled:cursor-not-allowed text-gray-700 rounded-lg transition-colors"},r(l("cancel",s(n))),9,ma)])])])])):_("",!0)]))]),Z.value?(d(),S(vt,{key:0,content:ee.value,onClose:ge,onDelete:Fe},null,8,["content"])):_("",!0)],64))}};export{Sa as default};
