import{c as D,A as S,h as k,o as n,a as l,f as v,b as t,t as o,w as C,g as d,v as u,B as m,q as g,s as c,D as I,u as h,T as N}from"./index-DSC5aajj.js";import{L as E}from"./loader-circle-CYsQVaGS.js";import{P as T}from"./plus-J_RR_41C.js";/**
 * @license lucide-vue-next v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=D("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),P={key:0,class:"fixed inset-0 z-[9999] flex items-center justify-center p-4"},A={class:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[calc(100vh-2rem)] flex flex-col border border-gray-200 dark:border-gray-700 overflow-hidden",role:"dialog","aria-modal":"true"},U={class:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700 shrink-0 sticky top-0 bg-white/90 dark:bg-gray-800/90 backdrop-blur rounded-t-lg"},V={class:"text-lg font-semibold text-gray-900 dark:text-white"},q={class:"flex-1 overflow-y-auto px-6 py-6 space-y-6"},O={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},M={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},F={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},j={value:""},B=["value"],L={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},R=["placeholder"],z={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},H={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},G=["disabled"],Y=["value"],$={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},J=["value"],K={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Q=["value"],W={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},X={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Z={value:""},p=["value"],_={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ee={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},te={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ae={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},re={key:1},oe={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ne=["placeholder"],le={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},de={class:"grid grid-cols-2 md:grid-cols-3 gap-2"},se=["value"],ie={class:"ml-2 text-sm text-gray-700 dark:text-gray-300"},ue={class:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex flex-col sm:flex-row gap-3 sm:justify-end bg-white/90 dark:bg-gray-800/90 backdrop-blur shrink-0 rounded-b-lg"},ge=["disabled"],ce=["disabled"],xe={__name:"ContentFormModal",props:{show:{type:Boolean,required:!0},formData:{type:Object,required:!0},editingContent:{type:Object,default:null},products:{type:Array,default:()=>[]},users:{type:Array,default:()=>[]},channels:{type:Array,default:()=>[]},contentTypes:{type:Array,default:()=>[]},contentStatuses:{type:Array,default:()=>[]},t:{type:Function,required:!0},language:{type:String,required:!0},user:{type:Object,required:!0},isSubmitting:{type:Boolean,default:!1}},emits:["submit","cancel"],setup(e,{emit:y}){const s=e,f=y;S(()=>s.formData.status,b=>{b!=="POSTED"&&s.formData.metaAdsId&&(s.formData.metaAdsId=null)});const x=()=>f("submit"),i=()=>f("cancel");return(b,r)=>(n(),k(N,{to:"body"},[e.show?(n(),l("div",P,[t("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:i}),t("div",A,[t("div",U,[t("h3",V,o(e.editingContent?e.t("editContent",e.language):e.t("createNewContent",e.language)),1),t("button",{onClick:i,class:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300","aria-label":"Close"},"âœ•")]),t("div",q,[t("form",{id:"content-form",onSubmit:C(x,["prevent"]),class:"space-y-6"},[t("div",O,[t("div",null,[t("label",M,o(e.t("name",e.language)),1),d(t("input",{"onUpdate:modelValue":r[0]||(r[0]=a=>e.formData.name=a),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:""},null,512),[[u,e.formData.name]])]),t("div",null,[t("label",F,o(e.t("type",e.language)),1),d(t("select",{"onUpdate:modelValue":r[1]||(r[1]=a=>e.formData.type=a),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:""},[t("option",j,o(e.t("type",e.language)),1),(n(!0),l(g,null,c(e.contentTypes,a=>(n(),l("option",{key:a,value:a},o(e.t(`contentTypes.${a}`,e.language)),9,B))),128))],512),[[m,e.formData.type]])])]),t("div",null,[t("label",L,o(e.t("content",e.language)),1),d(t("textarea",{"onUpdate:modelValue":r[2]||(r[2]=a=>e.formData.content=a),rows:"6",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white resize-vertical",placeholder:e.t("enterContentText",e.language),required:""},null,8,R),[[u,e.formData.content]])]),t("div",z,[t("div",null,[t("label",H,o(e.t("creator",e.language)),1),d(t("select",{"onUpdate:modelValue":r[3]||(r[3]=a=>e.formData.creator=a),disabled:e.user.adminType!=="ADMIN",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:""},[(n(!0),l(g,null,c(e.users,a=>(n(),l("option",{key:a.id,value:a.id},o(a.name),9,Y))),128))],8,G),[[m,e.formData.creator]])]),t("div",null,[t("label",$,o(e.t("producer",e.language)),1),d(t("select",{"onUpdate:modelValue":r[4]||(r[4]=a=>e.formData.producer=a),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:""},[(n(!0),l(g,null,c(e.users,a=>(n(),l("option",{key:a.id,value:a.id},o(a.name),9,J))),128))],512),[[m,e.formData.producer]])]),t("div",null,[t("label",K,o(e.t("status",e.language)),1),d(t("select",{"onUpdate:modelValue":r[5]||(r[5]=a=>e.formData.status=a),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"},[(n(!0),l(g,null,c(e.contentStatuses,a=>(n(),l("option",{key:a,value:a},o(e.t(a,e.language)),9,Q))),128))],512),[[m,e.formData.status]])])]),t("div",W,[t("div",null,[t("label",X,o(e.t("product",e.language)),1),d(t("select",{"onUpdate:modelValue":r[6]||(r[6]=a=>e.formData.product=a),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:""},[t("option",Z,o(e.t("product",e.language)),1),(n(!0),l(g,null,c(e.products,a=>(n(),l("option",{key:a.id,value:a.id},o(a.name),9,p))),128))],512),[[m,e.formData.product]])]),t("div",null,[t("label",_,o(e.t("postDate",e.language)),1),d(t("input",{type:"datetime-local","onUpdate:modelValue":r[7]||(r[7]=a=>e.formData.postDate=a),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:""},null,512),[[u,e.formData.postDate]])])]),e.formData.status==="IN_PRODUCTION"?(n(),l("div",ee,[t("div",null,[t("label",te,o(e.t("productionStartDate",e.language)),1),d(t("input",{type:"datetime-local","onUpdate:modelValue":r[8]||(r[8]=a=>e.formData.productionStartDate=a),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"},null,512),[[u,e.formData.productionStartDate]])]),t("div",null,[t("label",ae,o(e.t("productionEndDate",e.language)),1),d(t("input",{type:"datetime-local","onUpdate:modelValue":r[9]||(r[9]=a=>e.formData.productionEndDate=a),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"},null,512),[[u,e.formData.productionEndDate]])])])):v("",!0),e.formData.status==="POSTED"?(n(),l("div",re,[t("label",oe,o(e.t("metaAdsId",e.language)),1),d(t("input",{"onUpdate:modelValue":r[10]||(r[10]=a=>e.formData.metaAdsId=a),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:e.t("enterMetaAdsId",e.language)},null,8,ne),[[u,e.formData.metaAdsId]])])):v("",!0),t("div",null,[t("label",le,o(e.t("channels",e.language)),1),t("div",de,[(n(!0),l(g,null,c(e.channels,a=>(n(),l("label",{key:a.id,class:"flex items-center"},[d(t("input",{type:"checkbox",value:a.id,"onUpdate:modelValue":r[11]||(r[11]=w=>e.formData.channels=w),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,8,se),[[I,e.formData.channels]]),t("span",ie,o(a.name),1)]))),128))])])],32)]),t("div",ue,[t("button",{type:"button",onClick:i,disabled:e.isSubmitting,class:"w-full sm:w-auto px-6 py-2 bg-gray-200 hover:bg-gray-300 disabled:bg-gray-100 text-gray-700 dark:bg-gray-600 dark:hover:bg-gray-500 dark:disabled:bg-gray-700 dark:text-gray-300 rounded-lg transition-colors disabled:cursor-not-allowed"},o(e.t("cancel",e.language)),9,ge),t("button",{type:"submit",form:"content-form",disabled:e.isSubmitting,class:"w-full sm:w-auto flex items-center justify-center px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-lg transition-colors space-x-2 disabled:cursor-not-allowed"},[e.isSubmitting?(n(),k(h(E),{key:0,class:"w-4 h-4 animate-spin"})):(n(),k(h(T),{key:1,class:"w-4 h-4"})),t("span",null,o(e.isSubmitting?e.editingContent?e.t("updating",e.language):e.t("creating",e.language):e.editingContent?e.t("update",e.language):e.t("create",e.language)),1)],8,ce)])])])):v("",!0)]))}};function ke(){try{const e=document.referrer,y=e.includes("/content/"),s=localStorage.getItem("contentManagerFilters"),f=Date.now(),x=localStorage.getItem("lastContentNavigation"),i=x&&f-parseInt(x)<1e4,b=sessionStorage.getItem("inContentPreview");return console.log("ðŸ” Navigation detection:"),console.log("  - Referrer:",e),console.log("  - From content preview:",y),console.log("  - Has stored filters:",!!s),console.log("  - Recent navigation:",i),console.log("  - Preview session:",b),y&&s||i&&s||b&&s}catch(e){return console.error("Error detecting navigation:",e),!1}}function ve(){try{localStorage.setItem("lastContentNavigation",Date.now().toString()),sessionStorage.setItem("inContentPreview","true"),console.log("ðŸ“ Marcou navegaÃ§Ã£o para content preview")}catch(e){console.error("Error marking navigation:",e)}}function he(){try{sessionStorage.removeItem("inContentPreview"),console.log("ðŸ§¹ Limpou sessÃ£o de preview")}catch(e){console.error("Error clearing preview session:",e)}}const we=["article","video","image","social","email","blog"],De=["PENDING","IN_PRODUCTION","POSTED","FINISHED","CANCELED"];export{De as C,fe as E,xe as _,we as a,he as c,ke as i,ve as m};
