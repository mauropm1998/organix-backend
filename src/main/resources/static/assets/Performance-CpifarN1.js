import{z as B,y as L,x as M,a as c,b as t,t as r,u as e,d,e as A,p as f,j as F,E as U,g,v,B as D,q as y,s as h,f as O,o as i}from"./index-CWbGlPLC.js";import{u as $}from"./useData-B7VlmU_F.js";import{_ as j}from"./SkeletonLoader-Bd7IEoAO.js";import{B as E}from"./box-B518OR41.js";import"./userService-DjmtoxOE.js";const q={class:"space-y-6"},z={class:"flex justify-between items-center"},H={class:"text-2xl font-bold text-gray-900 dark:text-white"},K=["disabled"],G={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"},J={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},Q={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},R={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},W={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},X={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Y={value:""},Z=["value"],tt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},et={value:""},at=["value"],rt={key:0},st={key:1},ot={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"},nt={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},dt={class:"overflow-x-auto"},lt={class:"w-full"},ct={class:"bg-gray-50 dark:bg-gray-700"},it={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},ut={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},xt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},pt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},gt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},yt={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},ht={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},_t={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},mt={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ft={class:"px-6 py-4 whitespace-nowrap"},kt={class:"text-sm font-medium text-gray-900 dark:text-white"},bt={class:"text-sm text-gray-500 dark:text-gray-400"},wt={class:"px-6 py-4"},vt={class:"flex flex-wrap gap-1"},Dt={class:"px-6 py-4 whitespace-nowrap"},Ct={class:"flex items-center space-x-2"},It={class:"text-sm text-gray-900 dark:text-white"},Nt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Pt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Vt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},St={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Tt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Bt={key:0},Lt={colspan:"8",class:"px-6 py-8 text-center"},Mt={class:"text-gray-500 dark:text-gray-400"},Et={__name:"Performance",setup(At){const{language:n}=A(),{products:C,channels:I,performanceData:_,loading:m,fetchPerformanceData:N,fetchProducts:P,fetchChannels:V}=$(),o=B({startDate:new Date(new Date().setMonth(new Date().getMonth()-1)).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],channel:"",productId:""}),k=s=>!s||/^\d{4}-\d{2}-\d{2}$/.test(s)?s:new Date(s).toISOString().split("T")[0],b=L(()=>!_.value||!Array.isArray(_.value)?[]:_.value.filter(l=>{if(l.postDate){const a=new Date(l.postDate),p=new Date(o.startDate),w=new Date(o.endDate);if(w.setHours(23,59,59,999),a<p||a>w)return!1}return!(o.channel&&!l.channels?.includes(o.channel))})),u=async()=>{const s={};o.startDate&&(s.startDate=k(o.startDate)),o.endDate&&(s.endDate=k(o.endDate)),o.channel&&o.channel.trim()!==""&&(s.channel=o.channel.trim()),o.productId&&o.productId.trim()!==""&&(s.productId=o.productId.trim()),await N(s)};M(async()=>{await Promise.all([P(),V(),u()])});function x(s){return typeof s!="number"?"0":s>=1e6?(s/1e6).toFixed(1)+"M":s>=1e3?(s/1e3).toFixed(1)+"K":s.toLocaleString()}function S(s){return s?typeof s=="string"?new Date(s).toLocaleDateString():s.toLocaleDateString():"N/A"}function T(s){if(!s)return"N/A";const l=`contentTypes.${s.toLowerCase()}`,a=d(l,n.value);return a!==l?a:s}return(s,l)=>(i(),c("div",q,[t("div",z,[t("h2",H,r(e(d)("performance",e(n).value)),1),t("button",{onClick:u,disabled:e(m).performance,class:"flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg transition-colors"},[f(e(U),{class:"w-4 h-4 mr-2"}),F(" "+r(e(m).performance?e(d)("loading",e(n).value):e(d)("refresh",e(n).value)),1)],8,K)]),t("div",G,[t("h3",J,r(e(d)("filters",e(n).value)),1),t("div",Q,[t("div",null,[t("label",R,r(e(d)("startDate",e(n).value)),1),g(t("input",{type:"date","onUpdate:modelValue":l[0]||(l[0]=a=>o.startDate=a),onChange:u,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,544),[[v,o.startDate]])]),t("div",null,[t("label",W,r(e(d)("endDate",e(n).value)),1),g(t("input",{type:"date","onUpdate:modelValue":l[1]||(l[1]=a=>o.endDate=a),onChange:u,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,544),[[v,o.endDate]])]),t("div",null,[t("label",X,r(e(d)("channel",e(n).value)),1),g(t("select",{"onUpdate:modelValue":l[2]||(l[2]=a=>o.channel=a),onChange:u,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[t("option",Y,r(e(d)("allChannels",e(n).value)),1),(i(!0),c(y,null,h(e(I),a=>(i(),c("option",{key:a.id,value:a.name},r(a.name),9,Z))),128))],544),[[D,o.channel]])]),t("div",null,[t("label",tt,r(e(d)("product",e(n).value)),1),g(t("select",{"onUpdate:modelValue":l[3]||(l[3]=a=>o.productId=a),onChange:u,class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[t("option",et,r(e(d)("allProducts",e(n).value)),1),(i(!0),c(y,null,h(e(C),a=>(i(),c("option",{key:a.id,value:a.id},r(a.name),9,at))),128))],544),[[D,o.productId]])])])]),e(m).performance?(i(),c("div",rt,[f(j,{type:"performance-table"})])):(i(),c("div",st,[t("div",ot,[t("h3",nt,r(e(d)("contentPerformance",e(n).value)),1),t("div",dt,[t("table",lt,[t("thead",ct,[t("tr",null,[t("th",it,r(e(d)("contentName",e(n).value)),1),t("th",ut,r(e(d)("channels",e(n).value)),1),t("th",xt,r(e(d)("product",e(n).value)),1),t("th",pt,r(e(d)("likes",e(n).value)),1),t("th",gt,r(e(d)("comments",e(n).value)),1),t("th",yt,r(e(d)("shares",e(n).value)),1),t("th",ht,r(e(d)("clicks",e(n).value)),1),t("th",_t,r(e(d)("postDate",e(n).value)),1)])]),t("tbody",mt,[(i(!0),c(y,null,h(b.value,a=>(i(),c("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[t("td",ft,[t("div",kt,r(a.name),1),t("div",bt,r(T(a.type)),1)]),t("td",wt,[t("div",vt,[(i(!0),c(y,null,h(a.channels,p=>(i(),c("span",{key:p,class:"inline-block px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded"},r(p),1))),128))])]),t("td",Dt,[t("div",Ct,[f(e(E),{class:"w-6 h-6 text-blue-500 dark:text-blue-400"}),t("span",It,r(a.productName),1)])]),t("td",Nt,r(x(a.metrics.likes)),1),t("td",Pt,r(x(a.metrics.comments)),1),t("td",Vt,r(x(a.metrics.shares)),1),t("td",St,r(x(a.metrics.clicks)),1),t("td",Tt,r(S(a.postDate)),1)]))),128)),b.value.length===0?(i(),c("tr",Bt,[t("td",Lt,[t("p",Mt,r(e(d)("noPerformanceData",e(n).value)),1)])])):O("",!0)])])])])]))]))}};export{Et as default};
